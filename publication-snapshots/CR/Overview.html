<!DOCTYPE html><html lang="en"><head>
<meta content="text/html; charset=utf-8" http-equiv="content-type">
<meta name="generator" content="ReSpec 34.2.0">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
:is(aside,div).example{border-left-width:.5em;border-left-style:solid;border-color:#e0cb52;background:#fcfaee}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
.example pre{background-color:rgba(0,0,0,.03)}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-width:.2em;border-style:solid;background:#fbe9e9}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>


<title>RDF Dataset Canonicalization</title>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
:is(h1,h2,h3,h4,h5,h6,a) abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>




<style>

  .hl-bold { font-weight: bold; color: #0a3; }
  .comment { color: #999; }
  table, thead, tr, td {
    padding: 5px;
    border-width: 1px;
    border-spacing: 0px;
    border-style: solid;
    border-collapse: collapse;
  }
  table.hash-related {
    caption-side: bottom;
    width: 100%;
  }
  table.hash-related > thead > tr> th {
    text-align: center;
  }
  .algorithm ol {
    counter-reset: numsection;
    list-style-type: none;
  }
  .algorithm ol>li {
    margin: 0.5em 0;
  }
  .algorithm ol>li:before {
    font-weight: bold;
    counter-increment: numsection;
    content: counters(numsection, ".") ") ";
  }
  a.externalDFN {border-bottom:  1px solid #99c; font-style: italic;}

  code { color: #c63501; }

  details, .details {
    background-color: rgb(245,245,245);
    border-left: 0.3em solid rgb(200,200,200);
    padding: 0.3em;
  }
  summary, .details > .summary {font-size: small; }

  pre.logging	{
    border: thin solid #88AA88;
    background-color: #E8F0E8;
    margin: 1em 4em 1em 0em;
    padding: 0.3em;
  }
  table.log ul { padding: 0; margin: 0; }
  table.log td { text-align: left; vertical-align: top;}
  table.log td.ca.c0 { display: none; }
  table.log td.bn_to_quads.c0 { display: none; }
  table.log td.identifier.c1 { font-style: italic; }
  table.log li { list-style: none; }

</style>

<style>
ul.index{columns:30ch;column-gap:1.5em}
ul.index li{list-style:inherit}
ul.index li span{color:inherit;cursor:pointer;white-space:normal}
#index-defined-here ul.index li{font-size:.9rem}
ul.index code{color:inherit}
#index-defined-here .print-only{display:none}
@media print{
#index-defined-here .print-only{display:initial}
}
</style>
<meta name="description" content="RDF [RDF11-CONCEPTS] describes a graph-based data model for making claims
    about the world and provides the foundation for reasoning upon that graph
    of information. At times, it becomes necessary to compare the differences
    between sets of graphs, digitally sign them, or generate short identifiers
    for graphs via hashing algorithms. This document outlines an algorithm for
    normalizing RDF datasets such that these operations can be
    performed.">
<link rel="canonical" href="https://www.w3.org/TR/rdf-canon/">
<script type="application/ld+json">{
  "@context": [
    "http://schema.org",
    {
      "@vocab": "http://schema.org/",
      "@language": "en",
      "w3p": "http://www.w3.org/2001/02pd/rec54#",
      "foaf": "http://xmlns.com/foaf/0.1/",
      "datePublished": {
        "@type": "http://www.w3.org/2001/XMLSchema#date"
      },
      "inLanguage": {
        "@language": null
      },
      "isBasedOn": {
        "@type": "@id"
      },
      "license": {
        "@type": "@id"
      }
    }
  ],
  "id": "https://www.w3.org/TR/rdf-canon/",
  "type": [
    "TechArticle",
    "w3p:CR"
  ],
  "name": "RDF Dataset Canonicalization",
  "inLanguage": "en",
  "license": "https://www.w3.org/Consortium/Legal/2023/software-license",
  "datePublished": "2023-10-31",
  "copyrightHolder": {
    "name": "World Wide Web Consortium",
    "url": "https://www.w3.org/"
  },
  "discussionUrl": "https://github.com/w3c/rdf-canon/issues/",
  "alternativeHeadline": "A Standard RDF Dataset Canonicalization Algorithm",
  "isBasedOn": "",
  "description": "RDF [RDF11-CONCEPTS] describes a graph-based data model for making claims\n    about the world and provides the foundation for reasoning upon that graph\n    of information. At times, it becomes necessary to compare the differences\n    between sets of graphs, digitally sign them, or generate short identifiers\n    for graphs via hashing algorithms. This document outlines an algorithm for\n    normalizing RDF datasets such that these operations can be\n    performed.",
  "editor": [
    {
      "type": "Person",
      "name": "Dave Longley",
      "url": "https://github.com/dlongley",
      "worksFor": {
        "name": "Digital Bazaar",
        "url": "https://digitalbazaar.com/"
      }
    },
    {
      "type": "Person",
      "name": "Gregg Kellogg",
      "url": "https://greggkellogg.net/"
    },
    {
      "type": "Person",
      "name": "Dan Yamamoto",
      "url": "https://github.com/yamdan"
    }
  ],
  "contributor": [
    {
      "type": "Person",
      "name": "Dave Longley",
      "url": "https://github.com/dlongley",
      "worksFor": {
        "name": "Digital Bazaar",
        "url": "https://digitalbazaar.com/"
      }
    }
  ],
  "citation": [
    {
      "id": "https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf",
      "type": "TechArticle",
      "name": "FIPS PUB 180-4: Secure Hash Standard (SHS)",
      "url": "https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf",
      "publisher": {
        "name": "U.S. Department of Commerce/National Institute of Standards and Technology"
      }
    },
    {
      "id": "https://www.w3.org/TR/rdf11-concepts/",
      "type": "TechArticle",
      "name": "RDF 1.1 Concepts and Abstract Syntax",
      "url": "https://www.w3.org/TR/rdf11-concepts/",
      "creator": [
        {
          "name": "Richard Cyganiak"
        },
        {
          "name": "David Wood"
        },
        {
          "name": "Markus Lanthaler"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc3987",
      "type": "TechArticle",
      "name": "Internationalized Resource Identifiers (IRIs)",
      "url": "https://www.rfc-editor.org/rfc/rfc3987",
      "creator": [
        {
          "name": "M. Duerst"
        },
        {
          "name": "M. Suignard"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/turtle/",
      "type": "TechArticle",
      "name": "RDF 1.1 Turtle",
      "url": "https://www.w3.org/TR/turtle/",
      "creator": [
        {
          "name": "Eric Prud'hommeaux"
        },
        {
          "name": "Gavin Carothers"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/n-quads/",
      "type": "TechArticle",
      "name": "RDF 1.1 N-Quads",
      "url": "https://www.w3.org/TR/n-quads/",
      "creator": [
        {
          "name": "Gavin Carothers"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/xpath-functions/",
      "type": "TechArticle",
      "name": "XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)",
      "url": "https://www.w3.org/TR/xpath-functions/",
      "creator": [
        {
          "name": "Ashok Malhotra"
        },
        {
          "name": "Jim Melton"
        },
        {
          "name": "Norman Walsh"
        },
        {
          "name": "Michael Kay"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/n-triples/",
      "type": "TechArticle",
      "name": "RDF 1.1 N-Triples",
      "url": "https://www.w3.org/TR/n-triples/",
      "creator": [
        {
          "name": "Gavin Carothers"
        },
        {
          "name": "Andy Seaborne"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/xml11/",
      "type": "TechArticle",
      "name": "Extensible Markup Language (XML) 1.1 (Second Edition)",
      "url": "https://www.w3.org/TR/xml11/",
      "creator": [
        {
          "name": "Tim Bray"
        },
        {
          "name": "Jean Paoli"
        },
        {
          "name": "Michael Sperberg-McQueen"
        },
        {
          "name": "Eve Maler"
        },
        {
          "name": "François Yergeau"
        },
        {
          "name": "John Cowan"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.unicode.org/versions/latest/",
      "type": "TechArticle",
      "name": "The Unicode Standard",
      "url": "https://www.unicode.org/versions/latest/",
      "publisher": {
        "name": "Unicode Consortium"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc2119",
      "type": "TechArticle",
      "name": "Key words for use in RFCs to Indicate Requirement Levels",
      "url": "https://www.rfc-editor.org/rfc/rfc2119",
      "creator": [
        {
          "name": "S. Bradner"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc8174",
      "type": "TechArticle",
      "name": "Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words",
      "url": "https://www.rfc-editor.org/rfc/rfc8174",
      "creator": [
        {
          "name": "B. Leiba"
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://infra.spec.whatwg.org/",
      "type": "TechArticle",
      "name": "Infra Standard",
      "url": "https://infra.spec.whatwg.org/",
      "creator": [
        {
          "name": "Anne van Kesteren"
        },
        {
          "name": "Domenic Denicola"
        }
      ],
      "publisher": {
        "name": "WHATWG"
      }
    },
    {
      "id": "https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/",
      "type": "TechArticle",
      "name": "RDF Dataset Canonicalization",
      "url": "https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/",
      "creator": [
        {
          "name": "Dave Longley"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.rfc-editor.org/rfc/rfc5646",
      "type": "TechArticle",
      "name": "Tags for Identifying Languages",
      "url": "https://www.rfc-editor.org/rfc/rfc5646",
      "creator": [
        {
          "name": "A. Phillips, Ed."
        },
        {
          "name": "M. Davis, Ed."
        }
      ],
      "publisher": {
        "name": "IETF"
      }
    },
    {
      "id": "https://www.w3.org/TR/rdf11-mt/",
      "type": "TechArticle",
      "name": "RDF 1.1 Semantics",
      "url": "https://www.w3.org/TR/rdf11-mt/",
      "creator": [
        {
          "name": "Patrick Hayes"
        },
        {
          "name": "Peter Patel-Schneider"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "http://yaml.org/spec/1.2/spec.html",
      "type": "TechArticle",
      "name": "YAML Ain’t Markup Language (YAML™) Version 1.2",
      "url": "http://yaml.org/spec/1.2/spec.html",
      "creator": [
        {
          "name": "Oren Ben-Kiki"
        },
        {
          "name": "Clark Evans"
        },
        {
          "name": "Ingy döt Net"
        }
      ]
    },
    {
      "id": "https://www.w3.org/TR/vc-data-integrity/",
      "type": "TechArticle",
      "name": "Verifiable Credential Data Integrity 1.0",
      "url": "https://www.w3.org/TR/vc-data-integrity/",
      "creator": [
        {
          "name": "Manu Sporny"
        },
        {
          "name": "Dave Longley"
        },
        {
          "name": "Greg Bernstein"
        },
        {
          "name": "Dmitri Zagidulin"
        },
        {
          "name": "Sebastian Crane"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://www.w3.org/TR/rch-explainer/",
      "type": "TechArticle",
      "name": "RDF Dataset Canonicalization and Hash Working Group — Explainer and Use Cases",
      "url": "https://www.w3.org/TR/rch-explainer/",
      "creator": [
        {
          "name": "Phil Archer"
        }
      ],
      "publisher": {
        "name": "W3C"
      }
    },
    {
      "id": "https://aidanhogan.com/docs/rdf-canonicalisation.pdf",
      "type": "TechArticle",
      "name": "Canonical Forms for Isomorphic and Equivalent RDF Graphs: Algorithms for Leaning and Labelling Blank Nodes",
      "url": "https://aidanhogan.com/docs/rdf-canonicalisation.pdf",
      "creator": [
        {
          "name": "Aiden Hogan"
        }
      ],
      "publisher": {
        "name": "ACM"
      }
    }
  ]
}</script>
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "localBiblio": {
    "CCG-RDC-FINAL": {
      "id": "CCG-RDC-FINAL",
      "title": "RDF Dataset Canonicalization",
      "authors": [
        "Dave Longley"
      ],
      "editors": [
        "Dave Longley",
        "Manu Sporny"
      ],
      "date": "October 9, 2022",
      "href": "https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/",
      "status": "CG-FINAL",
      "publisher": "W3C"
    },
    "DesignIssues-Diff": {
      "id": "DesignIssues-Diff",
      "title": "Delta: an ontology for the distribution of differences between RDF graphs",
      "authors": [
        "Tim Berners-Leee"
      ],
      "date": "September 25, 2015",
      "href": "https://www.w3.org/DesignIssues/Diff",
      "status": "unofficial",
      "publisher": "W3C"
    },
    "eswc2014Kasten": {
      "id": "eswc2014Kasten",
      "title": "A Framework for Iterative Signing of Graph Data on the Web",
      "authors": [
        "Andreas Kasten",
        "Ansgar Scherp",
        "Peter Schauß "
      ],
      "date": "2014",
      "href": "https://doi.org/10.1007/978-3-319-07443-6_11",
      "status": "unofficial",
      "publisher": "ISWC 2014"
    },
    "Hogan-Canonical-RDF": {
      "id": "Hogan-Canonical-RDF",
      "title": "Canonical Forms for Isomorphic and Equivalent RDF Graphs: Algorithms for Leaning and Labelling Blank Nodes",
      "authors": [
        "Aiden Hogan"
      ],
      "date": "November 2017",
      "href": "https://aidanhogan.com/docs/rdf-canonicalisation.pdf",
      "status": "ACM Trans. Web 11, 4, Article 22",
      "publisher": "ACM"
    },
    "HPL-2003-142": {
      "id": "HPL-2003-142",
      "title": "Signing RDF Graphs",
      "authors": [
        "Jeremy J. Carroll"
      ],
      "date": "July 23, 2003",
      "href": "https://www.hpl.hp.com/techreports/2003/HPL-2003-142.pdf",
      "publisher": "HP Laboratories Bristol",
      "status": "unofficial"
    }
  },
  "specStatus": "CR",
  "copyrightStart": "2010",
  "edDraftURI": "https://w3c.github.io/rdf-canon/spec/",
  "shortName": "rdf-canon",
  "subtitle": "A Standard RDF Dataset Canonicalization Algorithm",
  "github": "https://github.com/w3c/rdf-canon/",
  "editors": [
    {
      "name": "Dave Longley",
      "url": "https://github.com/dlongley",
      "w3cid": "48025",
      "company": "Digital Bazaar",
      "companyURL": "https://digitalbazaar.com/"
    },
    {
      "name": "Gregg Kellogg",
      "url": "https://greggkellogg.net/",
      "w3cid": "44770"
    },
    {
      "name": "Dan Yamamoto",
      "url": "https://github.com/yamdan",
      "w3cid": "139477"
    }
  ],
  "formerEditors": [
    {
      "name": "Manu Sporny",
      "url": "https://www.linkedin.com/in/manusporny/",
      "w3cid": "41758",
      "company": "Digital Bazaar",
      "companyURL": "https://digitalbazaar.com/",
      "note": "CG Report"
    }
  ],
  "authors": [
    {
      "name": "Dave Longley",
      "url": "https://github.com/dlongley",
      "w3cid": "48025",
      "company": "Digital Bazaar",
      "companyURL": "https://digitalbazaar.com/"
    }
  ],
  "group": "rch",
  "crEnd": "2023-11-28",
  "testSuiteURI": "https://w3c.github.io/rdf-canon/tests/",
  "implementationReportURI": "https://w3c.github.io/rdf-canon/reports/",
  "xref": [
    "infra"
  ],
  "doJsonLd": true,
  "wgPublicList": "public-rch-wg",
  "lint": {
    "informative-dfn": false
  },
  "publishDate": "2023-10-31",
  "publishISODate": "2023-10-31T00:00:00.000Z",
  "generatedSubtitle": "W3C Candidate Recommendation Snapshot 31 October 2023"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-CR"></head>

<body class="h-entry" data-cite="infra"><div class="head">
    <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">RDF Dataset Canonicalization</h1> <h2 id="subtitle" class="subtitle">A Standard RDF Dataset Canonicalization Algorithm</h2>
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#CR">W3C Candidate Recommendation Snapshot</a> <time class="dt-published" datetime="2023-10-31">31 October 2023</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://www.w3.org/TR/2023/CR-rdf-canon-20231031/">https://www.w3.org/TR/2023/CR-rdf-canon-20231031/</a>
              </dd>
        <dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/rdf-canon/">https://www.w3.org/TR/rdf-canon/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/rdf-canon/spec/">https://w3c.github.io/rdf-canon/spec/</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://www.w3.org/standards/history/rdf-canon/">https://www.w3.org/standards/history/rdf-canon/</a>
                  </dd><dd>
                    <a href="https://github.com/w3c/rdf-canon/commits/">Commit history</a>
                  </dd>
        <dt>Test suite:</dt><dd><a href="https://w3c.github.io/rdf-canon/tests/">https://w3c.github.io/rdf-canon/tests/</a></dd>
        <dt>Implementation report:</dt><dd>
                <a href="https://w3c.github.io/rdf-canon/reports/">https://w3c.github.io/rdf-canon/reports/</a>
              </dd>
        
        
        
        <dt>Editors:</dt><dd class="editor p-author h-card vcard" data-editor-id="48025">
    <a class="u-url url p-name fn" href="https://github.com/dlongley">Dave Longley</a> (<a class="p-org org h-org" href="https://digitalbazaar.com/">Digital Bazaar</a>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="44770">
    <a class="u-url url p-name fn" href="https://greggkellogg.net/">Gregg Kellogg</a>
  </dd><dd class="editor p-author h-card vcard" data-editor-id="139477">
    <a class="u-url url p-name fn" href="https://github.com/yamdan">Dan Yamamoto</a>
  </dd>
        <dt>
                Former editor:
              </dt><dd class="editor p-author h-card vcard" data-editor-id="41758">
    <a class="u-url url p-name fn" href="https://www.linkedin.com/in/manusporny/">Manu Sporny</a> (<a class="p-org org h-org" href="https://digitalbazaar.com/">Digital Bazaar</a>) (CG Report)
  </dd>
        <dt>Author:</dt><dd class="editor p-author h-card vcard" data-editor-id="48025">
    <a class="u-url url p-name fn" href="https://github.com/dlongley">Dave Longley</a> (<a class="p-org org h-org" href="https://digitalbazaar.com/">Digital Bazaar</a>)
  </dd>
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/rdf-canon/">GitHub w3c/rdf-canon</a>
        (<a href="https://github.com/w3c/rdf-canon/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/rdf-canon/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/rdf-canon/issues/">open issues</a>)
      </dd><dd><a href="mailto:public-rch-wg@w3.org?subject=%5Brdf-canon%5D%20YOUR%20TOPIC%20HERE">public-rch-wg@w3.org</a> with subject line <kbd>[rdf-canon] <em>… message topic …</em></kbd> (<a rel="discussion" href="https://lists.w3.org/Archives/Public/public-rch-wg">archives</a>)</dd>
        
        
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2010-2023
    
    <a href="https://www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/Consortium/Legal/2023/software-license" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
<section id="abstract" class="introductory"><h2>Abstract</h2>
  <p>RDF [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] describes a graph-based data model for making claims
    about the world and provides the foundation for reasoning upon that graph
    of information. At times, it becomes necessary to compare the differences
    between sets of graphs, digitally sign them, or generate short identifiers
    for graphs via hashing algorithms. This document outlines an algorithm for
    normalizing <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-1">RDF datasets</a> such that these operations can be
    performed.</p>
</section>

<section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
  <p>This document describes the <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-1"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> algorithm for canonicalizing
    RDF datasets, which was the input from the
    <a href="https://www.w3.org/community/credentials/"><abbr title="World Wide Web Consortium">W3C</abbr> Credentials Community Group</a>
    published as [<cite><a class="bibref" data-link-type="biblio" href="#bib-ccg-rdc-final" title="RDF Dataset Canonicalization">CCG-RDC-FINAL</a></cite>].</p>

  <p>At the time of publication, [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] is the most recent recommendation
    defining <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-2">RDF datasets</a> and [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-QUADS</a></cite>],
    however work on an updated specification
    is ongoing within the <a href="https://www.w3.org/groups/wg/rdf-star"><abbr title="World Wide Web Consortium">W3C</abbr> RDF-star Working Group</a>.
    Some dependencies from relevant updated specifications are provided
    normatively in this specification with the expectation
    that a future update to this specification will replace those with normative
    references to updated RDF specifications.</p>

  <p>To successfully advance to Proposed Recommendation,
    each test in the <a href="https://w3c.github.io/rdf-canon/tests/">test suite</a>
    <em class="rfc2119">MUST</em> be passed by at least three independent implementations.
    Two independent implementations <em class="rfc2119">MUST</em> pass all tests.</p>
<p>
    This document was published by the <a href="https://www.w3.org/groups/wg/rch">RDF Dataset Canonicalization and Hash Working Group</a> as
    a Candidate Recommendation Snapshot using the
        <a href="https://www.w3.org/2023/Process-20230612/#recs-and-notes">Recommendation track</a>. 
  </p><p>Publication as a Candidate Recommendation does not
  imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. A Candidate Recommendation Snapshot has received
        <a href="https://www.w3.org/2023/Process-20230612/#dfn-wide-review">wide review</a>, is intended to
        gather
        <a href="https://w3c.github.io/rdf-canon/reports/">implementation experience</a>,
        and has commitments from Working Group members to
        <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Requirements">royalty-free licensing</a>
        for implementations.</p><p>
          This Candidate Recommendation is not expected to advance to Proposed
          Recommendation any earlier than 28 November 2023.
        </p><p>
    
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
      
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="https://www.w3.org/groups/wg/rch/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2023/Process-20230612/">12 June 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#intro-uses"><bdi class="secno">1.1 </bdi>Uses of Dataset Canonicalization</a></li><li class="tocline"><a class="tocxref" href="#how-to-read"><bdi class="secno">1.2 </bdi>How to Read this Document</a></li><li class="tocline"><a class="tocxref" href="#typo-conventions"><bdi class="secno">1.3 </bdi>Typographical conventions</a></li></ol></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">2. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#terminology"><bdi class="secno">3. </bdi>Terminology</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#canon-terms"><bdi class="secno">3.1 </bdi>Terms defined by this specification</a></li><li class="tocline"><a class="tocxref" href="#terms-reference"><bdi class="secno">3.2 </bdi>Terms defined by cited specifications</a></li></ol></li><li class="tocline"><a class="tocxref" href="#canonicalization"><bdi class="secno">4. </bdi>Canonicalization</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#canon-overview"><bdi class="secno">4.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#canon-state"><bdi class="secno">4.2 </bdi>Canonicalization State</a></li><li class="tocline"><a class="tocxref" href="#bn-issuer-state"><bdi class="secno">4.3 </bdi>Blank Node Identifier Issuer State</a></li><li class="tocline"><a class="tocxref" href="#canon-algorithm"><bdi class="secno">4.4 </bdi>Canonicalization Algorithm</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#canon-algo-overview"><bdi class="secno">4.4.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#canon-algo-examples"><bdi class="secno">4.4.2 </bdi>Examples</a></li><li class="tocline"><a class="tocxref" href="#canon-algo-algo"><bdi class="secno">4.4.3 </bdi>Algorithm</a></li></ol></li><li class="tocline"><a class="tocxref" href="#issue-identifier"><bdi class="secno">4.5 </bdi>Issue Identifier Algorithm</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#issue-identifier-overview"><bdi class="secno">4.5.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#issue-identifier-algorithm"><bdi class="secno">4.5.2 </bdi>Algorithm</a></li></ol></li><li class="tocline"><a class="tocxref" href="#hash-1d-quads"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#hash-1d-quads-overview"><bdi class="secno">4.6.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#hash-1d-quads-examples"><bdi class="secno">4.6.2 </bdi>Examples</a></li><li class="tocline"><a class="tocxref" href="#hash-1d-quads-algorithm"><bdi class="secno">4.6.3 </bdi>Algorithm</a></li></ol></li><li class="tocline"><a class="tocxref" href="#hash-related-blank-node"><bdi class="secno">4.7 </bdi>Hash Related Blank Node</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#hash-related-bn-overview"><bdi class="secno">4.7.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#hash-related-bn-examples"><bdi class="secno">4.7.2 </bdi>Examples</a></li><li class="tocline"><a class="tocxref" href="#hash-related-algorithm"><bdi class="secno">4.7.3 </bdi>Algorithm</a></li></ol></li><li class="tocline"><a class="tocxref" href="#hash-nd-quads"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#hash-nd-quads-overview"><bdi class="secno">4.8.1 </bdi>Overview</a></li><li class="tocline"><a class="tocxref" href="#hash-nd-quads-examples"><bdi class="secno">4.8.2 </bdi>Examples</a></li><li class="tocline"><a class="tocxref" href="#hash-nd-quads-algorithm"><bdi class="secno">4.8.3 </bdi>Algorithm</a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#serialization"><bdi class="secno">5. </bdi>Serialization</a></li><li class="tocline"><a class="tocxref" href="#privacy-considerations"><bdi class="secno">6. </bdi>Privacy Considerations</a></li><li class="tocline"><a class="tocxref" href="#security-considerations"><bdi class="secno">7. </bdi>Security Considerations</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#dataset-poisoning"><bdi class="secno">7.1 </bdi>Dataset Poisoning</a></li><li class="tocline"><a class="tocxref" href="#insecure-hash-algorithms"><bdi class="secno">7.2 </bdi>Insecure Hash Algorithms</a></li></ol></li><li class="tocline"><a class="tocxref" href="#use-cases"><bdi class="secno">8. </bdi>Use Cases</a></li><li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">9. </bdi>Examples</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#duplicate-paths-ex"><bdi class="secno">9.1 </bdi>Duplicate Paths</a></li><li class="tocline"><a class="tocxref" href="#double-circle-ex"><bdi class="secno">9.2 </bdi>Double Circle</a></li><li class="tocline"><a class="tocxref" href="#dataset-bn-graph-ex"><bdi class="secno">9.3 </bdi>Dataset with Blank Node Named Graph</a></li></ol></li><li class="tocline"><a class="tocxref" href="#canonical-quads"><bdi class="secno">A. </bdi>A Canonical form of N-Quads</a></li><li class="tocline"><a class="tocxref" href="#urdna2015"><bdi class="secno">B. </bdi><abbr title="Universal RDF Dataset Normalization Algorithm 2015">URDNA2015</abbr></a></li><li class="tocline"><a class="tocxref" href="#urgna2012"><bdi class="secno">C. </bdi><abbr title="Universal RDF Graph Canonicalization Algorithm 2012">URGNA2012</abbr></a></li><li class="tocline"><a class="tocxref" href="#index"><bdi class="secno">D. </bdi>Index</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#index-defined-here"><bdi class="secno">D.1 </bdi>Terms defined by this specification</a></li><li class="tocline"><a class="tocxref" href="#index-defined-elsewhere"><bdi class="secno">D.2 </bdi>Terms defined by reference</a></li></ol></li><li class="tocline"><a class="tocxref" href="#changes-from-fpwd"><bdi class="secno">E. </bdi>Changes since the First Public Working Draft of 24 November 2022</a></li><li class="tocline"><a class="tocxref" href="#ack"><bdi class="secno">F. </bdi>Acknowledgements</a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">G. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">G.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">G.2 </bdi>Informative references</a></li></ol></li></ol></nav>

<section id="introduction" class="informative"><div class="header-wrapper"><h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction</h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 1."></a></div><p><em>This section is non-normative.</em></p>
  

  <p>When data scientists discuss canonicalization,
    they do so in the context of achieving a particular set of goals.
    Since the same information may sometimes be expressed in a variety of different ways,
    it often becomes necessary to transform each of these
    different ways into a single, standard representation.
    With a standard representation, the differences between
    two different sets of data can be easily determined,
    a cryptographically-strong hash identifier can be generated for a particular
    set of data,
    and a particular set of data may be digitally-signed for later
    verification.</p>

  <p>In particular, this specification is about normalizing
    <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-3">RDF datasets</a>, which are collections of graphs. Since
    a directed graph can express the same information in more than one
    way, it requires canonicalization to achieve the aforementioned goals
    and any others that may arise via serendipity.</p>

  <p>Most <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-4">RDF datasets</a> can be canonicalized fairly quickly, in terms
    of algorithmic time complexity. However, those that contain nodes that do
    not have globally unique identifiers pose a greater challenge. Normalizing
    these datasets presents the <dfn id="dfn-graph-isomorphism" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">graph isomorphism</dfn> problem, a
    problem that is believed to be difficult to solve quickly in the worst
    case. Fortunately, existing real world data is rarely, if ever, modeled in
    a way that manifests as the worst case and new data can be modeled to avoid
    it. In fact, software systems that detect a problematic dataset
    (see <a href="#dataset-poisoning" class="sectionRef sec-ref"><bdi class="secno">7.1 </bdi>Dataset Poisoning</a>) can choose
    to assume it's an attempted denial of service attack, rather than a
    real input, and abort.</p>

  <p>This document outlines an algorithm for generating a canonical
    serialization of an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-5">RDF dataset</a> given an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-6">RDF dataset</a> as input.
    The algorithm is called the
    <strong>RDF Canonicalization algorithm version 1.0</strong> or
    <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-2"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>.</p>

  <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="3"><span>Note</span></div><div class="">
    <p><cite><a data-matched-text="[[[RDF11-CONCEPTS]]]" href="https://www.w3.org/TR/rdf11-concepts/">RDF 1.1 Concepts and Abstract Syntax</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] lacks clarity on the representation of
      <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string" id="ref-for-index-term-language-tagged-strings-1">language-tagged strings</a>,
      where <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag" id="ref-for-index-term-language-tags-1">language tags</a> of the form <code>xx-YY</code>
      are treated as being case insensitive. Implementations might represent language tags
      using all lower case in the form <code>xx-yy</code>,
      retain the original representation <code>xx-YY</code>,
      or use [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47" title="Tags for Identifying Languages">BCP47</a></cite>] <a href="https://www.rfc-editor.org/rfc/rfc5646#section-2.1.1" id="ref-for-index-term-formatting-conventions-1">formatting conventions</a>,
      leading to different canonical forms, and therefore, different hashed values.</p>
    <ul>
      <li>The Canonicalization algorithm is based on the RDF 1.1 definition,
        in the sense that the <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag" id="ref-for-index-term-language-tags-2">language tag</a> <code>xx-YY</code>
        is case insensitive, which might lead to different canonicalizations if the user is not aware of this problem.</li>
      <li>User communities ought to agree to use lower case
        <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag" id="ref-for-index-term-language-tags-3">language tags</a>,
        while being aware that some implementations might normalize language tags,
        affecting hash values.</li>
      <li>Future evolution of RDF might regulate this issue, which RDF environments might have to adapt to,
        and this might lead to an update of <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-3"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>.</li>
    </ul>
    
  </div></div>
  <div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="3"><span>Note</span></div><p class="">See <a href="#urdna2015" class="sectionRef sec-ref"><bdi class="secno">B. </bdi><abbr title="Universal RDF Dataset Normalization Algorithm 2015">URDNA2015</abbr></a>
    for a comparison with the version of the algorithm published
    in <cite><a data-matched-text="[[[CCG-RDC-FINAL]]]" href="https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/">RDF Dataset Canonicalization</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-ccg-rdc-final" title="RDF Dataset Canonicalization">CCG-RDC-FINAL</a></cite>].</p></div>

  <section id="intro-uses"><div class="header-wrapper"><h3 id="x1-1-uses-of-dataset-canonicalization"><bdi class="secno">1.1 </bdi>Uses of Dataset Canonicalization</h3><a class="self-link" href="#intro-uses" aria-label="Permalink for Section 1.1"></a></div>
    
    <p>There are different use cases where graph or dataset canonicalization are important:</p>
    <ul>
      <li>Determining if one serialization is isomorphic to another.</li>
      <li>Digital signing of graphs (datasets) independent of serialization or format.</li>
      <li>Comparing two graphs (datasets) to find differences.</li>
      <li>Communicating change sets when remotely updating an <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-source" id="ref-for-index-term-rdf-source-1">RDF source</a>.</li>
    </ul>
    <p>A canonicalization algorithm is necessary, but not necessarily sufficient, to handle many of these use cases. The use of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-1">blank nodes</a> in RDF graphs and datasets has a long history and creates inevitable complexities. Blank nodes are used for different purposes:</p>
    <ul>
      <li>when a well known identifier for a node is not known, or the author of a document chooses not to unambiguously name that node,</li>
      <li>when a node is used to stitch together parts of a graph and the nodes themselves are not interesting (e.g., <a href="https://www.w3.org/TR/rdf11-mt/#rdf-collections" id="ref-for-index-term-rdf-collections-1">RDF Collections</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-mt" title="RDF 1.1 Semantics">RDF11-MT</a></cite>]),</li>
      <li>when someone is trying to create an intentionally difficult graph topology.</li>
    </ul>
    <p>Furthermore,
      RDF semantics dictate that deserializing an RDF document
      results in the creation of unique <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-2">blank nodes</a>,
      unless it can be determined that on each occasion,
      the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-3">blank node</a> identifies the same resource.
      This is due to the fact that <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-1">blank node identifiers</a>
      are an aspect of a concrete RDF syntax
      and are not intended to be persistent or portable.
      Within the abstract RDF model,
      blank nodes do not have identifiers
      (although some
      RDF store
      implementations may use stable identifiers and may choose to make them portable).
      See <a href="https://www.w3.org/TR/rdf11-concepts/#section-blank-nodes" id="ref-for-index-term-blank-nodes-0-1">Blank Nodes</a>
      in [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>] for more information.</p>

    <p>RDF does have a provision for allowing blank nodes
      to be published in an externally identifiable way through the use of
      <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-skolem-iri" id="ref-for-index-term-skolem-iris-1">Skolem IRIs</a>,
      which allow a given RDF store to replace the use of blank nodes
      in a concrete syntax with <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri" id="ref-for-index-term-iris-1">IRIs</a>,
      which then serve to repeatably identify that blank node within that particular RDF store;
      however, this is not generally useful for talking about the
      same graph in different RDF stores,
      or other concrete representations.
      In any case, a stable <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-2">blank node identifier</a> defined for one
      RDF store or serialization is arbitrary,
      and typically not relatable to the context within which it is used.</p>

    <p>This specification defines an algorithm for creating stable
      <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-3">blank node identifiers</a> repeatably for different serializations
      possibly using individualized <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-4">blank node identifiers</a>
      of the same RDF graph (dataset) by grounding each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-4">blank node</a>
      through the nodes to which it is connected.
      As a result, a graph signature can be obtained by hashing a canonical serialization
      of the resulting <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-1">canonicalized dataset</a>,
      allowing for the isomorphism and digital signing use cases.
      This specification does not define such a graph signature.</p>

    <p>As blank node identifiers can be stable even with other changes to a graph (dataset),
      in some cases it is possible to compute the difference between two graphs (datasets),
      for example if changes are made only to ground triples,
      or if new blank nodes are introduced which do not create an automorphic confusion
      with other existing blank nodes.
      If any information which would change the generated blank node identifier,
      a resulting diff might indicate a greater set of changes than actually exists.
      Additionally, if the starting dataset is an N-Quads document,
      it may be possible to correlate the original blank node identifiers
      used within that N-Quads document with those issued in the
      <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-2">canonicalized dataset</a>.</p>

    <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="4"><span>Note</span></div><p class="">Although alternative <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-1">hash algorithms</a> might be used
      with this specification,
      applications ought to carefully weigh the advantages
      and disadvantages of using an alternative hash function.
      This is the case, in particular, for any representation of the <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-1">canonical n-quads form</a>
      or <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-1">issued identifiers map</a>
      that does not identify the associated hash algorithm. Any use case
      that requires reproduction of the same output is expected to
      unequivocally express or communicate the internal 
      hash algorithm that was used when generating 
      the <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-2">canonical n-quads form</a>.
    </p></div>
  </section>

  <section id="how-to-read"><div class="header-wrapper"><h3 id="x1-2-how-to-read-this-document"><bdi class="secno">1.2 </bdi>How to Read this Document</h3><a class="self-link" href="#how-to-read" aria-label="Permalink for Section 1.2"></a></div>
    

    <p>This document is a detailed specification for an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-7">RDF dataset</a>
      canonicalization algorithm. The document is primarily intended for the
      following audiences:</p>

    <ul>
      <li>Software developers that want to implement an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-8">RDF dataset</a>
        canonicalization algorithm.</li>
      <li>Masochists.</li>
    </ul>

    <p>To understand the basics in this specification you must be familiar with
      basic RDF concepts [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>]. A working knowledge of
      <a href="https://en.wikipedia.org/wiki/Graph_theory">graph theory</a> and
      <a href="https://en.wikipedia.org/wiki/Graph_isomorphism">graph isomorphism</a>
      is also recommended.</p>
  </section>

  <section id="typo-conventions" class="informative"><div class="header-wrapper"><h3 id="x1-3-typographical-conventions"><bdi class="secno">1.3 </bdi>Typographical conventions</h3><a class="self-link" href="#typo-conventions" aria-label="Permalink for Section 1.3"></a></div><p><em>This section is non-normative.</em></p>
    
    <div><p>The following typographic conventions are used in this specification:</p>

<dl class="typography">
  <dt><code>markup</code></dt><dd>
    Markup (elements, attributes, properties),
    machine processable values (string, characters, media types),
    property names,
    and file names are in red-orange monospace font.</dd>
  <dt><var>variable</var></dt><dd>
    A variable in pseudo-code or in an algorithm description is italicized.</dd>
  <dt><dfn data-no-xref="" id="dfn-definition" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">definition</dfn></dt><dd>
    A definition of a term, to be used elsewhere in this or other specifications,
    is italicized and in bold.</dd>
  <dt><a data-lt="definition" href="#dfn-definition" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-definition-1">definition reference</a></dt><dd>
    A reference to a definition <em>in this document</em>
    is underlined and is also an active link to the definition itself. </dd>
  <dt><a data-lt="definition" href="#dfn-definition" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-definition-2"><code>markup definition reference</code></a></dt><dd>
    References to a definition <em>in this document</em>,
    when the reference itself is also a markup, is underlined,
    in a red-orange monospace font, and is also an active link to the definition itself.</dd>
  <dt><a class="externalDFN">external definition reference</a></dt><dd>
    A reference to a definition <em>in another document</em>
    is underlined and italicized, and is also an active link to the definition itself.</dd>
  <dt><a class="externalDFN"><code> markup external definition reference</code></a></dt><dd>
    A reference to a definition <em>in another document</em>,
    when the reference itself is also a markup,
    is underlined and italicized in a red-orange monospace font,
    and is also an active link to the definition itself.</dd>
  <dt><a href="">hyperlink</a></dt><dd>
    A hyperlink is underlined and in blue.</dd>
  <dt>[<a href="">reference</a>]</dt><dd>
    A document reference (normative or informative) is enclosed in square brackets
    and links to the references section.</dd>
  <dt><span class="details"><span class="summary">Explanation</span></span></dt><dd>
    An expandable area to find a more detailed, non-normative explanation of a
    particular algorithmic step.
    <details>
      <summary>Explanation</summary>
      <p>This area would provide more information about the step involved.</p>
    </details>
  </dd>
  <dt><span class="details"><span class="summary">Logging</span></span></dt><dd>
    An expandable area to find suggestions for implementations to log
    information about processing,
    which may be useful in comparing with other implementations,
    or with logs provided with each test case.
    <details>
      <summary>Logging</summary>
      <p>For example, the following output snippet might
        describe the operation of an implementation using the [<cite><a class="bibref" data-link-type="biblio" href="#bib-yaml" title="YAML Ain’t Markup Language (YAML™) Version 1.2">YAML</a></cite>] format.</p>
      <pre class="logging yaml nohighlight">ca:
  ca2:
    bn_to_quads:
      e0:
        - _:e0 &lt;http://example.com/#p1&gt; _:e1 .
      e1:
        ...
  ca3:
  - identifier: e0
    h1dq:
      nquads:
        - _:a &lt;http://example.com/#p1&gt; _:z .</pre>
    </details>
  </dd>
</dl>

<div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="4"><span>Note</span></div><p class="">Notes are in light green boxes with a green left border and with a "Note" header in green.
  Notes are always informative.</p></div>

<div class="example" id="example-1">
        <div class="marker">
    <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
  </div> <pre class="nohighlight">Examples are in light khaki boxes, with khaki left border,
and with a numbered "Example" header in khaki.
Examples are always informative. The content of the example is in monospace font and may be 
syntax colored.

Examples may have tabbed navigation buttons
to show the results of transforming an example into other representations.

Code examples are generally given in a Turtle or TriG format for brevity,
where each line represents a single triple or quad.
Additionally, have the following implied directives:

BASE &lt;http://example.com/&gt;
PREFIX : &lt;#&gt;

Following the Turtle/TriG syntax rules, blank nodes always appear in the 
`_:xyz` format.</pre>
      </div>
</div>
  </section>
</section>

<section id="conformance"><div class="header-wrapper"><h2 id="x2-conformance"><bdi class="secno">2. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 2."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST NOT</em>, and <em class="rfc2119">SHOULD</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
  <p>A conforming processor is a system which can generate
    the <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-3">canonical n-quads form</a> of an <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-1">input dataset</a>
    consistent with the algorithms defined in this specification.</p>

  <p>The algorithms in this specification are normative,
    because to consistently reproduce the same canonical identifiers,
    implementations <em class="rfc2119">MUST</em> strictly conform to the steps outlined in these algorithms.</p>

  <div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="3"><span>Note</span></div><p class="">Implementers can partially check their level of conformance with
    this specification by successfully passing the test cases of the
    <a href="https://w3c.github.io/rdf-canon/tests/">RDF Dataset Canonicalization test suite</a>.
    Note, however, that passing all the tests in the test
    suite does not imply complete conformance to this specification. It only implies
    that the implementation conforms to the aspects tested by the test suite.</p></div>
</section>

<section id="terminology" class="normative"><div class="header-wrapper"><h2 id="x3-terminology"><bdi class="secno">3. </bdi>Terminology</h2><a class="self-link" href="#terminology" aria-label="Permalink for Section 3."></a></div>
  

  <section id="canon-terms"><div class="header-wrapper"><h3 id="x3-1-terms-defined-by-this-specification"><bdi class="secno">3.1 </bdi>Terms defined by this specification</h3><a class="self-link" href="#canon-terms" aria-label="Permalink for Section 3.1"></a></div>
    
    <dl data-sort="ascending"><dt><dfn data-lt="canonical n-quads|canonical n-quads form" class="no-export" data-noexport="" id="dfn-canonical-n-quads" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">canonical n-quads form</dfn></dt>
      <dd>
        The canonicalized representation of a quad is defined in <a href="#canonical-quads" class="sectionRef sec-ref"><bdi class="secno">A. </bdi>A Canonical form of N-Quads</a>.
        A quad in <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-4">canonical n-quads form</a> represents a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-1">graph name</a>, if present, in the same manner as
        a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-1">subject</a>, and each quad is terminated with a single <code>LF</code> (line feed, code point <code class="codepoint">U+000A</code>).
      </dd>
      <dt><dfn class="export" data-export="" id="dfn-canonicalization-function" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">canonicalization function</dfn></dt>
      <dd>A <a href="#dfn-canonicalization-function" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-function-1">canonicalization function</a> maps <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-9">RDF datasets</a>
        into <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-dataset-isomorphism" id="ref-for-index-term-isomorphic-datasets-1">isomorphic datasets</a> [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].
        Two datasets produce the same canonical result if and only if they are <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-dataset-isomorphism" id="ref-for-index-term-isomorphic-datasets-2">isomorphic</a>.
        The <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-4"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> algorithm implements a <a href="#dfn-canonicalization-function" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-function-2">canonicalization function</a>.
        Some datasets may be constructed to prevent this algorithm from
        terminating in a reasonable amount of time (see <a href="#dataset-poisoning" class="sectionRef sec-ref"><bdi class="secno">7.1 </bdi>Dataset Poisoning</a>),
        in which case the algorithm can be considered to be
        a <dfn class="export" data-export="" id="dfn-partial-canonicalization-function" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">partial canonicalization function</dfn>.
        
      </dd><dt><dfn id="dfn-canonicalized-dataset" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">canonicalized dataset</dfn></dt>
      <dd>A <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-3">canonicalized dataset</a> is the combination of the following:
        <ul>
          <li>an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-10">RDF dataset</a> —
            the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-2">input dataset</a>,</li>
          <li>the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-1">input blank node identifier map</a> —
            mapping <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-5">blank nodes</a> in the input dataset to <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-5">blank node identifiers</a>, and</li>
          <li>the <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-2">issued identifiers map</a> from the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-1">canonical issuer</a> —
            mapping identifiers in the input dataset to canonical identifiers</li>
        </ul>
        A concrete serialization of a <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-4">canonicalized dataset</a> <em class="rfc2119">MUST</em> label
        all <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-6">blank nodes</a> using the canonical <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-6">blank node identifiers</a>.
      </dd>
      <dt><dfn data-plurals="gossip paths" id="dfn-gossip-path" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">gossip path</dfn></dt>
      <dd>A particular enumeration of every incident <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-1">mention</a> emanating
        from a blank node. This recursively includes transitively related
        <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-2">mentions</a> until any named node or blank node already labeled by
        a particular <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-1">identifier issuer</a> is reached. Gossip paths are
        encoded and operated on in the <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-5"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> algorithm as strings. (See
        <a href="#hash-nd-quads" class="sectionRef sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a> for more information
        on the construction of gossip paths.)
      </dd>
      <dt><dfn id="dfn-hash" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">hash</dfn></dt>
      <dd>The lowercase, hexadecimal representation of a message digest.</dd>
      <dt><dfn data-plurals="hash algorithms" id="dfn-hash-algorithm" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">hash algorithm</dfn></dt>
      <dd>The default hash algorithm used by <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-6"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>, namely, SHA-256 [<cite><a class="bibref" data-link-type="biblio" href="#bib-fips-180-4" title="FIPS PUB 180-4: Secure Hash Standard (SHS)">FIPS-180-4</a></cite>].
        <p>Implementations <em class="rfc2119">MUST</em> support a parameter to define the <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-2">hash algorithm</a>,
          <em class="rfc2119">MUST</em> support SHA-256 and SHA-384 [<cite><a class="bibref" data-link-type="biblio" href="#bib-fips-180-4" title="FIPS PUB 180-4: Secure Hash Standard (SHS)">FIPS-180-4</a></cite>],
          and <em class="rfc2119">SHOULD</em> support the ability to specify other hash algorithms.
          Using a different hash algorithm will generally result in different output than
          using the default.</p>

        <div class="note" role="note" id="issue-container-generatedID-5"><div role="heading" class="note-title marker" id="h-note-5" aria-level="4"><span>Note</span></div><p class="">There is no expectation that the default hash algorithm
          will also be used by any application creating a hash digest of the
          canonical N-Quads result.</p></div>
      </dd>
      <dt><dfn id="dfn-identifier-issuer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">identifier issuer</dfn></dt>
      <dd>An identifier issuer is used to issue new <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-7">blank node identifiers</a>. It
        maintains a
        <a href="#bn-issuer-state">blank node identifier issuer state</a>.</dd>
      <dt><dfn id="dfn-input-blank-node-identifier-map" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">input blank node identifier map</dfn></dt>
      <dd>Records any blank node identifiers already assigned to the
        <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-3">input dataset</a>.
        If the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-4">input dataset</a> is provided as an N-Quads document,
        the <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-index-term-map-1">map</a> relates blank nodes in the abstract <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-5">input dataset</a>
        to the blank node identifiers used within the N-Quads document,
        otherwise, identifiers are assigned arbitrarily for
        each blank node in the input dataset not previously identified.
        <div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="4"><span>Note</span></div><div class="">Implementations or environments might deal with blank
        node identifiers more directly; for example, some implementations might
        retain blank node identifiers in the parsed or abstract dataset. Implementations
        are expected to reuse these to enable usable mappings between input blank node
        identifiers and output blank node identifiers outside of the algorithm.</div></div>
      </dd>
      <dt><dfn data-lt="input dataset|input datasets" id="dfn-input-dataset" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">input dataset</dfn></dt>
      <dd>The abstract <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-11">RDF dataset</a> that is provided as input to
        the algorithm.</dd>
      <dt><dfn data-plurals="mentions" id="dfn-mention" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">mention</dfn></dt>
      <dd>
        A node is mentioned in a <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-1">quad</a>
        if it is a component of that quad,
        as a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-2">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="ref-for-index-term-predicate-1">predicate</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-1">object</a>, or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-2">graph name</a>.</dd>
      <dt><dfn data-plurals="mention sets" id="dfn-mention-set" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">mention set</dfn></dt>
      <dd>The set of all <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-2">quads</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-12">dataset</a>
        that <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-3">mention</a> a node <var>n</var> is called the <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-1">mention set</a> of <var>n</var>,
        denoted <var>Q<sub>n</sub></var>.</dd>
      <dt><dfn data-lt="quad|quads" class="no-export" data-noexport="" id="dfn-quad" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">quad</dfn></dt>
      <dd>A tuple composed of <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-3">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="ref-for-index-term-predicate-2">predicate</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-2">object</a>, and <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-3">graph name</a>.
        This is a generalization of an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple" id="ref-for-index-term-rdf-triple-1">RDF triple</a> along with a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-4">graph name</a>.
      </dd>
      </dl>
  </section>

  <section id="terms-reference"><div class="header-wrapper"><h3 id="x3-2-terms-defined-by-cited-specifications"><bdi class="secno">3.2 </bdi>Terms defined by cited specifications</h3><a class="self-link" href="#terms-reference" aria-label="Permalink for Section 3.2"></a></div>
    
    <dl data-sort="ascending"><dt><dfn data-plurals="blank nodes" id="dfn-blank-node" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-7">blank node</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-8">blank node</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>]. In short, it is a node in a graph that is
        neither an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri" id="ref-for-index-term-iris-2"><abbr title="Internationalized Resource Identifier">IRI</abbr></a>, nor a
        <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal" id="ref-for-index-term-literal-0-1">literal</a>.</dd>
      <dt><dfn data-plurals="blank node identifiers" id="dfn-blank-node-identifier" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-8">blank node identifier</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-9">blank node identifier</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>]. In short, it is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-1">string</a> that begins
        with <code>_:</code> that is used as an identifier for a
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-9">blank node</a>. <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-10">Blank node identifiers</a>
        are typically implementation-specific local identifiers; this document
        specifies an algorithm for deterministically specifying them.</dd>
      <dd>
        Concrete syntaxes, like [<cite><a class="bibref" data-link-type="biblio" href="#bib-turtle" title="RDF 1.1 Turtle">Turtle</a></cite>] or [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-Quads</a></cite>], prepend blank node identifiers with the <code>_:</code> string
        to differentiate them from other nodes in the graph. This affects the
        canonicalization algorithm, which is based on calculating a hash over the representations of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-3">quads</a> in this format.
      </dd>
      <dt><dfn id="dfn-default-graph" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph" id="ref-for-index-term-default-graph-1">default graph</a></dfn></dt>
      <dd>The <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph" id="ref-for-index-term-default-graph-2">default graph</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><dfn data-lt="graph name|graph names" id="dfn-graph-name" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-5">graph name</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-6">graph name</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><dfn data-lt="internationalized resource identifier|iri|iris" id="dfn-internationalized-resource-identifier" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri" id="ref-for-index-term-iris-3"><abbr title="Internationalized Resource Identifier">IRI</abbr></a></dfn></dt>
      <dd>An <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri" id="ref-for-index-term-iris-4"><abbr title="Internationalized Resource Identifier">IRI</abbr></a> (Internationalized Resource Identifier) is a string that conforms to the syntax
        defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc3987" title="Internationalized Resource Identifiers (IRIs)">RFC3987</a></cite>].</dd>
      <dt><dfn data-lt="object|objects" id="dfn-object" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-3">object</a></dfn></dt>
      <dd>An <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-4">object</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><dfn data-lt="predicate|predicates" id="dfn-predicate" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="ref-for-index-term-predicate-3">predicate</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="ref-for-index-term-predicate-4">predicate</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><dfn data-lt="rdf dataset|rdf datasets|dataset|datasets" id="dfn-rdf-dataset" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-13">RDF dataset</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-14">dataset</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].
        For the purposes of this specification, an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-15">RDF dataset</a>
        is considered to be a set of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-4">quads</a></dd>
      <dt><dfn data-lt="rdf graph|rdf graphs|graph|graphs" id="dfn-rdf-graph" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph" id="ref-for-index-term-rdf-graph-1">RDF graph</a></dfn></dt>
      <dd>An <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph" id="ref-for-index-term-rdf-graph-2">RDF graph</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><dfn data-lt="rdf triple|rdf triples|triple|triples" id="dfn-rdf-triple" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple" id="ref-for-index-term-rdf-triple-2">RDF triple</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple" id="ref-for-index-term-rdf-triple-3">triple</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><dfn data-plurals="strings" id="dfn-string" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-2">string</a></dfn></dt><dd>
        A string is a sequence of zero or more Unicode characters.</dd>
      <dt><dfn data-lt="subject|subjects" id="dfn-subject" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-4">subject</a></dfn></dt>
      <dd>A <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-5">subject</a>
        as specified by [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>].</dd>
      <dt><code>true</code> and <code>false</code></dt><dd>
        Values that are used to express one of two possible <a href="https://infra.spec.whatwg.org/#boolean" id="ref-for-index-term-boolean-type-1">boolean</a> states.</dd>
      <dt><dfn data-lt="code point order|code point ordered|unicode codepoint collation" id="dfn-code-point-order" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-1">Unicode code point order</a></dfn></dt>
      <dd>This refers to determining the order of two Unicode strings (<code>A</code> and <code>B</code>),
        using <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-2">Unicode Codepoint Collation</a>,
        as defined in [<cite><a class="bibref" data-link-type="biblio" href="#bib-xpath-functions" title="XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)">XPATH-FUNCTIONS</a></cite>],
        which defines a
        <a href="https://en.wikipedia.org/wiki/Total_order">total ordering</a>
        of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-3">strings</a> comparing code points.
        Note that for UTF-8 encoded strings, comparing the byte sequences gives the same result as <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-3">code point order</a>.
      </dd></dl>
  </section>
</section>

<section id="canonicalization"><div class="header-wrapper"><h2 id="x4-canonicalization"><bdi class="secno">4. </bdi>Canonicalization</h2><a class="self-link" href="#canonicalization" aria-label="Permalink for Section 4."></a></div>
  

  <p>Canonicalization is the process of transforming an
    <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-6">input dataset</a> to its <a href="#dfn-serialized-canonical-form" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-serialized-canonical-form-1">serialized canonical form</a>.
    That is, any two <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-7">input datasets</a> that contain the same information,
    regardless of their arrangement,
    will be transformed into the same <a href="#dfn-serialized-canonical-form" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-serialized-canonical-form-2">serialized canonical form</a>.
    The problem requires directed
    graphs to be deterministically ordered into sets of nodes and edges. This
    is easy to do when all of the nodes have globally-unique identifiers, but
    can be difficult to do when some of the nodes do not. Any nodes without
    globally-unique identifiers must be issued deterministic identifiers.</p>

  <div class="note" role="note" id="issue-container-generatedID-6"><div role="heading" class="note-title marker" id="h-note-6" aria-level="3"><span>Note</span></div><p class="">
    This specification defines a <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-5">canonicalized dataset</a> to include stable identifiers for blank nodes,
    practical uses of which will always generate a canonical serialization of such a dataset.</p></div>

  <p>In time, there may be more than one canonicalization algorithm and,
    therefore, for identification purposes, this algorithm is named the
    "RDF Canonicalization algorithm version 1.0"
    (<abbr title="RDF Canonicalization algorithm version 1.0"><dfn class="export" data-export="" id="dfn-rdfc-1-0" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></dfn></abbr>).</p>

  <p><a href="#fig-ca-overview" class="fig-ref" title="An illustrated overview of the RDFC-1.0 algorithm. Image available in SVG .">Figure <bdi class="">1</bdi></a> provides an overview of <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-7"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>,
    with steps 1 through 7 corresponding to the various steps described in
    <a href="#canon-algo-algo" class="sec-ref"><bdi class="secno">4.4.3 </bdi>Algorithm</a>.</p>

  <figure id="fig-ca-overview" style="text-align:center">
    
    <object data="ca-overview.svg" style="width: 100%" type="image/svg+xml" aria-describedby="fig-ca-overview-alt">
      <p id="fig-ca-overview-alt">
        The image represents an overview of the <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-8"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> algorithm.
        The Input Document is deserialized into the Input Dataset
        and Input Blank Node Identifier Map.
        Canonicalization steps 1-6 are executed resulting in
        the Canonicalized Dataset including the
        Input Blank Node Identifier Map and Issued Identifiers Map.
        Step 7 of the Canonicalization algorithm creates
        the canonical n-quads form of the Canonicalized Dataset.</p>
     </object>
     <figcaption><a class="self-link" href="#fig-ca-overview">Figure <bdi class="figno">1</bdi></a> <span class="fig-title">An illustrated overview of the <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-9"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> algorithm.<br>
       Image available in
       <a href="ca-overview.svg" title="SVG image of overview">
         <abbr title="Scalable Vector Graphics">SVG</abbr>
       </a>.</span></figcaption>
  </figure>

  <section id="canon-overview" class="informative"><div class="header-wrapper"><h3 id="x4-1-overview"><bdi class="secno">4.1 </bdi>Overview</h3><a class="self-link" href="#canon-overview" aria-label="Permalink for Section 4.1"></a></div><p><em>This section is non-normative.</em></p>
    

    <p>To determine a canonical labeling, <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-10"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> considers the
      information connected to each blank node.
      Nodes with unique first degree information can immediately be issued a canonical identifier
      via the <a href="#issue-identifier">Issue Identifier algorithm</a>.
      When a node has non-unique first degree information,
      it is necessary to determine all information that is transitively connected
      to it throughout the entire dataset.
      <a href="#hash-1d-quads" class="sectionRef sec-ref"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a> defines a
      node’s first degree information via its first degree hash. </p>

    <p>Hashes are computed from the information of each blank node.
      These hashes encode the <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-4">mentions</a> incident to each blank node.
      The <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-1">hash</a> of a string <var>s</var>, is the lower-case,
      hexadecimal representation of the result of passing <var>s</var>
      through a cryptographic hash function.
      By default, <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-11"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> uses the SHA-256 hash algorithm [<cite><a class="bibref" data-link-type="biblio" href="#bib-fips-180-4" title="FIPS PUB 180-4: Secure Hash Standard (SHS)">FIPS-180-4</a></cite>].</p>

    <div class="note" role="note" id="issue-container-generatedID-7"><div role="heading" class="note-title marker" id="h-note-7" aria-level="4"><span>Note</span></div><p class="">The "degree" terminology is used within this specification
      as colloquial way of describing
      the <a href="https://en.wikipedia.org/wiki/Distance_(graph_theory)#Related_concepts">eccentricity</a> or
      <a href="https://en.wikipedia.org/wiki/Distance_(graph_theory)#Related_concepts">radius</a>
      of any two nodes within a dataset.
      This concept is also related to "degrees of separation",
      as in, for example, "<a href="https://en.wikipedia.org/wiki/Six_degrees_of_separation">six degrees of separation</a>".
      Nodes with unique first degree information can be considered nodes with a radius of one.</p></div>
  </section>

  <section id="canon-state"><div class="header-wrapper"><h3 id="x4-2-canonicalization-state"><bdi class="secno">4.2 </bdi>Canonicalization State</h3><a class="self-link" href="#canon-state" aria-label="Permalink for Section 4.2"></a></div>
    

    <p>When performing the steps required by the canonicalization algorithm,
      it is helpful to track state in a data structure called the
      <dfn id="dfn-canonicalization-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">canonicalization state</dfn>. The information contained in the
      <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-1">canonicalization state</a> is described below.</p>

    <dl>
      <dt><dfn id="dfn-blank-node-to-quads-map" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">blank node to quads map</dfn></dt>
      <dd>A <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-index-term-map-2">map</a> that relates a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-11">blank node identifier</a> to
        the <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-5">quads</a> in which they appear in the
        <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-8">input dataset</a>.</dd>
      <dt><dfn id="dfn-hash-to-blank-nodes-map" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">hash to blank nodes map</dfn></dt>
      <dd>A <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-index-term-map-3">map</a> that relates a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-2">hash</a> to a
        <a data-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-index-term-list-1">list</a> of
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-12">blank node identifiers</a>.</dd>
      <dt><dfn id="dfn-canonical-issuer" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">canonical issuer</dfn></dt>
      <dd>An <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-2">identifier issuer</a>, initialized with the
        prefix <code>c14n</code> (short for canonicalization), for issuing canonical
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-13">blank node identifiers</a>.
        <div class="note" role="note" id="issue-container-generatedID-8"><div role="heading" class="note-title marker" id="h-note-8" aria-level="4"><span>Note</span></div><div class="">
          Mapping all <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-10">blank nodes</a> to use this
          identifier spec means that an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-16">RDF dataset</a> composed of two
          different <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph" id="ref-for-index-term-rdf-graph-3">RDF graphs</a> will issue different
          identifiers than that for the graphs taken independently. This may
          happen anyway, due to <a href="https://en.wikipedia.org/wiki/Automorphism">automorphisms</a>,
          or overlapping statements, but an identifier based on the resulting
          <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-3">hash</a> along with an issue sequence number specific to that <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-4">hash</a> would
          stand a better chance of surviving such minor changes, and allow the
          resulting information to be useful for <a href="https://www.w3.org/2001/sw/wiki/How_to_diff_RDF">RDF Diff</a>.
        </div></div>
      </dd>
    </dl>
  </section>

  <section id="bn-issuer-state"><div class="header-wrapper"><h3 id="x4-3-blank-node-identifier-issuer-state"><bdi class="secno">4.3 </bdi>Blank Node Identifier Issuer State</h3><a class="self-link" href="#bn-issuer-state" aria-label="Permalink for Section 4.3"></a></div>
    

    <p>The canonicalization algorithm issues identifiers to <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-11">blank nodes</a>.
      The <a href="#issue-identifier">Issue Identifier algorithm</a> uses an
      <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-3">identifier issuer</a> to accomplish this task.
      The information an <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-4">identifier issuer</a> needs to keep track of is described
      below.</p>

    <dl>
      <dt><dfn id="dfn-identifier-prefix" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">identifier prefix</dfn></dt>
      <dd>The identifier prefix is a string that is used at the beginning of an
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-14">blank node identifier</a>. It should be initialized to a
        string that is specified by the canonicalization algorithm. When
        generating a new <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-15">blank node identifier</a>, the prefix
        is concatenated with a <a href="#dfn-identifier-counter" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-counter-1">identifier counter</a>. For example,
        <code>c14n</code> is a proper initial value for the
        <a href="#dfn-identifier-prefix" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-prefix-1">identifier prefix</a> that would produce
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-16">blank node identifiers</a> like <code>c14n1</code>.</dd>
      <dt><dfn id="dfn-identifier-counter" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">identifier counter</dfn></dt>
      <dd>A counter that is appended to the <a href="#dfn-identifier-prefix" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-prefix-2">identifier prefix</a> to
        create an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-17">blank node identifier</a>. It is initialized to
        <code>0</code>.</dd>
      <dt><dfn id="dfn-issued-identifiers-map" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">issued identifiers map</dfn></dt>
      <dd>An <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-index-term-map-4">ordered map</a> that relates <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-18">blank node identifiers</a> to issued identifiers,
        to prevent issuance of more than one new identifier per existing identifier,
        and to allow <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-12">blank nodes</a> to
        be assigned identifiers some time after issuance.</dd>
    </dl>
  </section>

  <section id="canon-algorithm" class="algorithm"><div class="header-wrapper"><h3 id="x4-4-canonicalization-algorithm"><bdi class="secno">4.4 </bdi>Canonicalization Algorithm</h3><a class="self-link" href="#canon-algorithm" aria-label="Permalink for Section 4.4"></a></div>
    

    <p>The canonicalization algorithm converts an <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-9">input dataset</a>
      into a <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-6">canonicalized dataset</a>. This algorithm will assign
      deterministic identifiers to any <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-13">blank nodes</a> in the
      <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-10">input dataset</a>.</p>

    <section id="canon-algo-overview" class="informative"><div class="header-wrapper"><h4 id="x4-4-1-overview"><bdi class="secno">4.4.1 </bdi>Overview</h4><a class="self-link" href="#canon-algo-overview" aria-label="Permalink for Section 4.4.1"></a></div><p><em>This section is non-normative.</em></p>
      

      <p><a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-12"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> canonically labels an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-17">RDF dataset</a>
        by assigning each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-14">blank node</a> a canonical identifier.
        In <abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr>, an RDF dataset <var>D</var>
        is represented as a set of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-6">quads</a> of the form <code>&lt; s, p, o, g &gt;</code>
        where the graph component <code>g</code> is empty if and only if the
        <a data-lt="RDF triple" data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple" id="ref-for-index-term-rdf-triple-4">triple</a> <code>&lt; s, p, o &gt;</code> is in the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph" id="ref-for-index-term-default-graph-3">default graph</a>.
        It is expected that, for two RDF datasets,
        <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-13"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> returns the same canonically labeled list of quads
        if and only if the two datasets are isomorphic (i.e., the same modulo blank node identifiers).
      </p>

      <p><a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-14"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a> consists of several sub-algorithms.
        These sub-algorithms are introduced in the following sub-sections.
        First, we give a high level summary of <abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr>.</p>

      <ol>
        <li id="ca-hl.1"><strong>Initialization</strong>.
          Initialize the state needed for the rest of the algorithm
          using <a href="#canon-state" class="sectionRef sec-ref"><bdi class="secno">4.2 </bdi>Canonicalization State</a>.
          Also initialize the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-7">canonicalized dataset</a> using the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-11">input dataset</a>
          (which remains immutable)
          the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-2">input blank node identifier map</a>
          (retaining blank node identifiers from the input if possible, otherwise assigning them arbitrarily);
          the <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-3">issued identifiers map</a> from the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-2">canonical issuer</a> is added upon completion of the algorithm.</li>
        <li id="ca-hl.2"><strong>Compute first degree hashes</strong>.
          Compute the first degree hash for each blank node in the dataset using <a href="#hash-1d-quads" class="sectionRef sec-ref"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a>.</li>
        <li id="ca-hl.3"><strong>Canonically label unique nodes</strong>.
          Assign canonical identifiers via <a href="#issue-identifier" class="sectionRef sec-ref"><bdi class="secno">4.5 </bdi>Issue Identifier Algorithm</a>,
          in <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-4">Unicode code point order</a>, to each blank node whose first degree hash is unique.</li>
        <li id="ca-hl.4"><strong>Compute N-degree hashes for non-unique nodes</strong>.
          For each repeated first degree hash (proceeding in <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-5">Unicode code point order</a>),
          compute the N-degree hash via <a href="#hash-nd-quads" class="sectionRef sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a>
          of every unlabeled blank node that corresponds to the given repeated hash.</li>
        <li id="ca-hl.5"><strong>Canonically label remaining nodes</strong>.
          In <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-6">Unicode code point order</a> of the N-degree hashes,
          issue canonical identifiers to each corresponding blank node using
          <a href="#issue-identifier" class="sectionRef sec-ref"><bdi class="secno">4.5 </bdi>Issue Identifier Algorithm</a>.
          If more than one node produces the same N-degree hash,
          the order in which these nodes receive a canonical identifier does not matter.</li>
        <li id="ca-hl.6"><strong>Finish</strong>.
          Return the <a href="#dfn-serialized-canonical-form" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-serialized-canonical-form-3">serialized canonical form</a> of the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-8">canonicalized dataset</a>.
          Alternatively, return the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-9">canonicalized dataset</a> containing
          the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-3">input blank node identifier map</a> and <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-4">issued identifiers map</a>.</li>
      </ol>
    </section>

    <section id="canon-algo-examples" class="informative"><div class="header-wrapper"><h4 id="x4-4-2-examples"><bdi class="secno">4.4.2 </bdi>Examples</h4><a class="self-link" href="#canon-algo-examples" aria-label="Permalink for Section 4.4.2"></a></div><p><em>This section is non-normative.</em></p>
      

      <aside id="ex-ca-unique-hashes" class="example"><div class="marker">
    <a class="self-link" href="#ex-ca-unique-hashes">Example<bdi> 2</bdi></a><span class="example-title">: Unique hashes</span>
  </div>
        <p>This example illustrates the <a href="#canon-algo-algo">Canonicalization Algorithm</a>
          where all blank nodes have unique first-degree hashes.</p>

        <figure id="fig-ca-unique-hashes" style="text-align:center">
          
          <object data="unique-hashes.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-ca-unique-hashes-alt">
            <p id="fig-ca-unique-hashes-alt">
              The image represents the graph described in
              <a href="#ex-ca-unique-hashes-input">
                the following code block
              </a>.</p>
          </object>
          <figcaption><a class="self-link" href="#fig-ca-unique-hashes">Figure <bdi class="figno">2</bdi></a> <span class="fig-title">An illustration of a graph resulting in unique hashes.<br>
            Image available in
            <a href="unique-hashes.svg" title="SVG image of unique hashes">
              <abbr title="Scalable Vector Graphics">SVG</abbr>
            </a>.</span></figcaption>
        </figure>

        <pre id="ex-ca-unique-hashes-input" title="Graph with blank nodes resulting in unique hashes" aria-busy="false"><code class="hljs">:p :q _:e0 .
:p :r _:e1 .
_:e0 :s :u .
_:e1 :t :u .</code></pre>

        <p><a href="#ca.2">Step 2</a> is called twice, with each blank node (<code><em>e0</em></code> and <code><em>e1</em></code>)
          in the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-12">input dataset</a>
          to populate <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-1">blank node to quads map</a>:</p>

        <table id="ex-ca-unique-bn-quads-map" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-unique-bn-quads-map">Table <bdi class="tableno">1</bdi></a> <span class="table-title">Blank node to quads map for unique hashes</span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>Q</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code><em>e0</em></code></td>
              <td><code>:p :q <em>e0</em> .</code><br><code><em>e0</em> :s :u .</code></td>
            </tr>
            <tr>
              <td><code><em>e1</em></code></td>
              <td><code>:p :r <em>e1</em> .</code><br><code><em>e1</em> :t :u .</code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.3">Step 3</a> generates the first-degree
          hash for each blank node, which is explored further
          in <a href="#ex-1d-unique-hashes" class="box-ref">Example<bdi> 4</bdi></a>:</p>

        <table id="ex-ca-unique-1d-hashes" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-unique-1d-hashes">Table <bdi class="tableno">2</bdi></a> <span class="table-title">Hash to blank nodes map for unique hashes</span></caption>
          <thead><tr>
            <th><var>hash</var></th>
            <th><var>blank node(s)</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code>21d1dd5ba21f3dee9d76c0c00c260fa6f5d5d65315099e553026f4828d0dc77a</code></td>
              <td><code><em>e0</em></code></td>
            </tr>
            <tr>
              <td><code>6fa0b9bdb376852b5743ff39ca4cbf7ea14d34966b2828478fbf222e7c764473</code></td>
              <td><code><em>e1</em></code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.4">Step 4</a> creates canonical identifiers for each
          blank node which has a unique hash:</p>

        <table id="ex-ca-unique-1d-identifiers" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-unique-1d-identifiers">Table <bdi class="tableno">3</bdi></a> <span class="table-title">Canonical identifiers for blank nodes with unique hashes</span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>canonical identifier</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code><em>e0</em></code></td>
              <td><code><em>c14n0</em></code></td>
            </tr>
            <tr>
              <td><code><em>e1</em></code></td>
              <td><code><em>c14n1</em></code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.5">Step 5</a> has no effect,
          as there are no remaining blank nodes without canonical identifiers.</p>

        <p><a href="#ca.6">Step 6</a> generates
          the canonicalized dataset by mapping blank node identifiers in the input dataset
          with canonical identifiers:</p>

        <pre id="ex-ca-unique-canonicalized-dataset" aria-busy="false"><code class="hljs">:p :q _:c14n0 .
:p :r _:c14n1 .
_:c14n0 :s :u .
_:c14n1 :t :u .</code></pre>
      </aside>

      <aside id="ex-ca-shared-hashes" class="example"><div class="marker">
    <a class="self-link" href="#ex-ca-shared-hashes">Example<bdi> 3</bdi></a><span class="example-title">: Shared hashes</span>
  </div>
        <p>This example illustrates the <a href="#canon-algo-algo">Canonicalization Algorithm</a>
          where hashing the statements <a data-lt="mention" href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-5">mentioning</a>
          those blank nodes have overlapping results.</p>

        <figure id="fig-ca-shared-hashes" style="text-align:center">
          
          <object data="shared-hashes.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-ca-shared-hashes-alt">
            <p id="fig-ca-shared-hashes-alt">
              The image represents the graph described in
              <a href="#ex-ca-shared-hashes-input">
                the following code block
              </a>.</p>
          </object>
          <figcaption><a class="self-link" href="#fig-ca-shared-hashes">Figure <bdi class="figno">3</bdi></a> <span class="fig-title">An illustration of a graph resulting in shared hashes.<br>
            Image available in
            <a href="shared-hashes.svg" title="SVG image of shared hashes">
              <abbr title="Scalable Vector Graphics">SVG</abbr>
            </a>.</span></figcaption>
        </figure>

        <pre id="ex-ca-shared-hashes-input" title="Graph with blank nodes resulting in shared hashes" aria-busy="false"><code class="hljs">:p :q _:e0 .
:p :q _:e1 .
_:e0 :p _:e2 .
_:e1 :p _:e3 .
_:e2 :r _:e3 .</code></pre>

        <p><a href="#ca.2">Step 2</a> is called four times, with each blank node
          (<code><em>e0</em></code>, <code><em>e1</em></code>, <code><em>e2</em></code>, and <code><em>e3</em></code>)
          to populate <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-2">blank node to quads map</a>:</p>

        <table id="ex-ca-shared-bn-quads-map" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-shared-bn-quads-map">Table <bdi class="tableno">4</bdi></a> <span class="table-title">Blank node to quads map for shared hashes</span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>Q</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code><em>e0</em></code></td>
              <td><code>:p :q <em>e0</em> .</code><br><code><em>e0</em> :p <em>e2</em> .</code></td>
            </tr>
            <tr>
              <td><code><em>e1</em></code></td>
              <td><code>:p :q <em>e1</em> .</code><br><code><em>e1</em> :p <em>e3</em> .</code></td>
            </tr>
            <tr>
              <td><code><em>e2</em></code></td>
              <td><code><em>e0</em> :p <em>e2</em> .</code><br><code><em>e2</em> :r <em>e3</em> .</code></td>
            </tr>
            <tr>
              <td><code><em>e3</em></code></td>
              <td><code><em>e1</em> :p <em>e3</em> .</code><br><code><em>e2</em> :r <em>e3</em> .</code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.3">Step 3</a> generates the first-degree
          hash for each blank node, which is explored further
          in <a href="#ex-1d-shared-hashes" class="box-ref">Example<bdi> 5</bdi></a>
          (note that the hashes for <code><em>e0</em></code> and <code><em>e1</em></code> are shared):</p>

        <table id="ex-ca-shared-1d-hash-to-bn" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-shared-1d-hash-to-bn">Table <bdi class="tableno">5</bdi></a> <span class="table-title">Hash to blank nodes map shared hashes</span></caption>
          <thead><tr>
            <th><var>hash</var></th>
            <th><var>blank node(s)</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code>3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36</code></td>
              <td><code><em>e0</em></code>, <code><em>e1</em></code></td>
            </tr>
            <tr>
              <td><code>15973d39de079913dac841ac4fa8c4781c0febfba5e83e5c6e250869587f8659</code></td>
              <td><code><em>e2</em></code></td>
            </tr>
            <tr>
              <td><code>7e790a99273eed1dc57e43205d37ce232252c85b26ca4a6ff74ff3b5aea7bccd</code></td>
              <td><code><em>e3</em></code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.4">Step 4</a> creates canonical identifiers for each
          blank node which has a unique hash:</p>

        <table id="ex-ca-shared-canon-ids" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-shared-canon-ids">Table <bdi class="tableno">6</bdi></a> <span class="table-title">Canonical identifiers for blank nodes with shared hashes</span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>canonical identifier</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code><em>e2</em></code></td>
              <td><code><em>c14n0</em></code></td>
            </tr>
            <tr>
              <td><code><em>e3</em></code></td>
              <td><code><em>c14n1</em></code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.5">Step 5</a> is run on <code><em>e0</em></code> and <code><em>e1</em></code>, separately,
          which share the same hash,
          and use separate instances of a <var>temporary issuer</var>,
          (as explored in <a href="#ex-nd-shared-hashes" class="box-ref">Example<bdi> 7</bdi></a>)
          to create the <var>hash path list</var>
          composed of the hash result
          and temporary identifier mappings from
          <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>
          for each of these blank nodes:</p>

        <table id="ex-ca-shared-result-e0" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-shared-result-e0">Table <bdi class="tableno">7</bdi></a> <span class="table-title">Result for <code><em>e0</em></code></span></caption>
          <tbody>
            <tr>
              <td><var>temporary issuer</var> mappings</td>
              <td>
                <table class="hash-related">
                  <thead><tr>
                    <th><var>original identifier</var></th>
                    <th><var>temporary identifier</var></th>
                  </tr></thead>
                  <tbody>
                    <tr><td><code><em>e0</em></code></td><td><code><em>b0</em></code></td></tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td><var>hash</var></td>
              <td><code>fbc300de5afafd97a4b9ee1e72b57754dcdcb7ebb724789ac6a94a5b82a48d30</code></td>
            </tr>
          </tbody>
        </table>

        <table id="ex-ca-shared-result-e1" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-shared-result-e1">Table <bdi class="tableno">8</bdi></a> <span class="table-title">Result for <code><em>e1</em></code></span></caption>
          <tbody>
            <tr>
              <td><var>temporary issuer</var> mappings</td>
              <td>
                <table class="hash-related">
                  <thead><tr>
                    <th><var>original identifier</var></th>
                    <th><var>temporary identifier</var></th>
                  </tr></thead>
                  <tbody>
                    <tr><td><code><em>e1</em></code></td><td><code><em>b0</em></code></td></tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td><var>hash</var></td>
              <td><code>2c0b377baf86f6c18fed4b0df6741290066e73c932861749b172d1e5560f5045</code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#ca.5.3">Step 5.3</a> creates
          the canonical identifiers for the temporary identifiers
          established in the previous step
          running in order of the <var>hash</var> component from each result.
          This updates the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-3">canonical issuer</a> with the following
          mappings:</p>

        <table id="ex-ca-shared-canon-identifiers" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-ca-shared-canon-identifiers">Table <bdi class="tableno">9</bdi></a> <span class="table-title">Blank node to canonical identifiers</span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>canonical identifier</var></th>
          </tr></thead>
          <tbody>
            <tr><td><code><em>e0</em></code></td><td><code><em>c14n3</em></code></td></tr>
            <tr><td><code><em>e1</em></code></td><td><code><em>c14n2</em></code></td></tr>
            <tr><td><code><em>e2</em></code></td><td><code><em>c14n0</em></code></td></tr>
            <tr><td><code><em>e3</em></code></td><td><code><em>c14n1</em></code></td></tr>
          </tbody>
        </table>

        <p><a href="#ca.6">Step 6</a> updates
          the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-10">canonicalized dataset</a>
          with the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-4">canonical issuer</a>,
          containing an <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-5">issued identifiers map</a>
          mapping blank node identifiers from the input dataset
          to their canonical identifiers:</p>

        <pre id="ex-ca-canonicalized-shared-dataset" aria-busy="false"><code class="hljs">:p :q _:c14n2 .
:p :q _:c14n3 .
_:c14n0 :r _:c14n1 .
_:c14n2 :p _:c14n1 .
_:c14n3 :p _:c14n0 .</code></pre>
      </aside>
    </section>

    <section id="canon-algo-algo"><div class="header-wrapper"><h4 id="x4-4-3-algorithm"><bdi class="secno">4.4.3 </bdi>Algorithm</h4><a class="self-link" href="#canon-algo-algo" aria-label="Permalink for Section 4.4.3"></a></div>
      

      <p>The following algorithm will run with a minimal number of iterations in each step
        for typical <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-13">input datasets</a>.
        In some extreme cases, the algorithm can behave poorly, particularly in <a href="#ca.5">Step 5</a>.
        Implementations <em class="rfc2119">MUST</em> prevent against potential denial-of-service attacks.
        See <a href="#dataset-poisoning" class="sec-ref"><bdi class="secno">7.1 </bdi>Dataset Poisoning</a> for further information.</p>

      <div class="note" role="note" id="issue-container-generatedID-9"><div role="heading" class="note-title marker" id="h-note-9" aria-level="5"><span>Note</span></div><p class="">Implementations can consider placing limits on the number of
        calls to <a href="#hash-nd-quads" class="sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a> based on the number
        of blank nodes in the <a href="#dfn-hash-to-blank-nodes-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-to-blank-nodes-map-1">hash to blank nodes map</a>.
        For most typical datasets, more than a couple
        of iterations on <a href="#hash-nd-quads" class="sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a> per blank node would be unusual.</p></div>

      <ol id="ca">
        <li id="ca.1">Create the <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-2">canonicalization state</a>.
          If the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-14">input dataset</a> is an N-Quads document,
          parse that document into a dataset in the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-11">canonicalized dataset</a>,
          retaining any blank node identifiers used within that document
          in the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-4">input blank node identifier map</a>;
          otherwise arbitrary identifiers are assigned for each
          blank node.
          <details>
            <summary>Explanation</summary>
            <p>This has the effect of initializing the
              <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-3">blank node to quads map</a>,
              and the <a href="#dfn-hash-to-blank-nodes-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-to-blank-nodes-map-2">hash to blank nodes map</a>,
              as well as instantiating a new <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-5">canonical issuer</a>.</p>
            <p>After this algorithm completes,
              the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-5">input blank node identifier map</a> state
              and <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-6">canonical issuer</a> may be used to
              correlate blank nodes used in the
              <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-15">input dataset</a> with both their original identifiers,
              and associated canonical identifiers.</p>
          </details>
        </li>
        <li id="ca.2">For every <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-7">quad</a> <var>Q</var> in <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-16">input dataset</a>:
          <ol>
            <li id="ca.2.1">For each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-15">blank node</a> that is a component of <var>Q</var>,
              add a reference to <var>Q</var> from the
              <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-1">map entry</a> for the
              <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-19">blank node identifier</a> <var>identifier</var>
              in the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-4">blank node to quads map</a>,
              creating a new entry if necessary,
              using the identifier for the blank node found in the
              <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-6">input blank node identifier map</a>.
              <details>
                <summary>Explanation</summary>
                <p>This establishes the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-5">blank node to quads map</a>,
                  relating each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-16">blank node</a> with the set of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-8">quads</a>
                  of which it is a component,
                  via the map for each blank node in the input dataset to its assigned identifier.</p>
                <div class="note" role="note" id="issue-container-generatedID-10"><div role="heading" class="note-title marker" id="h-note-10" aria-level="5"><span>Note</span></div><p class="">
                  <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal" id="ref-for-index-term-literal-0-2">Literal</a> components of
                  <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-9">quads</a> are not subject to any normalization.
                  As noted in
                  <a href="https://www.w3.org/TR/rdf11-concepts/#section-Graph-Literal" id="ref-for-index-term-section-3-3-1">Section 3.3</a>
                  of [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts" title="RDF 1.1 Concepts and Abstract Syntax">RDF11-CONCEPTS</a></cite>],
                  <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-term-equality" id="ref-for-index-term-literal-term-equality-1">literal term equality</a>
                  is based on the
                  <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form" id="ref-for-index-term-lexical-form-1">lexical form</a>,
                  rather than the <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-value" id="ref-for-index-term-literal-value-1">literal value</a>,
                  so two literals <code>"01"^^xsd:integer</code> and <code>"1"^^xsd:integer</code> are treated as distinct resources.
                </p></div>
              </details>
            </li>
          </ol>
          <details>
            <summary>Logging</summary>
            <p>Log the state of the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-6">blank node to quads map</a>:</p>
            <pre class="logging yaml nohighlight"># Blank node to quads map for unique hashes example
ca:
  log point: Entering the canonicalization function (4.4.3).
  ca.2:
    log point: Extract quads for each bnode (4.4.3 (2)).
    Bnode to quads:
      e0:
        - &lt;http://example.com/#p&gt; &lt;http://example.com/#q&gt; _:e0 .
        - _:e0 &lt;http://example.com/#s&gt; &lt;http://example.com/#u&gt; .
      e1:
        - &lt;http://example.com/#p&gt; &lt;http://example.com/#r&gt; _:e1 .
        - _:e1 &lt;http://example.com/#t&gt; &lt;http://example.com/#u&gt; .
  <span class="comment">...</span></pre>
          </details>
        </li>
        <li id="ca.3">For each <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-index-term-key-for-map-1">key</a> <var>n</var>
          in the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-7">blank node to quads map</a>:
          <details>
            <summary>Explanation</summary>
            <p>This step creates a hash for every blank node in the input document.
              Some blank nodes will lead to a unique hash,
              while other blank nodes may share a common hash.</p>
          </details>
          <ol>
            <li id="ca.3.1">Create a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-5">hash</a>, <var>h<sub>f</sub>(n)</var>,
              for <var>n</var> according to the
              <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a>.</li>
            <li id="ca.3.2">Append <var>n</var> to the value associated to <var>h<sub>f</sub>(n)</var> in
              <a href="#dfn-hash-to-blank-nodes-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-to-blank-nodes-map-3">hash to blank nodes map</a>,
              creating a new entry if necessary.</li>
          </ol>
          <details>
            <summary>Logging</summary>
            <p>Log the results from the <a href="#hash-1d-quads-algorithm">Hash First Degree Quads algorithm</a>.</p>
            <pre class="logging yaml nohighlight"># First degree hashes for unique hashes example
ca:
  <span class="comment">...</span>
  ca.3:
    log point: Calculated first degree hashes (4.4.3 (3)).
    with:
      - identifier: e0
        h1dq:
          log point: Hash First Degree Quads function (4.6.3).
          nquads:
            - &lt;http://example.com/#p&gt; &lt;http://example.com/#q&gt; _:a .
            - _:a &lt;http://example.com/#s&gt; &lt;http://example.com/#u&gt; .
          hash: 21d1dd5ba21f3dee9d76c0c00c260fa6f5d5d65315099e553026f4828d0dc77a
      - identifier: e1
        h1dq:
          log point: Hash First Degree Quads function (4.6.3).
          nquads:
            - &lt;http://example.com/#p&gt; &lt;http://example.com/#r&gt; _:a .
            - _:a &lt;http://example.com/#t&gt; &lt;http://example.com/#u&gt; .
          hash: 6fa0b9bdb376852b5743ff39ca4cbf7ea14d34966b2828478fbf222e7c764473
  <span class="comment">...</span></pre>
          </details>
        </li>
        <li id="ca.4">For each <var>hash</var> to <var>identifier list</var>
          <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-2">map entry</a> in
          <a href="#dfn-hash-to-blank-nodes-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-to-blank-nodes-map-4">hash to blank nodes map</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-7">code point ordered</a> by <var>hash</var>:
          <details>
            <summary>Explanation</summary>
            <p>This step establishes the canonical identifier for blank nodes having
              a unique hash, which are recorded in the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-7">canonical issuer</a>.</p>
          </details>
          <ol>
            <li id="ca.4.1">If <var>identifier list</var> has more than one entry,
              continue to the next mapping.</li>
            <li id="ca.4.2">Use the
              <a href="#issue-identifier">Issue Identifier algorithm</a>,
              passing <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-8">canonical issuer</a> and the
              single <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-20">blank node identifier</a>, <var>identifier</var> in
              <var>identifier list</var> to issue a
              canonical replacement identifier for <var>identifier</var>.</li>
            <li id="ca.4.3">Remove the <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-3">map entry</a> for <var>hash</var> from the
              <a href="#dfn-hash-to-blank-nodes-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-to-blank-nodes-map-5">hash to blank nodes map</a>.</li>
          </ol>
          <details>
            <summary>Logging</summary>
            <p>Log the assigned canonical identifiers.</p>
            <pre class="logging yaml nohighlight"># Assigned canonical identifiers for shared hashes example
ca:
  <span class="comment">...</span>
  ca.4:
    log point: Create canonical replacements for hashes mapping to a single node (4.4.3 (4)).
    with:
      - identifier: e2
        hash: 15973d39de079913dac841ac4fa8c4781c0febfba5e83e5c6e250869587f8659
        canonical label: c14n0
      - identifier: e3
        hash: 7e790a99273eed1dc57e43205d37ce232252c85b26ca4a6ff74ff3b5aea7bccd
        canonical label: c14n1
  <span class="comment">...</span></pre>
          </details>
        </li>
        <li id="ca.5">For each <var>hash</var> to <var>identifier list</var>
          <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-4">map entry</a> in
          <a href="#dfn-hash-to-blank-nodes-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-to-blank-nodes-map-6">hash to blank nodes map</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-8">code point ordered</a> by
          <var>hash</var>:
          <details>
            <summary>Explanation</summary>
            <p>This step establishes the canonical identifier for blank nodes having
              a shared hash.
              This is done by creating unique blank node identifiers for all
              blank nodes traversed by the <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>,
              running through each blank node without a canonical identifier in the order
              of the hashes established in the previous step.</p>
          </details>
          <details>
            <summary>Logging</summary>
            <p>Log <var>hash</var> and <var>identifier list</var> for this iteration.</p>
            <pre class="logging yaml nohighlight"># Hash and Identifier List for each iteration of step 5 using shared hashes example
ca:
  <span class="comment">...</span>
  ca.5:
    log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5)).
    with:
      - hash: 3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36
        identifier list: [ "e0", "e1"]
    <span class="comment">...</span>
  <span class="comment">...</span></pre>
          </details>
          <ol>
            <li id="ca.5.1">Create <var>hash path list</var> where each item will be a result
              of running the
              <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>.
              <details>
                <summary>Explanation</summary>
                <p>This list will be populated in step <a href="#ca.5.2">5.2</a>, and will establish an order for those blank nodes
                  sharing a common first-degree hash.</p>
              </details>
            </li>
            <li id="ca.5.2">For each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-21">blank node identifier</a>
              <var>n</var> in <var>identifier list</var>:
              <ol>
                <li id="ca.5.2.1">If a canonical identifier has already been issued for
                  <var>n</var>, continue to the next
                  <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-22">blank node identifier</a>.</li>
                <li id="ca.5.2.2">Create <var>temporary issuer</var>, an
                  <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-5">identifier issuer</a> initialized with the prefix
                  <code>b</code>.</li>
                <li id="ca.5.2.3">Use the
                  <a href="#issue-identifier">Issue Identifier algorithm</a>,
                  passing <var>temporary issuer</var> and <var>n</var>, to
                  issue a new temporary <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-23">blank node identifier</a> <var>b<sub>n</sub></var>
                  to <var>n</var>.</li>
                <li id="ca.5.2.4">Run the
                  <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>,
                  passing the <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-3">canonicalization state</a>,
                  <var>n</var> for <var>identifier</var>, and
                  <var>temporary issuer</var>,
                  appending the
                  result to the <var>hash path list</var>.
                  <details>
                    <summary>Logging</summary>
                    <p>Include logs for each call to <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>.</p>
                    <pre class="logging yaml nohighlight"># Logs from calls to Hash N-Degree Quads algorithm for shared hashes example
ca:
  <span class="comment">...</span>
  ca.5:
    log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5)).
    with:
      - hash: 3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36
        identifier list: [ "e0", "e1"]
        ca.5.2:
          log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5.2)).
          with:
            - identifier: e0
              hndq:
                log point: Hash N-Degree Quads function (4.8.3).
                identifier: e0
                issuer: {e0: b0}
                <span class="comment">...</span>
            <span class="comment">...</span>
        <span class="comment">...</span>
  <span class="comment">...</span></pre>
                  </details>
                </li>
              </ol>
            </li>
            <li id="ca.5.3">For each <var>result</var> in the <var>hash path list</var>,
              <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-9">code point ordered</a> by the <var>hash</var> in <var>result</var>:
              <details>
                <summary>Explanation</summary>
                <p>The previous step created temporary identifiers for the
                  blank nodes sharing a common first degree hash,
                  which is now used to generate their canonical identifiers.</p>
              </details>
              <ol>
                <li id="ca.5.3.1">For each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-24">blank node identifier</a>,
                  <var>existing identifier</var>, that was issued a temporary
                  identifier by <var>identifier issuer</var> in <var>result</var>,
                  issue a canonical identifier,
                  in the same order,
                  using the <a href="#issue-identifier">Issue Identifier algorithm</a>,
                  passing <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-9">canonical issuer</a> and <var>existing identifier</var>.
                  <details>
                    <summary>Explanation</summary>
                    <p>In <a href="#ca.5.2">Step 5.2</a>,
                      <var>hash path list</var> was created with an ordered
                      set of results.
                      Each result contained a <var>temporary issuer</var>
                      which recorded temporary identifiers associated with
                      a particular <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-25">blank node identifier</a> in
                      <var>identifier list</var>.
                      This step processes each returned <var>temporary issuer</var>,
                      in order, and allocates canonical identifiers
                      to the temporary identifier mappings contained
                      within each <var>temporary issuer</var>,
                      creating a full order on the remaining blank nodes
                      with unissued canonical identifiers.
                    </p>
                  </details>
                </li>
              </ol>
              <details>
                <summary>Logging</summary>
                <p>Log newly issued canonical identifiers.</p>
                <pre class="logging yaml nohighlight"># Newly issued canonical identifiers from step 5.3 for shared hashes example
ca:
  <span class="comment">...</span>
  ca.5:
    log point: Calculate hashes for identifiers with shared hashes (4.4.3 (5)).
    with:
      - hash: 3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36
        identifier list: [ "e0", "e1"]
        <span class="comment">...</span>
        ca.5.3:
          log point: Canonical identifiers for temporary identifiers (4.4.3 (5.3)).
          issuer:
              - blank node: e1
                canonical identifier: c14n2
              - blank node: e0
                canonical identifier: c14n3
  <span class="comment">...</span></pre>
              </details>
            </li>
          </ol>
        </li>
        <li id="ca.6">Add the <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-6">issued identifiers map</a>
          from the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-10">canonical issuer</a> to the
          <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-12">canonicalized dataset</a>.
          <details>
            <summary>Explanation</summary>
            <p>This step adds the <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-7">issued identifiers map</a>
              from the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-11">canonical issuer</a> to the
              <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-13">canonicalized dataset</a>, the <a data-link-type="dfn|abstract-op" data-lt="key" data-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-index-term-key-for-map-2">keys</a> in the
              <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-8">issued identifiers map</a> are <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-5">map entries</a> in the
              <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-7">input blank node identifier map</a>.</p>
          </details>
          <details>
            <summary>Logging</summary>
            <p>Log the state of the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-12">canonical issuer</a> at the completion of the algorithm.</p>
            <pre class="logging yaml nohighlight"># Canonical issuer state after step 6 for shared hashes example
ca:
  <span class="comment">...</span>
  ca.6:
    log point: Issued identifiers map (4.4.3 (6)).
    issued identifiers map: {e2: c14n0, e3: c14n1, e1: c14n2, e0: c14n3}</pre>
          </details>
        </li>
        <li id="ca.7">Return the <a href="#dfn-serialized-canonical-form" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-serialized-canonical-form-4">serialized canonical form</a>
          of the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-14">canonicalized dataset</a>.
          Upon request, alternatively (or additionally) return the
          <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-15">canonicalized dataset</a> itself, which includes the
          <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-8">input blank node identifier map</a>, and
          <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-9">issued identifiers map</a> from the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-13">canonical issuer</a>.
          <div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-11" aria-level="5"><span>Note</span></div><p class="">Technically speaking, one implementation
          might return a <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-16">canonicalized dataset</a> that maps
          particular blank nodes to different identifiers than another
          implementation, however, this only occurs when there are
          isomorphisms in the dataset such that a canonically serialized
          expression of the dataset would appear the same from either
          implementation.</p></div>
          <details>
            <summary>Explanation</summary>
            <p>The <a href="#dfn-serialized-canonical-form" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-serialized-canonical-form-5">serialized canonical form</a> is an N-Quads
              document where the blank node identifiers are taken
              from the canonical identifiers associated with each blank node.</p>
            <p>The <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-17">canonicalized dataset</a> is composed of the original
              <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-17">input dataset</a>, the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-9">input blank node identifier map</a>,
              containing identifiers for each blank node in the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-18">input dataset</a>,
              and the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-14">canonical issuer</a>,
              containing an <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-10">issued identifiers map</a>
              mapping the identifiers in the <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-10">input blank node identifier map</a>
              to their canonical identifiers.
            </p>
          </details>
        </li>
      </ol>
    </section>
  </section>

  <section id="issue-identifier" class="algorithm"><div class="header-wrapper"><h3 id="x4-5-issue-identifier-algorithm"><bdi class="secno">4.5 </bdi>Issue Identifier Algorithm</h3><a class="self-link" href="#issue-identifier" aria-label="Permalink for Section 4.5"></a></div>
    

    <p>This algorithm issues a new <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-26">blank node identifier</a> for
      a given existing <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-27">blank node identifier</a>. It also updates
      state information that tracks the order in which new
      <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-28">blank node identifiers</a> were issued. The order of issuance is
      important for canonically labeling blank nodes that are isomorphic
      to others in the dataset.</p>

    <section id="issue-identifier-overview"><div class="header-wrapper"><h4 id="x4-5-1-overview"><bdi class="secno">4.5.1 </bdi>Overview</h4><a class="self-link" href="#issue-identifier-overview" aria-label="Permalink for Section 4.5.1"></a></div>
      

      <p>The algorithm maintains an <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-11">issued identifiers map</a> to
        relate an existing <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-29">blank node identifier</a> from the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-19">input dataset</a>
        to a new <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-30">blank node identifier</a> using a given <a href="#dfn-identifier-prefix" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-prefix-3">identifier prefix</a>
        (<code><em>c14n</em></code>) with new identifiers issued by appending an incrementing number.
        For example, when called for a blank node identifier such as <code><em>e3</em></code>,
        it might result in a issued identifier of <code><em>c14n1</em></code>.</p>
    </section>

    <section id="issue-identifier-algorithm"><div class="header-wrapper"><h4 id="x4-5-2-algorithm"><bdi class="secno">4.5.2 </bdi>Algorithm</h4><a class="self-link" href="#issue-identifier-algorithm" aria-label="Permalink for Section 4.5.2"></a></div>
      

      <p>The algorithm takes an <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-6">identifier issuer</a> <var>I</var> and an
        <var>existing identifier</var> as inputs. The output is a new
        <var>issued identifier</var>. The steps of the algorithm are:</p>

      <ol>
        <li id="iia-1">If there is a
          <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-6">map entry</a> for <var>existing identifier</var> in
          <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-12">issued identifiers map</a> of <var>I</var>,
          return it.</li>
        <li id="iia-2">Generate <var>issued identifier</var> by concatenating
          <a href="#dfn-identifier-prefix" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-prefix-4">identifier prefix</a> with the string value of
          <a href="#dfn-identifier-counter" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-counter-2">identifier counter</a>.</li>
        <li id="iia-3">Add an <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-7">entry</a>
          mapping <var>existing identifier</var> to <var>issued identifier</var>
          to the <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-13">issued identifiers map</a> of <var>I</var>.</li>
        <li id="iia-4">Increment <a href="#dfn-identifier-counter" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-counter-3">identifier counter</a>.</li>
        <li id="iia-5">Return <var>issued identifier</var>.</li>
      </ol>
    </section>
  </section>

  <section id="hash-1d-quads" class="algorithm"><div class="header-wrapper"><h3 id="x4-6-hash-first-degree-quads"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</h3><a class="self-link" href="#hash-1d-quads" aria-label="Permalink for Section 4.6"></a></div>
    

    <p>This algorithm calculates a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-6">hash</a> for a given <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-17">blank node</a>
      across the <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-10">quads</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-18">dataset</a> in which that blank node
      is a component.
      If the hash uniquely identifies that blank node,
      no further examination is necessary.
      Otherwise, a hash will be created for the blank node using
      the algorithm in <a href="#hash-nd-quads" class="sectionRef sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a>
      invoked via <a href="#canon-algorithm" class="sectionRef sec-ref"><bdi class="secno">4.4 </bdi>Canonicalization Algorithm</a>.</p>

    <section id="hash-1d-quads-overview" class="informative"><div class="header-wrapper"><h4 id="x4-6-1-overview"><bdi class="secno">4.6.1 </bdi>Overview</h4><a class="self-link" href="#hash-1d-quads-overview" aria-label="Permalink for Section 4.6.1"></a></div><p><em>This section is non-normative.</em></p>
      

      <p>To determine whether the first degree information of a node <var>n</var> is unique,
        a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-7">hash</a> is assigned to its <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-2">mention set</a>,
        <var>Q<sub>n</sub></var>.
        The first degree hash of a blank node <var>n</var>,
        denoted <var>h<sub>f</sub>(n)</var>,
        is the hash that results from <a href="#hash-1d-quads" class="sectionRef sec-ref"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a>
        when passing <var>n</var>.
        Nodes with unique first degree hashes have unique first degree information.</p>

      <p>For consistency, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-31">blank node identifiers</a> used in <var>Q<sub>n</sub></var>
        are replaced with placeholders in a <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-5">canonical n-quads</a> serialization of that quad.
        Every blank node component is replaced with either <code><em>a</em></code> or <code><em>z</em></code>,
        depending on if that component is <var>n</var> or not.</p>

      <p>The resulting serialized quads are then <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-10">code point ordered</a>,
        concatenated, and hashed.
        This hash is the first degree hash of <var>n</var>, <var>h<sub>f</sub>(n)</var>.</p>
    </section>

    <section id="hash-1d-quads-examples" class="informative"><div class="header-wrapper"><h4 id="x4-6-2-examples"><bdi class="secno">4.6.2 </bdi>Examples</h4><a class="self-link" href="#hash-1d-quads-examples" aria-label="Permalink for Section 4.6.2"></a></div><p><em>This section is non-normative.</em></p>
      

      <aside id="ex-1d-unique-hashes" class="example"><div class="marker">
    <a class="self-link" href="#ex-1d-unique-hashes">Example<bdi> 4</bdi></a><span class="example-title">: Unique hashes</span>
  </div>
        <p>This example illustrates hashing quads containing
          blank nodes where hashing the statements <a data-lt="mention" href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-6">mentioning</a>
          those blank nodes generates unique results.</p>

        <figure id="fig-unique-hashes" style="text-align:center">
          
          <object data="unique-hashes.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-unique-hashes-alt">
            <p id="fig-unique-hashes-alt">
              The image represents the graph described in
              <a href="#ex-1d-unique-hashes-input">
                the following code block
              </a>.</p>
          </object>
          <figcaption><a class="self-link" href="#fig-unique-hashes">Figure <bdi class="figno">4</bdi></a> <span class="fig-title">An illustration of a graph resulting in unique hashes.<br>
            Image available in
            <a href="unique-hashes.svg" title="SVG image of unique hashes">
              <abbr title="Scalable Vector Graphics">SVG</abbr>
            </a>.</span></figcaption>
        </figure>

        <pre id="ex-1d-unique-hashes-input" title="Graph with blank nodes resulting in unique hashes" aria-busy="false"><code class="hljs">:p :q _:e0 .
:p :r _:e1 .
_:e0 :s :u .
_:e1 :t :u .</code></pre>

        <p>The algorithm will be called twice, with each blank node (<code><em>e0</em></code> and <code><em>e1</em></code>).
          Running the algorithm with the reference node <code><em>e0</em></code> results in the
          following quads, after replacing blank nodes:</p>

        <pre id="ex-1d-unique-hashes-e0-quads" aria-busy="false"><code class="hljs">:p :q _:a .
_:a :s :u .</code></pre>

        <p>These are then serialized to <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-6">canonical n-quads form</a>:
          <code id="ex-1d-unique-hashes-e0-quads-c14n" data-result-for="ex-1d-unique-hashes-e0-quads" data-xform="to-c14n-quads">'&lt;http://example.com/#p&gt; &lt;http://example.com/#q&gt; _:a .\n_:a &lt;http://example.com/#s&gt; &lt;http://example.com/#u&gt; .\n'</code>,
          concatenated and hashed
          using the <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-3">hash algorithm</a> (SHA-256) resulting in
          <code id="ex-1d-unique-hashes-e0-quads-hash" data-result-for="ex-1d-unique-hashes-e0-quads" data-xform="to-sha256">21d1dd5ba21f3dee9d76c0c00c260fa6f5d5d65315099e553026f4828d0dc77a</code>.
        </p>

        <p>The algorithm is run a second time with the reference node <code><em>e1</em></code> resulting
          in the following quads:</p>

        <pre id="ex-1d-unique-hashes-e1-quads" aria-busy="false"><code class="hljs">:p :r _:a .
_:a :t :u .</code></pre>

        <p>These are then serialized to <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-7">canonical n-quads form</a>:
          <code id="ex-1d-unique-hashes-e1-quads-c14n" data-result-for="ex-1d-unique-hashes-e1-quads" data-xform="to-c14n-quads">'&lt;http://example.com/#p&gt; &lt;http://example.com/#r&gt; _:a .\n_:a &lt;http://example.com/#t&gt; &lt;http://example.com/#u&gt; .\n'</code>,
          concatenated and hashed as before resulting in
          <code id="ex-1d-unique-hashes-e1-quads-hash" data-result-for="ex-1d-unique-hashes-e1-quads" data-xform="to-sha256">6fa0b9bdb376852b5743ff39ca4cbf7ea14d34966b2828478fbf222e7c764473</code>.
        </p>

        <p>Thus the generated hashes each reference just a single blank node,
          allowing the canonicalization algorithm to use only the
          Hash First Degree Quads algorithm.</p>
      </aside>

      <aside id="ex-1d-shared-hashes" class="example"><div class="marker">
    <a class="self-link" href="#ex-1d-shared-hashes">Example<bdi> 5</bdi></a><span class="example-title">: Shared hashes</span>
  </div>
        <p>This example illustrates hashing quads containing
          blank nodes where hashing the statements <a data-lt="mention" href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-7">mentioning</a>
          those blank nodes have overlapping results.</p>

        <figure id="fig-shared-hashes" style="text-align:center">
          
          <object data="shared-hashes.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-shared-hashes-alt">
            <p id="fig-shared-hashes-alt">
              The image represents the graph described in
              <a href="#ex-1d-shared-hashes-input">
                the following code block
              </a>.</p>
          </object>
          <figcaption><a class="self-link" href="#fig-shared-hashes">Figure <bdi class="figno">5</bdi></a> <span class="fig-title">An illustration of a graph resulting in shared hashes.<br>
            Image available in
            <a href="shared-hashes.svg" title="SVG image of a graph resulting in shared hashes">
              <abbr title="Scalable Vector Graphics">SVG</abbr>
            </a>.</span></figcaption>
        </figure>

        <pre id="ex-1d-shared-hashes-input" title="Graph with blank nodes resulting in shared hashes" aria-busy="false"><code class="hljs">:p :q _:e0 .
:p :q _:e1 .
_:e0 :p _:e2 .
_:e1 :p _:e3 .
_:e2 :r _:e3 .</code></pre>

        <p>The algorithm will be called four times, with each blank node
          (<code><em>e0</em></code>, <code><em>e1</em></code>, <code><em>e2</em></code>, and <code><em>e3</em></code>).
          Running the algorithm with the reference node <code><em>e0</em></code> results in the
          following quads, after replacing blank nodes:</p>

        <pre id="ex-1d-shared-hashes-e0-quads" aria-busy="false"><code class="hljs">:p :q _:a .
_:a :p _:z .</code></pre>

        <p>Which hashes to:
          <code id="ex-1d-shared-hashes-e0-quads-hash" data-result-for="ex-1d-shared-hashes-e0-quads" data-xform="to-sha256">3b26142829b8887d011d779079a243bd61ab53c3990d550320a17b59ade6ba36</code>.
        </p>

        <p>Note that using reference node <code><em>e1</em></code> results in the same quads,
          and thus results in the same hash.</p>

        <p>Using the reference node <code><em>e2</em></code> results in the following quads:</p>

        <pre id="ex-1d-shared-hashes-e2-quads" aria-busy="false"><code class="hljs">_:z :p _:a .
_:a :r _:z .</code></pre>

        <p>Which hashes to:
          <code id="ex-1d-shared-hashes-e2-quads-hash" data-result-for="ex-1d-shared-hashes-e2-quads" data-xform="to-sha256">15973d39de079913dac841ac4fa8c4781c0febfba5e83e5c6e250869587f8659</code>.
        </p>

        <p>Lastly, using the reference node <code><em>e3</em></code> results in the following quads:</p>

        <pre id="ex-1d-shared-hashes-e3-quads" aria-busy="false"><code class="hljs">_:z :p _:a .
_:z :r _:a .</code></pre>

        <p>Which hashes to:
          <code id="ex-1d-shared-hashes-e3-quads-hash" data-result-for="ex-1d-shared-hashes-e3-quads" data-xform="to-sha256">7e790a99273eed1dc57e43205d37ce232252c85b26ca4a6ff74ff3b5aea7bccd</code>.
        </p>

        <p>The hashes for <code><em>e2</em></code> and <code><em>e3</em></code> are unique, but <code><em>e0</em></code>,
          and <code><em>e1</em></code> share a common hash,
          which will require the use of the
          <a href="#hash-nd-quads-algorithm">Hash N-Degree Quads Algorithm</a>,
          as it is necessary to consider quads further removed from the direct <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-8">mentions</a>
          to determine a unique hash.</p>
      </aside>
    </section>

    <section id="hash-1d-quads-algorithm"><div class="header-wrapper"><h4 id="x4-6-3-algorithm"><bdi class="secno">4.6.3 </bdi>Algorithm</h4><a class="self-link" href="#hash-1d-quads-algorithm" aria-label="Permalink for Section 4.6.3"></a></div>
      

      <p>This algorithm takes the <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-4">canonicalization state</a> and a
        <dfn id="dfn-reference-blank-node-identifier" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">reference blank node identifier</dfn> as inputs.</p>

      <ol id="h1dq">
        <li id="h1dq.1">Initialize <dfn class="no-export" data-noexport="" data-plurals="nquad" id="dfn-nquads" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">nquads</dfn> to an empty <a data-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-index-term-list-2">list</a>.
          It will be used to store quads in <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-8">canonical n-quads form</a>.</li>
        <li id="h1dq.2">Get the <a data-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-index-term-list-3">list</a> of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-11">quads</a> <var>quads</var>
          from the <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-8">map entry</a> for
          <a href="#dfn-reference-blank-node-identifier" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-reference-blank-node-identifier-1">reference blank node identifier</a> in the
          <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-8">blank node to quads map</a>.</li>
        <li id="h1dq.3">For each <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-12">quad</a> <var>quad</var> in <var>quads</var>:
          <ol>
            <li id="h1dq.3.1">Serialize the <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-13">quad</a> in <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-9">canonical n-quads form</a> with the
              following special rule:
              <ol>
                <li id="h1dq.3.1.1">If any component in <var>quad</var> is an
                  <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-18">blank node</a>, then serialize it using a
                  special identifier as follows:
                  <ol>
                    <li id="h1dq.3.1.1.1">If the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-19">blank node</a>'s existing
                    <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-32">blank node identifier</a> matches the
                    <a href="#dfn-reference-blank-node-identifier" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-reference-blank-node-identifier-2">reference blank node identifier</a> then use the
                    <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-33">blank node identifier</a> <code>a</code>,
                    otherwise, use the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-34">blank node identifier</a>
                    <code>z</code>.</li>
                  </ol>
                </li>
              </ol>
            </li>
          </ol>
        </li>
        <li id="h1dq.4">Sort <a href="#dfn-nquads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nquads-1">nquads</a> in <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-11">Unicode code point order</a>.</li>
        <li id="h1dq.5">Return the <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-8">hash</a> that results from passing the sorted
          and concatenated <a href="#dfn-nquads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nquads-2">nquads</a> through the
          <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-4">hash algorithm</a>.
          <details>
            <summary>Logging</summary>
            <p>Log the inputs and result of running this algorithm.</p>
            <pre class="logging yaml nohighlight"># Inputs and hash result for the Hash First Degree Hash algorithm for unique hashes example
h1dq:
  log point: Hash First Degree Quads function (4.6.3).
  nquads:
    - &lt;http://example.com/#p&gt; &lt;http://example.com/#q&gt; _:a .
    - _:a &lt;http://example.com/#s&gt; &lt;http://example.com/#u&gt; .
  hash: 21d1dd5ba21f3dee9d76c0c00c260fa6f5d5d65315099e553026f4828d0dc77a</pre>
          </details>
        </li>
      </ol>
    </section>
  </section>

  <section id="hash-related-blank-node" class="algorithm"><div class="header-wrapper"><h3 id="x4-7-hash-related-blank-node"><bdi class="secno">4.7 </bdi>Hash Related Blank Node</h3><a class="self-link" href="#hash-related-blank-node" aria-label="Permalink for Section 4.7"></a></div>
    

    <p>This algorithm generates a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-9">hash</a> for some
      <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-20">blank node</a> component of a <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-14">quad</a>,
      considering its position within that quad.
      This is used as part of the
      <a href="#hash-nd-quads-algorithm">Hash N-Degree Quads algorithm</a>
      to characterize the blank nodes related to some particular blank node
      within their <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-3">mention sets</a>.
    </p>

    <section id="hash-related-bn-overview" class="informative"><div class="header-wrapper"><h4 id="x4-7-1-overview"><bdi class="secno">4.7.1 </bdi>Overview</h4><a class="self-link" href="#hash-related-bn-overview" aria-label="Permalink for Section 4.7.1"></a></div><p><em>This section is non-normative.</em></p>
      

      <p>An <em>identifier</em> for a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-21">blank node</a>, <var>related</var>,
        which is a component of some <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-15">quad</a>, is used along
        with information describing its position within the quad to create
        a representation of that blank node within the quad,
        which is then hashed.
        The identifier is first found from the following:
      </p>
      <ol>
        <li>An issued identifier from <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-15">canonical issuer</a> in the <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-5">canonicalization state</a>,</li>
        <li>An issued identifier from <var>issuer</var>, or</li>
        <li>the result of the
          <a href="#hash-nd-quads-algorithm">Hash N-Degree Quads algorithm</a>
          for <var>related</var>.</li>
      </ol>
    </section>

    <section id="hash-related-bn-examples" class="informative"><div class="header-wrapper"><h4 id="x4-7-2-examples"><bdi class="secno">4.7.2 </bdi>Examples</h4><a class="self-link" href="#hash-related-bn-examples" aria-label="Permalink for Section 4.7.2"></a></div><p><em>This section is non-normative.</em></p>
      

      <aside id="hash-related-ex1" class="example"><div class="marker">
    <a class="self-link" href="#hash-related-ex1">Example<bdi> 6</bdi></a><span class="example-title">: With assigned canonical identifier</span>
  </div>
        <p>This example illustrates generating the related hash
          for a blank node component of a quad, where the component
          is in the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-5">object</a> position and has already had
          an assigned canonical identifier from the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-16">canonical issuer</a>.</p>

        <p>Given the predicate <code>:p</code>,
          <var>related</var> <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-22">blank node</a> <code><em>e2</em></code>
          (already assigned the canonical <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-35">blank node identifier</a> <code><em>c14n0</em></code>),
          an <var>input</var>
          is created as <code>o&lt;http://example.com/#p&gt;_:c14n0</code>,
          which hashes to <code>29cf7e22790bc2ed395b81b3933e5329fc7b25390486085cac31ce7252ca60fa</code>.</p>

        <p>If such an identifier had not yet been established,
          it would instead use the results of the
          <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a>,
          without the leading <code>_:</code>.</p>
      </aside>
    </section>

    <section id="hash-related-algorithm"><div class="header-wrapper"><h4 id="x4-7-3-algorithm"><bdi class="secno">4.7.3 </bdi>Algorithm</h4><a class="self-link" href="#hash-related-algorithm" aria-label="Permalink for Section 4.7.3"></a></div>
      

      <p>This algorithm creates a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-10">hash</a> to identify how one
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-23">blank node</a> is related to another. It takes the
        <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-6">canonicalization state</a>, a <var>related</var>
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-36">blank node identifier</a>, a <var>quad</var>, an
        <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-7">identifier issuer</a>, <var>issuer</var>, and a
        <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-4">string</a> <var>position</var> as inputs.</p>

      <ol id="hrbn">
        <li id="hrbn.1">Initialize a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-5">string</a> <var>input</var> to the value of
          <var>position</var>.</li>
        <li id="hrbn.2">If <var>position</var> is not <code>g</code>, append
          <code>&lt;</code>, the value of the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="ref-for-index-term-predicate-5">predicate</a> in
          <var>quad</var>, and <code>&gt;</code> to <var>input</var>.</li>
        <li id="hrbn.3">If there is a canonical identifier for <var>related</var>,
          or an identifier issued by <var>issuer</var>,
          append the string <code>_:</code>, followed by that identifier (using the canonical
          identifier if present, otherwise the one issued by <var>issuer</var>) to
          <var>input</var>.
          <details>
            <summary>Explanation</summary>
            <p>If a canonical identifier was already issued for <var>related</var>,
              it will be in the <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-17">canonical issuer</a> contained within
              <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-7">canonicalization state</a>.
              Otherwise, the temporary <var>issuer</var> instance may already
              have a mapping for <var>related</var>.</p>
          </details>
        </li>
        <li id="hrbn.4">Otherwise,
          append the result of the
          <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a>,
          passing <var>related</var> to <var>input</var>.
          <details>
            <summary>Explanation</summary>
            <p>If no identifier, canonical or temporary, has already been issued,
              a new identifier is created using the
              <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a>.</p>
            <p>Note that <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a>
              has already been called on all blank nodes in step <a href="#ca.3">3</a>
              of the <a href="#canon-algorithm">Canonicalization algorithm</a>.
              Implementations should consider reusing a previously determined result rather than execute the
              <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a> again.</p>
          </details>
        </li>
        <li id="hrbn.5">Return the <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-11">hash</a> that results from passing <var>input</var>
          through the <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-5">hash algorithm</a>.
          <details>
            <summary>Explanation</summary>
            <p>This resulting string is used to generate a hash; in this respect, it is similar to
              the <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a> which
              uses the serialization of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-16">quads</a> in <a href="#dfn-nquads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nquads-3">nquads</a> for hashing. For the sake of consistency, the
              <a href="#dfn-nquads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nquads-4">nquad</a> representation of <var>identifier</var> is used in this step, hence the
              appearance of the <code>_:</code> string.</p>
          </details>
          <details>
            <summary>Logging</summary>
            <p>Log the inputs and result of running this algorithm.</p>
            <pre class="logging yaml nohighlight"># Inputs and hash result for the Hash Related Blank algorithm for shared hashes example
hndq3.1:
  log point: Hash related bnode component (4.8.3 (3.1))
  with:
    - position: o
      related: e2
      input: "o&lt;http://example.com/#p&gt;_:c14n0"
      hash: 29cf7e22790bc2ed395b81b3933e5329fc7b25390486085cac31ce7252ca60fa</pre>
          </details>
        </li>
      </ol>
    </section>
  </section>

  <section id="hash-nd-quads" class="algorithm"><div class="header-wrapper"><h3 id="x4-8-hash-n-degree-quads"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</h3><a class="self-link" href="#hash-nd-quads" aria-label="Permalink for Section 4.8"></a></div>
    

    <p>This algorithm calculates a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-12">hash</a> for a given <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-24">blank node</a>
      across the <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-17">quads</a> in a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-19">dataset</a> in which that blank node
      is a component for which the hash does not uniquely identify that blank node.
      This is done by expanding the search from quads directly referencing that
      blank node (the <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-4">mention set</a>), to those quads
      which contain nodes which are also components of quads in the mention set,
      called the <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-1">gossip path</a>.
      This process proceeds in every greater degrees of indirection until
      a unique hash is obtained.</p>

    <section id="hash-nd-quads-overview" class="informative"><div class="header-wrapper"><h4 id="x4-8-1-overview"><bdi class="secno">4.8.1 </bdi>Overview</h4><a class="self-link" href="#hash-nd-quads-overview" aria-label="Permalink for Section 4.8.1"></a></div><p><em>This section is non-normative.</em></p>
      

      <p>Usually, when trying to determine if two nodes in a graph are
        equivalent, you simply compare their identifiers. However, what if the
        nodes don't have identifiers? Then you must determine if the two nodes
        have equivalent connections to equivalent nodes all throughout the
        whole graph. This is called the <a href="#dfn-graph-isomorphism" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-graph-isomorphism-1">graph isomorphism</a> problem. This
        algorithm approaches this problem by considering how one might draw
        a graph on paper. You can test to see if two nodes are equivalent
        by drawing the graph twice. The first time you draw the graph the
        first node is drawn in the center of the page. If you can draw the
        graph a second time such that it looks just like the first, except
        the second node is in the center of the page, then the nodes are
        equivalent. This algorithm essentially defines a deterministic way to
        draw a graph where, if you begin with a particular node, the graph
        will always be drawn the same way. If two graphs are drawn the same way
        with two different nodes, then the nodes are equivalent. A
        <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-13">hash</a> is used to indicate a particular way that the graph
        has been drawn and can be used to compare nodes.</p>

      <p>When two blank nodes have the same first degree hash,
        extra steps must be taken to detect global,
        or <em>N</em>-degree, distinctions.
        All information that is in any way connected to the blank node <var>n</var>
        through other blank nodes, even transitively, must be considered.</p>

      <p>To consider all transitive information,
        the algorithm traverses and encodes all possible paths of incident
        <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-9">mentions</a> emanating from <var>n</var>, called <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-2">gossip paths</a>,
        that reach every unlabeled blank node connected to <var>n</var>.
        Each unlabeled blank node is assigned a temporary identifier
        in the order in which it is reached in the
        gossip path being explored.
        The mentions that are traversed to reach
        connected blank nodes are encoded in these paths via related hashes.
        This provides a deterministic way to order all paths coming from <var>n</var> that
        reach all blank nodes connected to n without relying on input blank
        node identifiers.</p>

      <p>This algorithm works in concert with the main canonicalization algorithm
        to produce a unique, deterministic identifier for a particular blank
        node. This <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-14">hash</a> incorporates all of the information that
        is connected to the blank node as well as how it is connected. It does
        this by creating deterministic paths that emanate out from the blank
        node through any other adjacent blank nodes.</p>

      <p>Ultimately, the algorithm selects the shortest <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-3">gossip path</a>
        (based on its encoding as a string), distributing canonical
        identifiers to the unlabeled blank nodes in the order in which they
        appear in this path.
        The hash of this encoded shortest path,
        called the N-degree hash of <var>n</var>,
        distinguishes <var>n</var> from other blank nodes in the dataset.</p>

      <p>For clarity, we consider a <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-4">gossip path</a> encoded via the string <var>s</var>
        to be shortest provided that:</p>

      <ol>
        <li>The length of <var>s</var> is less than or equal to the length
          of any other gossip path string <var>s′</var>.</li>
        <li>If <var>s</var> and <var>s′</var> have the same length (as strings),
          then <var>s</var> is <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-12">code point ordered</a> less than or equal to <var>s′</var>.</li>
      </ol>

      <p>For example, <em>abc</em> is shorter than <em>bbc</em>,
        whereas <em>abcd</em> is longer than <em>bcd</em>.</p>

      <p>The following provides a high level outline for how the N-degree hash of <var>n</var>
        is computed along the shortest <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-5">gossip path</a>.
        Note that the full algorithm considers all gossip paths,
        ultimately returning the <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-15">hash</a> of the shortest encoded path.</p>

      <ol>
        <li id="ndh-hl-s1"><strong>Compute related hashes</strong>.
          Compute the related hash <var>H<sub>n</sub></var> set for <var>n</var>,
          i.e., all first degree <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-10">mentions</a> between <var>n</var> and another blank node.
          Note that this includes both unlabeled blank nodes and those
          already issued a canonical identifier (labeled blank nodes).</li>
        <li id="ndh-hl-s2"><strong>Explore mentions</strong>.
          Given the related hash <var>x</var> in <var>H<sub>n</sub></var>,
          record <var>x</var> in the data to hash <var>D<sub>n</sub></var>.
          Determine whether each blank node reachable via the <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-11">mention</a> with related hash <var>x</var>
          has already received an identifier.
          <ol>
            <li id="ndh-hl-s2-1"><strong>Record the identifiers of labeled nodes</strong>.
              If a blank node already has an identifier,
              record its identifier in <var>D<sub>n</sub></var> once for every
              <a href="#dfn-mention" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-12">mention</a> with related hash <var>x</var>.
              Skip to the next related hash in <var>H<sub>n</sub></var>
              and repeat <a href="#ndh-hl-s2">step 2</a>.</li>
            <li id="ndh-hl-s2-2"><strong>Distribute and record temporary identifiers to unlabeled nodes</strong>.
              For each unlabeled blank node,
              assign it a temporary identifier according to the order in which it is reached in the gossip path,
              recording its given identifier in <var>D<sub>n</sub></var> (including repetitions).
              Add each unlabeled node to the recursion list <var>R<sub>n</sub>(x)</var>
              in this same order (omitting repetitions).</li>
            <li id="ndh-hl-s2-3"><strong>Recurse on newly labeled nodes</strong>.
              For each <var>n<sub>i</sub></var> in <var>R<sub>n</sub>(x)</var>
              <ol>
                <li id="ndh-hl-s2-3-1">Record its identifier in <var>D<sub>n</sub></var></li>
                <li id="ndh-hl-s2-3-2">Append &lt; <var>r(i)</var> &gt; to <var>D<sub>n</sub></var>
                  where <var>r(i)</var> is the data to hash that results from returning to
                  <a href="#ndh-hl-s1">step 1</a>,
                  replacing <var>n</var> with <var>n<sub>i</sub></var>.</li>
              </ol>
            </li>
          </ol>
        </li>
        <li id="ndh-hl-s3"><strong>Compute the <em>N</em>-degree hash of n</strong>.
          Hash <var>D<sub>n</sub></var> to return the <em>N</em>-degree hash of <var>n</var>,
          namely <var>h<sub>N</sub>(n)</var>.
          Return the updated issuer <var>I<sub>n</sub></var>
          that has now distributed temporary identifiers to all unlabeled blank nodes connected to <var>n</var>.</li>
      </ol>

      <p>As described above in <a href="#ndh-hl-s2-3">step 2.3</a>,
        <var>HN</var> recurses on each unlabeled blank node
        when it is first reached along the <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-6">gossip path</a> being explored.
        This recursion can be visualized as moving along the path from <var>n</var>
        to the blank node <var>n<sub>i</sub></var> that is receiving a temporary identifier.
        If, when recursing on <var>n<sub>i</sub></var>,
        another unlabeled blank node <var>n<sub>j</sub></var> is discovered,
        the algorithm again recurses.
        Such a recursion traces out the <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-7">gossip path</a> from <var>n</var>
        to <var>n<sub>j</sub></var> via <var>n<sub>i</sub></var>.</p>

      <p>The recursive hash <var>r(i)</var> is the <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-16">hash</a> returned from
        the completed recursion on the node <var>n<sub>i</sub></var>
        when computing <var>h<sub>N</sub>(n)</var>.
        Just as <var>h<sub>N</sub>(n)</var> is the hash of <var>D<sub>n</sub></var>,
        we denote the data to hash in the recursion on <var>n<sub>i</sub></var>
        as <var>D<sub>i</sub></var>.
        So, <var>r(i)</var> = <var>h(D<sub>i</sub>)</var>.
        For each related hash <var>x</var> ∈ <var>H<sub>n</sub></var>,
        <var>R<sub>n</sub>(x)</var> is called the <em>recursion list</em> on
        which the algorithm recurses.</p>
    </section>

    <section id="hash-nd-quads-examples" class="informative"><div class="header-wrapper"><h4 id="x4-8-2-examples"><bdi class="secno">4.8.2 </bdi>Examples</h4><a class="self-link" href="#hash-nd-quads-examples" aria-label="Permalink for Section 4.8.2"></a></div><p><em>This section is non-normative.</em></p>
      

      <aside id="ex-nd-shared-hashes" class="example"><div class="marker">
    <a class="self-link" href="#ex-nd-shared-hashes">Example<bdi> 7</bdi></a><span class="example-title">: Shared hashes</span>
  </div>

        <p>This example revisits <a href="#ex-ca-shared-hashes" class="box-ref">Example<bdi> 3</bdi></a>
          to illustrate the operation of the
          <a href="#hash-nd-quads-algorithm">Hash N-Degree Quads Algorithm</a>
          on the blank nodes (<code><em>e0</em></code> and <code><em>e1</em></code>) which resulted in a shared result from the
          <a href="#hash-1d-quads-algorithm">Hash First Degree Quads Algorithm</a>.
          The other blank nodes (<code><em>e2</em></code> and <code><em>e3</em></code>) had unique
          hashes when processed by the
          <a href="#hash-1d-quads-algorithm">Hash N-Degree Quads Algorithm</a>,
          so that canonical identifiers have already been issued,
          as recorded in the <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-8">identifier issuer</a> instance.</p>

        <table id="ex-nd-shared-table-input-canon-mapping" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-input-canon-mapping">Table <bdi class="tableno">10</bdi></a> <span class="table-title">Established canonical identifiers from <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-18">canonical issuer</a></span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>canonical identifier</var></th>
          </tr></thead>
          <tbody>
            <tr><td><code><em>e2</em></code></td><td><code><em>c14n0</em></code></td></tr>
            <tr><td><code><em>e3</em></code></td><td><code><em>c14n1</em></code></td></tr>
          </tbody>
        </table>

        <figure id="fig-nd-shared-hashes" style="text-align:center">
          
          <object data="shared-hashes.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-nd-shared-hashes-alt">
            <p id="fig-nd-shared-hashes-alt">
              The image represents the graph described in
              <a href="#ex-nd-shared-hashes-input">
                the following code block
              </a>.</p>
          </object>
          <figcaption><a class="self-link" href="#fig-nd-shared-hashes">Figure <bdi class="figno">6</bdi></a> <span class="fig-title">An illustration of a graph resulting in shared hashes.<br>
            Image available in
            <a href="shared-hashes.svg" title="SVG image of a graph resulting in shared hashes">
              <abbr title="Scalable Vector Graphics">SVG</abbr>
            </a>.</span></figcaption>
        </figure>

        <pre id="ex-nd-shared-hashes-input" title="Graph with blank nodes resulting in shared hashes" aria-busy="false"><code class="hljs">:p :q <span class="hl-bold">_:e0</span> .
:p :q <span class="hl-bold">_:e1</span> .
<span class="hl-bold">_:e0</span> :p _:e2 .
<span class="hl-bold">_:e1</span> :p _:e3 .
_:e2 :r _:e3 .</code></pre>

        <p>The algorithm will be called twice, with each blank node
           which did not result in a unique hash
          from the <a href="#hash-1d-quads-algorithm">Hash First Degree Quads Algorithm</a>
          (<code><em>e0</em></code> and <code><em>e1</em></code>).
          The <a href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-9">map entry</a> for <code><em>e0</em></code> in the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-9">blank node to quads map</a> results in the
          following quads:</p>

        <pre id="ex-nd-shared-hashes-e0-quads" aria-busy="false"><code class="hljs">:p :q _:e0 .
_:e0 :p _:e2 .</code></pre>

        <p>When called, the <var>temporary issuer</var> has the following mappings:</p>

        <table id="ex-nd-shared-table-input-temporary-mapping-e0" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-input-temporary-mapping-e0">Table <bdi class="tableno">11</bdi></a> <span class="table-title">Initial mappings in <var>temporary issuer</var> for <code><em>e0</em></code></span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>temporary identifier</var></th>
          </tr></thead>
          <tbody>
            <tr><td><code><em>e0</em></code></td><td><code><em>b0</em></code></td></tr>
          </tbody>
        </table>

        <p><a href="#hndq.3">Step 3</a> iterates over each of these quads
          to find <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-25">blank node</a> <var>components</var>
          to populate <var>H<sub>n</sub></var>
          with the result of running the
          <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>
          using the <var>position</var> of that <var>component</var> within the quad.</p>

        <table id="ex-nd-shared-table-related-hash-e0" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-related-hash-e0">Table <bdi class="tableno">12</bdi></a> <span class="table-title">Hash for <code><em>e2</em></code>  related to <code><em>e0</em></code></span></caption>
          <thead><tr>
            <th><var>related</var></th>
            <th><var>quad</var></th>
            <th><var>position</var></th>
            <th><var>hash</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code><em>e2</em></code></td>
              <td><code>e0&nbsp;:p&nbsp;e2&nbsp;.</code></td>
              <td><code>o</code></td>
              <td>
                
                
                <code><abbr title="29cf7e22790bc2ed395b81b3933e5329fc7b25390486085cac31ce7252ca60fa">29cf7e2279...7252ca60fa</abbr></code></td>
            </tr>
          </tbody>
        </table>

        <p>which results in the following <var>H<sub>n</sub></var>:</p>

        <table id="ex-nd-shared-table-bn-list-e0" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-bn-list-e0">Table <bdi class="tableno">13</bdi></a> <span class="table-title">Blank node list for hash</span></caption>
          <thead><tr>
            <th><var>related hash</var></th>
            <th><var>blank node list</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code>29cf7e22790bc2ed395b81b3933e5329fc7b25390486085cac31ce7252ca60fa</code></td>
              <td><code>[ <em>e2</em> ]</code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#hndq.5">Step 5</a> iterates over each <var>related hash</var>
          which is a key in <var>H<sub>n</sub></var>,
          which can have one or more related blank nodes,
          which determines the shortest <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-8">gossip path</a> between
          the two nodes (<code><em>e0</em></code> and <code><em>e2</em></code>).
          In this case, the hash maps to just <code><em>e2</em></code>,
          for which a canonical identifier has already been chosen (<code><em>c14n0</em></code>),
          so there is a single permutation
          resulting in one candidate path.
          The resulting <var>chosen path</var> is <code>_:c14n0</code>.</p>

        <p>The string <var>data to hash</var> is composed
          of the single <var>related hash</var> and the <var>chosen path</var>:
          <code>29cf7e22790bc2ed395b81b3933e5329fc7b25390486085cac31ce7252ca60fa_:c14n0</code>,
          which hashes to
          <code>fbc300de5afafd97a4b9ee1e72b57754dcdcb7ebb724789ac6a94a5b82a48d30</code>,
          which, along with the <var>temporary issuer</var> used to traverse
          these paths, is the result of the algorithm:</p>

        <table id="ex-nd-shared-result-e0" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-result-e0">Table <bdi class="tableno">14</bdi></a> <span class="table-title">Result for <code><em>e0</em></code></span></caption>
          <tbody>
            <tr>
              <td><var>temporary issuer</var> mappings</td>
              <td>
                <table class="hash-related">
                  <thead><tr>
                    <th><var>original identifier</var></th>
                    <th><var>temporary identifier</var></th>
                  </tr></thead>
                  <tbody>
                    <tr><td><code><em>e0</em></code></td><td><code><em>b0</em></code></td></tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td><var>hash</var></td>
              <td><code>fbc300de5afafd97a4b9ee1e72b57754dcdcb7ebb724789ac6a94a5b82a48d30</code></td>
            </tr>
          </tbody>
        </table>

        <p>The algorithm is called again for <code><em>e1</em></code>.</p>

        <table id="ex-nd-shared-table-input-temporary-mapping-e1" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-input-temporary-mapping-e1">Table <bdi class="tableno">15</bdi></a> <span class="table-title">Initial mappings in <var>temporary issuer</var> for <code><em>e1</em></code></span></caption>
          <thead><tr>
            <th><var>blank node</var></th>
            <th><var>temporary identifier</var></th>
          </tr></thead>
          <tbody>
            <tr><td><code><em>e1</em></code></td><td><code><em>b0</em></code></td></tr>
          </tbody>
        </table>

        <p>The <a href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-10">map entry</a> for <code><em>e1</em></code> in the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-10">blank node to quads map</a> results in the
          following quads:</p>

        <pre id="ex-nd-shared-hashes-e1-quads" aria-busy="false"><code class="hljs">:p :q _:e1 .
_:e1 :p _:e3 .</code></pre>

        <p><a href="#hndq.3">Step 3</a> again calculates <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-26">blank node</a> <var>components</var>
          using
          <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>.</p>

        <table id="ex-nd-shared-table-related-hash-e1" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-related-hash-e1">Table <bdi class="tableno">16</bdi></a> <span class="table-title">Hash for <code><em>e3</em></code>  related to <code><em>e1</em></code></span></caption>
          <thead><tr>
            <th><var>related</var></th>
            <th><var>quad</var></th>
            <th><var>position</var></th>
            <th><var>hash</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code><em>e3</em></code></td>
              <td><code>e1&nbsp;:p&nbsp;e3&nbsp;.</code></td>
              <td><code>o</code></td>
              <td>
                
                
                <code><abbr title="b7956ea1d654d5824496eb439a1f2b79478bd7d02d4a115f4c97cbff6b098216">b7956ea1d6...ff6b098216</abbr></code></td>
            </tr>
          </tbody>
        </table>

        <p>which results in the following <var>H<sub>n</sub></var>:</p>

        <table id="ex-nd-shared-table-bn-list-e1" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-table-bn-list-e1">Table <bdi class="tableno">17</bdi></a> <span class="table-title">Blank node list for hash</span></caption>
          <thead><tr>
            <th><var>related hash</var></th>
            <th><var>blank node list</var></th>
          </tr></thead>
          <tbody>
            <tr>
              <td><code>b7956ea1d654d5824496eb439a1f2b79478bd7d02d4a115f4c97cbff6b098216</code></td>
              <td><code>[ <em>e3</em> ]</code></td>
            </tr>
          </tbody>
        </table>

        <p><a href="#hndq.5">Step 5</a>
          runs in essentially the same manner, mapping just <code><em>e3</em></code>
          having the canonical identifier <code><em>c14n1</em></code>,
          so there is again a single permutation
          resulting in one candidate path.
          The resulting <var>chosen path</var> is <code>_:c14n1</code>.</p>

        <p>The string <var>data to hash</var> is composed
          of the single <var>related hash</var> and the <var>chosen path</var>:
          <code>af54b9512b1ef069205e8e41bc5a96e86a108b0389caa5029f2c3fd0bc465246_:c14n1</code>,
          which hashes to
          <code>767a5e66f509221f45003a16c12a89d4d9675cfa51ffa80459b63606bdfc2ada</code>.</p>

        <p>The string <var>data to hash</var> is composed
          of the single <var>related hash</var> and the <var>chosen path</var>:
          <code>b7956ea1d654d5824496eb439a1f2b79478bd7d02d4a115f4c97cbff6b098216_:c14n1</code>,
          which hashes to
          <code>fbc300de5afafd97a4b9ee1e72b57754dcdcb7ebb724789ac6a94a5b82a48d30</code>,
          which, along with the <var>temporary issuer</var> used to traverse
          these paths, is the result of the algorithm:</p>

        <table id="ex-nd-shared-result-e1" class="hash-related numbered">
          <caption><a class="self-link" href="#ex-nd-shared-result-e1">Table <bdi class="tableno">18</bdi></a> <span class="table-title">Result for <code><em>e1</em></code></span></caption>
          <tbody>
            <tr>
              <td><var>temporary issuer</var> mappings</td>
              <td>
                <table class="hash-related">
                  <thead><tr>
                    <th><var>original identifier</var></th>
                    <th><var>temporary identifier</var></th>
                  </tr></thead>
                  <tbody>
                    <tr><td><code><em>e1</em></code></td><td><code><em>b0</em></code></td></tr>
                  </tbody>
                </table>
              </td>
            </tr>
            <tr>
              <td><var>hash</var></td>
              <td><code>2c0b377baf86f6c18fed4b0df6741290066e73c932861749b172d1e5560f5045</code></td>
            </tr>
          </tbody>
        </table>
      </aside>
    </section>

    <section id="hash-nd-quads-algorithm"><div class="header-wrapper"><h4 id="x4-8-3-algorithm"><bdi class="secno">4.8.3 </bdi>Algorithm</h4><a class="self-link" href="#hash-nd-quads-algorithm" aria-label="Permalink for Section 4.8.3"></a></div>
      

      <p>The inputs to this algorithm are the <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-8">canonicalization state</a>,
        the <var>identifier</var> for the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-27">blank node</a> to
        recursively hash quads for, and path identifier <var>issuer</var> which is
        an <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-9">identifier issuer</a> that issues temporary
        <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-37">blank node identifier</a>s. The output from this algorithm
        will be a <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-17">hash</a> and the <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-10">identifier issuer</a> used
        to help generate it.</p>
      <details>
        <summary>Logging</summary>
        <p>Log the inputs to the algorithm.</p>
        <pre class="logging yaml nohighlight"># Inputs for the Hash N-Degree Quads algorithm for double circle example
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span></pre>
      </details>

      <ol id="hndq">
        <li id="hndq.1">Create a new <a data-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-index-term-map-5">map</a> <var>H<sub>n</sub></var>
          for relating hashes to related <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-28">blank nodes</a>.</li>
        <li id="hndq.2">Get a reference, <var>quads</var>, to the list of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-18">quads</a>
          from the <a data-link-type="dfn|abstract-op" data-lt="entry" data-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-index-term-entry-for-map-11">map entry</a>
          for <var>identifier</var>
          in the <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-11">blank node to quads map</a>.
          <details>
            <summary>Explanation</summary>
            <p><var>quads</var> is the <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-5">mention set</a> of <var>identifier</var>.</p>
          </details>
          <details>
            <summary>Logging</summary>
            <p>Log the quads from the <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-6">mention set</a> of <var>identifier</var>.</p>
            <pre class="logging yaml nohighlight"># Inputs for the Hash N-Degree Quads algorithm for double circle example
hndq:
  identifier: e0
  log point: Hash N-Degree Quads function (4.8.3).
  issuer: {e0: b0}
  hndq.2:
    log point: Quads for identifier (4.8.3 (2)).
    quads:
    - _:e0 &lt;http://example.org/vocab#next&gt; _:e1 .
    - _:e0 &lt;http://example.org/vocab#prev&gt; _:e1 .
    - _:e1 &lt;http://example.org/vocab#next&gt; _:e0 .
    - _:e1 &lt;http://example.org/vocab#prev&gt; _:e0 .
  <span class="comment">...</span></pre>
          </details>
        </li>
        <li id="hndq.3">For each <var>quad</var> in <var>quads</var>:
          <details>
            <summary>Explanation</summary>
            <p>This loop calculates the related hash <var>H<sub>n</sub></var>
              for other blank nodes within the <a href="#dfn-mention-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-mention-set-7">mention set</a> of <var>identifier</var>.</p>
          </details>
          <ol>
            <li id="hndq.3.1">For each <var>component</var> in <var>quad</var>, where <var>component</var>
              is the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-6">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-6">object</a>, or
              <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-7">graph name</a>, and it is a
              <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-29">blank node</a> that is not identified by
              <var>identifier</var>:
              <ol>
                <li id="hndq.3.1.1">Set <var>hash</var> to the result of the
                  <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>,
                  passing the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-38">blank node identifier</a> for
                  <var>component</var> as <var>related</var>, <var>quad</var>,
                  <var>issuer</var>, and
                  <var>position</var> as either <code>s</code>, <code>o</code>, or
                  <code>g</code> based on whether <var>component</var> is a
                  <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-7">subject</a>, <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-7">object</a>,
                  <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-8">graph name</a>, respectively.</li>
                <li id="hndq.3.1.2">Add a mapping of <var>hash</var> to the
                  <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-39">blank node identifier</a> for <var>component</var>
                  to <var>H<sub>n</sub></var>, adding an entry
                  as necessary.</li>
              </ol>
            </li>
          </ol>
          <details>
            <summary>Logging</summary>
            <p>Include the logs for each iteration of the
              <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>
              and the resulting <var>H<sub>n</sub></var>.</p>
            <pre class="logging yaml nohighlight"># Step 3 of Hash N-Degree Quads using double circle example
hndq:
  identifier: e0
  log point: Hash N-Degree Quads function (4.8.3).
  issuer: {e0: b0}
  <span class="comment">...</span>
hndq.3:
  log point: Hash N-Degree Quads function (4.8.3 (3)).
  with:
    - quad: _:e0 &lt;http://example.org/vocab#next&gt; _:e1 .
      hndq.3.1:
        log point: Hash related bnode component (4.8.3 (3.1))
        with:
          - position: o
            related: e1
            h1dq:
              log point: Hash First Degree Quads function (4.6.3).
              nquads:
                - _:z &lt;http://example.org/vocab#next&gt; _:a .
                - _:z &lt;http://example.org/vocab#prev&gt; _:a .
                - _:a &lt;http://example.org/vocab#next&gt; _:z .
                - _:a &lt;http://example.org/vocab#prev&gt; _:z .
              hash: 60dc8fc7b5481014b6ea38efb05455676d1e93e19b99119ab294941dacc16b3b
            input: "o&lt;http://example.org/vocab#next&gt;60dc8fc7b5481014b6ea38efb05455676d1e93e19b99119ab294941dacc16b3b"
            hash: 20bb08971220a5382a9a06ba2977c5fb859e63192e0b2015a378af89e453f25e
    - quad: _:e0 &lt;http://example.org/vocab#prev&gt; _:e1 .
      <span class="comment">...</span>
  Hash to bnodes:
      20bb08971220a5382a9a06ba2977c5fb859e63192e0b2015a378af89e453f25e:
        - e1
      1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d:
        - e1
      56d0774755aaf8d9cf4da8af3728e5589f94e5cd7d9aee86f0c5a7bc1d71c7ca:
        - e1
      2a5dd448b9467a08479008a5350829441868b7f913343cd500fe8619e047cff4:
        - e1
<span class="comment">...</span></pre>
          </details>
        </li>
        <li id="hndq.4">Create an empty string, <var>data to hash</var>.</li>
        <li id="hndq.5">For each <var>related hash</var> to <var>blank node list</var> mapping in
          <var>H<sub>n</sub></var>, <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-13">code point ordered</a>
          by <var>related hash</var>:
          <details>
            <summary>Explanation</summary>
            <p>This loop explores the <a href="#dfn-gossip-path" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-gossip-path-9">gossip paths</a> for each
              related blank node sharing a common hash to <var>identifier</var>
              finding the shortest such path (<var>chosen path</var>).
              This determines how canonical identifiers for
              otherwise commonly hashed blank nodes are chosen.
            </p>
            <p>
              Each path is represented by the concatenation of the
              identifiers for each related blank node
              – either the issued identifier,
              or a temporary identifier created using a copy of <var>issuer</var>.
              Those for which temporary identifiers were issued are later
              recursed over using this algorithm.
            </p>
          </details>
          <details>
            <summary>Logging</summary>
            <p>Log the value of <var>related hash</var>
              and state of <var>data to hash</var>.</p>
            <pre class="logging yaml nohighlight"># Log related hash and data to hash in each iteration of step 5 for double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.5:
    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.
    with:
    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d
      data_to_hash: ""
      <span class="comment">...</span></pre>
          </details>
          <ol>
            <li id="hndq.5.1">Append the <var>related hash</var> to the <var>data to hash</var>.</li>
            <li id="hndq.5.2">Create a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-6">string</a> <var>chosen path</var>.</li>
            <li id="hndq.5.3">Create an unset <var>chosen issuer</var> variable.</li>
            <li id="hndq.5.4">For each <a href="https://en.wikipedia.org/wiki/Permutation">permutation</a> <var>p</var> of <var>blank node list</var>:
              <details>
                <summary>Logging</summary>
                <p>Log each <a href="https://en.wikipedia.org/wiki/Permutation">permutation</a> <var>p</var>.</p>
                <pre class="logging yaml nohighlight"># Log each permutation of step 5.4 using double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.5:
    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.
    with:
    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d
      data_to_hash: ""
      hndq.5.4:
        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.
        with:
        - perm: [ "e1"]
          <span class="comment">...</span></pre>
              </details>
              <ol>
                <li id="hndq.5.4.1">Create a copy of <var>issuer</var>, <var>issuer copy</var>.</li>
                <li id="hndq.5.4.2">Create a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-index-term-string-7">string</a> <var>path</var>.</li>
                <li id="hndq.5.4.3">Create a <var>recursion list</var>, to store
                  <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-40">blank node identifiers</a> that must be
                  recursively processed by this algorithm.</li>
                <li id="hndq.5.4.4">For each <var>related</var> in <var>p</var>:
                  <ol>
                    <li id="hndq.5.4.4.1">If a canonical identifier has been issued for
                      <var>related</var> by <a href="#dfn-canonical-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-issuer-19">canonical issuer</a>, append the string <code>_:</code>, followed by
                      the canonical identifier for <var>related</var>, to <var>path</var>.
                      <details><summary>Explanation</summary>
                        <p>A canonical identifier may have been generated before calling this algorithm,
                            if it was issued from an earlier call to <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a>.
                            There is no reason to recurse and apply the algorithm to any related blank node that has already been assigned a canonical identifier.
                             Furthermore, using the canonical identifier also further distinguishes it from any temporary identifier, allowing for even greater efficiency in finding the chosen path.</p>
                      </details>
                    </li>
                    <li id="hndq.5.4.4.2">Otherwise:
                      <ol>
                        <li id="hndq.5.4.4.2.1">If <i>issuer copy</i> has not issued
                          an identifier for <var>related</var>, append
                          <var>related</var> to <var>recursion list</var>.
                          <details>
                            <summary>Explanation</summary>
                            <p>Temporarily labeled nodes have identifiers recorded
                              in <var>issuer copy</var>,
                              which is later used to recursively call this algorithm,
                              so that eventually all nodes are given canonical identifiers.</p>
                          </details>
                        </li>
                        <li id="hndq.5.4.4.2.2">Use the
                          <a href="#issue-identifier">Issue Identifier algorithm</a>,
                          passing <var>issuer copy</var> and the <var>related</var>, and
                          append the string <code>_:</code>, followed by the result, to <var>path</var>.</li>
                      </ol>
                    </li>
                    <li id="hndq.5.4.4.3">If <var>chosen path</var> is not empty and the length
                      of <var>path</var> is greater than or equal to the length
                      of <var>chosen path</var> and <var>path</var> is
                      greater than <var>chosen path</var> when
                      considering <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-14">code point order</a>,
                      then skip to the next
                      <a href="https://en.wikipedia.org/wiki/Permutation">permutation</a> <var>p</var>.
                      <details>
                        <summary>Explanation</summary>
                        <p>If <var>path</var> is already longer than
                          the prospective <var>chosen path</var>,
                          we can terminate this iteration early.</p>
                      </details>
                    </li>
                  </ol>
                  <details>
                    <summary>Explanation</summary>
                    <p><var>path</var> is used to generate a hash at a later step; in this respect, it is similar to
                      the <a href="#hash-1d-quads">Hash First Degree Quads algorithm</a> which
                      uses the serialization of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-19">quads</a> in <a href="#dfn-nquads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nquads-5">nquads</a> for hashing. For the sake of consistency, the
                      <a href="#dfn-nquads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-nquads-6">nquad</a> representation of blank node identifiers is used in these steps, hence the
                      usage of the <code>_:</code> string.</p>
                  </details>
                  <details>
                    <summary>Logging</summary>
                    <p>Log <var>related</var> and <var>path</var>.</p>
                    <pre class="logging yaml nohighlight"># Log related and path of step 5.4.4 using double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.5:
    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.
    with:
    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d
      data_to_hash: ""
      hndq.5.4:
        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.
        with:
        - perm: [ "e1"]
          hndq.5.4.4:
            log point: Hash N-Degree Quads function (4.8.3 (5.4.4)), entering loop.
            with:
              - related: e1
                path: ""
          <span class="comment">...</span></pre>
                  </details>
                </li>
                <li id="hndq.5.4.5">For each <var>related</var> in <var>recursion list</var>:
                  <details>
                    <summary>Explanation</summary>
                    <p>The prospective <var>path</var> is extended with
                      the hash resulting from recursively calling this algorithm
                      on each related blank node issued a temporary identifier.</p>
                  </details>
                  <details>
                    <summary>Logging</summary>
                    <p>Log <var>recursion list</var> and <var>path</var>.</p>
                    <pre class="logging yaml nohighlight"># Log related and path of step 5.4.5 using double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.5:
    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.
    with:
    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d
      data_to_hash: ""
      hndq.5.4:
        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.
        with:
        - perm: [ "e1"]
          <span class="comment">...</span>
          hndq.5.4.5:
            log point: Hash N-Degree Quads function (4.8.3 (5.4.5)), before possible recursion.
            recursion list: [ "e1"]
            path: "_:b1"
          <span class="comment">...</span></pre>
                  </details>
                  <ol>
                    <li id="hndq.5.4.5.1">Set <var>result</var> to the result of recursively executing
                      the <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>,
                      passing the <a href="#dfn-canonicalization-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalization-state-9">canonicalization state</a>,
                      <var>related</var> for <var>identifier</var>, and
                      <var>issuer copy</var> for <var>path identifier issuer</var>.
                      <details>
                        <summary>Logging</summary>
                        <p>Log <var>related</var> and
                          include logs for each recursive call to <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>.</p>
                        <pre class="logging yaml nohighlight"># Log related and path of step 5.4.5.1 using double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.5:
    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.
    with:
    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d
      data_to_hash: ""
      hndq.5.4:
        log point: Hash N-Degree Quads function (4.8.3 (5.4)), entering loop.
        with:
        - perm: [ "e1"]
          <span class="comment">...</span>
          hndq.5.4.5:
            log point: Hash N-Degree Quads function (4.8.3 (5.4.5)), before possible recursion.
            recursion list: [ "e1"]
            path: "_:b1"
            with:
              - related: e1
                hndq:
                  <span class="comment">...</span></pre>
                      </details>
                    </li>
                    <li id="hndq.5.4.5.2">Use the
                      <a href="#issue-identifier">Issue Identifier algorithm</a>,
                      passing <var>issuer copy</var> and <var>related</var>; append the string <code>_:</code>, followed by
                      the result, to <var>path</var>.</li>
                    <li id="hndq.5.4.5.3">Append <code>&lt;</code>, the <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-18">hash</a> in
                      <var>result</var>, and <code>&gt;</code> to <var>path</var>.</li>
                    <li id="hndq.5.4.5.4">Set <var>issuer copy</var> to the
                      <a href="#dfn-identifier-issuer" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-identifier-issuer-11">identifier issuer</a> in result.</li>
                    <li id="hndq.5.4.5.5">If <var>chosen path</var> is not empty and the length
                      of <var>path</var> is greater than or equal to the length
                      of <var>chosen path</var> and <var>path</var> is
                      greater than <var>chosen path</var> when considering <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-15">code point order</a>,
                      then skip to the next <var>p</var>.
                      <details>
                        <summary>Explanation</summary>
                        <p>If <var>path</var> is already longer than
                          the prospective <var>chosen path</var>,
                          we can terminate this iteration early.</p>
                      </details>
                    </li>
                  </ol>
                </li>
                <li id="hndq.5.4.6">If <var>chosen path</var> is empty or <var>path</var> is
                  less than <var>chosen path</var> when considering <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-16">code point order</a>,
                  set <var>chosen path</var> to <var>path</var> and <var>chosen issuer</var>
                  to <var>issuer copy</var>.
                </li>
              </ol>
            </li>
            <li id="hndq.5.5">Append <var>chosen path</var> to <var>data to hash</var>.
              <details>
                <summary>Logging</summary>
                <p>Log <var>chosen path</var> and <var>data to hash</var>.</p>
                <pre class="logging yaml nohighlight"># Log chosen path and data to hash logs of step 5.5 using double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.5:
    log point: Hash N-Degree Quads function (4.8.3 (5)), entering loop.
    with:
    - related_hash: 1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d
      data_to_hash: ""
      <span class="comment">...</span>
      hndq.5.5:
        log point: Hash N-Degree Quads function (4.8.3 (5.5). End of current loop with Hn hashes.
        chosen path: "_:b1_:b1&lt;1ae899f76e760eb7caf6656437aaef845b50887aff7baeb3531add85ec02ed35&gt;"
        data to hash: "1e4e55ba02b8b0b527c32e2343fbcfee2e2bd9c1972c67cc01f85fabde7bc42d_:b1_:b1&lt;1ae899f76e760eb7caf6656437aaef845b50887aff7baeb3531add85ec02ed35&gt;"
      <span class="comment">...</span></pre>
              </details>
            </li>
            <li id="hndq.5.6">Replace <var>issuer</var>, by reference, with<var>chosen issuer</var>.</li>
          </ol>
        </li>
        <li id="hndq.6">Return <var>issuer</var> and the <a href="#dfn-hash" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-19">hash</a> that results from
          passing <var>data to hash</var> through the
          <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-6">hash algorithm</a>.
          <details>
            <summary>Logging</summary>
            <p>Log <var>issuer</var> and results from passing <var>data to hash</var>
              through the <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-7">hash algorithm</a>.</p>
            <pre class="logging yaml nohighlight"># Log issuer and resulting hash of step 6 using double circle example.
hndq:
  log point: Hash N-Degree Quads function (4.8.3).
  identifier: e0
  issuer: {e0: b0}
  <span class="comment">...</span>
  hndq.6:
    log point: Leaving Hash N-Degree Quads function (4.8.3).
    hash: e332b4b59e1c4794ee72a4df0f63723326ffb6d6a5c0d0cb4d2dd8d8d5ebf5a4
    issuer: {e0: b0, e1: b1}</pre>
          </details>
        </li>
      </ol>
    </section>
  </section>
</section>

<section id="serialization"><div class="header-wrapper"><h2 id="x5-serialization"><bdi class="secno">5. </bdi>Serialization</h2><a class="self-link" href="#serialization" aria-label="Permalink for Section 5."></a></div>
  

  <p>This section describes the process of creating a serialized [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-Quads</a></cite>] representation
    of a <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-18">canonicalized dataset</a>.</p>

  <p>The <dfn id="dfn-serialized-canonical-form" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">serialized canonical form</dfn> of a <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-19">canonicalized dataset</a>
    is an N-Quads document [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-QUADS</a></cite>]
    created by representing each <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-20">quad</a> from the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-20">canonicalized dataset</a>
    in <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-10">canonical n-quads form</a>,
    sorting them into <a data-link-type="dfn" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="ref-for-index-term-unicode-code-point-order-17">code point order</a>,
    and concatenating them. (Note that each canonical N-Quads statement ends with a new line, 
    so no additional separators are needed in the concatenation.)
    The resulting document has a media type of <code>application/n-quads</code>,
    as described in <a href="https://www.w3.org/TR/n-quads/#sec-mediaReg" id="ref-for-index-term-c-n-quads-internet-media-type-file-extension-and-macintosh-file-type-1">C. N-Quads Internet Media Type, File Extension and Macintosh File Type</a>
    of [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-QUADS</a></cite>].</p>

  <p>When serializing quads in <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-11">canonical n-quads form</a>,
    components which are <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-30">blank nodes</a> <em class="rfc2119">MUST</em> be serialized using the
    canonical label associated with each <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-31">blank node</a>
    from the <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-14">issued identifiers map</a> component of the
    <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-21">canonicalized dataset</a>.</p>

  <aside id="ex-ser-unique-hashes" class="example"><div class="marker">
    <a class="self-link" href="#ex-ser-unique-hashes">Example<bdi> 8</bdi></a><span class="example-title">: Canonical N-Quads representation of Unique Hashes</span>
  </div>

    <p>This example illustrates the result of serializing
      the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-22">canonicalized dataset</a> described in <a href="#ex-ca-unique-hashes" class="box-ref">Example<bdi> 2</bdi></a>.</p>

    <pre id="ex-ser-unique-hashes-result" class="nohighlight" title="Canonical N-Quads representation of Unique Hashes">&lt;http://example.com/p&gt; &lt;http://example.com/q&gt; _:c14n0 .
&lt;http://example.com/p&gt; &lt;http://example.com/r&gt; _:c14n1 .
_:c14n0 &lt;http://example.com/s&gt; &lt;http://example.com/u&gt; .
_:c14n1 &lt;http://example.com/t&gt; &lt;http://example.com/u&gt; .</pre>
  </aside>
</section>

<section id="privacy-considerations" class="informative"><div class="header-wrapper"><h2 id="x6-privacy-considerations"><bdi class="secno">6. </bdi>Privacy Considerations</h2><a class="self-link" href="#privacy-considerations" aria-label="Permalink for Section 6."></a></div><p><em>This section is non-normative.</em></p>
  

    <p>The nature of the canonicalization algorithm inherently correlates its output,
      i.e., the canonical labels and the sorted order of quads, with the input dataset.
      This could pose issues, particularly when dealing with datasets containing personal information.
      For example, even if certain information is removed from the <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-23">canonicalized dataset</a>
      for some privacy-respecting reason, there remains the possibility that a third party
      could infer the omitted data by analyzing the canonicalized dataset.
      If it is necessary to decouple the canonicalization algorithm's input and output,
      some suitable post-processing methods for the output of the canonicalization should be performed.
      This specification has been designed to help make additional processing easier, but
      other specifications that build on top of this one are responsible for providing any
      specific details.
      See <a href="https://www.w3.org/TR/vc-data-integrity/#selective-disclosure" id="ref-for-index-term-selective-disclosure-1">Selective Disclosure</a>
      in <cite><a data-matched-text="[[[VC-DATA-INTEGRITY]]]" href="https://www.w3.org/TR/vc-data-integrity/">Verifiable Credential Data Integrity 1.0</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-vc-data-integrity" title="Verifiable Credential Data Integrity 1.0">VC-DATA-INTEGRITY</a></cite>] for more details about such
      post-processing methods.
    </p>
</section>

<section id="security-considerations" class="informative"><div class="header-wrapper"><h2 id="x7-security-considerations"><bdi class="secno">7. </bdi>Security Considerations</h2><a class="self-link" href="#security-considerations" aria-label="Permalink for Section 7."></a></div><p><em>This section is non-normative.</em></p>
  

  <section id="dataset-poisoning" class="informative"><div class="header-wrapper"><h3 id="x7-1-dataset-poisoning"><bdi class="secno">7.1 </bdi>Dataset Poisoning</h3><a class="self-link" href="#dataset-poisoning" aria-label="Permalink for Section 7.1"></a></div><p><em>This section is non-normative.</em></p>
    

    <p>The canonicalization algorithm examines every difference in the
      information connected to blank nodes in order to ensure that each will
      properly receive its own canonical identifier. This process can be
      exploited by attackers to construct datasets which are known to take
      large amounts of computing time to canonicalize, but that do not express
      useful information or express it using unnecessary complexity.
      Implementers of the algorithm are expected to add mitigations that will,
      by default, abort canonicalizing problematic inputs.
    </p>
    <p>Suggested mitigations include, but are not limited to:</p>
    <ul>
      <li>providing a configurable timeout with a default value applicable to
        an implementation's common use</li>
      <li>providing a configurable limit on the number of iterations of steps
        performed in the algorithm, particularly recursive steps
        and permutations of long lists</li>
    </ul>

    <p>Additionally, software that uses implementations of the algorithm can
      employ best-practice schema validation to reject data that does not meet
      application requirements, thereby preventing useless poison datasets from
      being processed. However, such mitigations are application specific and
      not directly applicable to implementers of the canonicalization algorithm
      itself.
    </p>
  </section>

  <section id="insecure-hash-algorithms" class="informative"><div class="header-wrapper"><h3 id="x7-2-insecure-hash-algorithms"><bdi class="secno">7.2 </bdi>Insecure Hash Algorithms</h3><a class="self-link" href="#insecure-hash-algorithms" aria-label="Permalink for Section 7.2"></a></div><p><em>This section is non-normative.</em></p>
    

    <p>It is possible that the default <a href="#dfn-hash-algorithm" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-hash-algorithm-8">hash algorithm</a> used by <abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr> might become
      insecure at some point in the future. To mitigate this, this algorithm
      and implementations of it can be parameterized to use a different
      hash function, without the need to make any changes to the
      canonicalization algorithm itself.
      However, using a different hash algorithm will generally lead to different results;
      applications making use of this specification should carefully weigh the advantages
      and disadvantages of using an alternative hash function.
    </p>

    <div class="note" role="note" id="issue-container-generatedID-12"><div role="heading" class="note-title marker" id="h-note-12" aria-level="4"><span>Note</span></div><p class="">The possible implications of the default hash algorithm
      becoming insecure are mitigated by that fact that no internal hash
      values are revealed, and the canonicalization algorithm is designed to cope
      with first-degree hash collisions.</p></div>
  </section>

</section>

<section id="use-cases" class="informative"><div class="header-wrapper"><h2 id="x8-use-cases"><bdi class="secno">8. </bdi>Use Cases</h2><a class="self-link" href="#use-cases" aria-label="Permalink for Section 8."></a></div><p><em>This section is non-normative.</em></p>
  
  <p>The use cases that have driven the development of the RDF Dataset Canonicalization algorithm are documented in a separate document. It includes further background and explanations for the design decisions taken [<cite><a class="bibref" data-link-type="biblio" href="#bib-rch-explainer" title="RDF Dataset Canonicalization and Hash Working Group — Explainer and Use Cases">RCH-EXPLAINER</a></cite>].</p>
</section>

<section id="examples" class="informative"><div class="header-wrapper"><h2 id="x9-examples"><bdi class="secno">9. </bdi>Examples</h2><a class="self-link" href="#examples" aria-label="Permalink for Section 9."></a></div><p><em>This section is non-normative.</em></p>
  

  <section id="duplicate-paths-ex"><div class="header-wrapper"><h3 id="x9-1-duplicate-paths"><bdi class="secno">9.1 </bdi>Duplicate Paths</h3><a class="self-link" href="#duplicate-paths-ex" aria-label="Permalink for Section 9.1"></a></div>
    

    <p>This example illustrates a more complicated example where the same paths
      through blank nodes are duplicated in a graph, but use different
      <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-41">blank node identifiers</a>.</p>

    <figure id="fig-duplicate-paths" style="text-align:center">
      
      <object data="duplicate-paths.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-duplicate-paths-alt">
        <p id="fig-duplicate-paths-alt">
          The image represents the graph described in
          <a href="#ex-duplicate-paths-input">
            the following code block
          </a>.</p>
      </object>
      <figcaption><a class="self-link" href="#fig-duplicate-paths">Figure <bdi class="figno">7</bdi></a> <span class="fig-title">An illustration of a graph with duplicated paths.<br>
        Image available in
        <a href="duplicate-paths.svg" title="SVG image of duplicated paths">
          <abbr title="Scalable Vector Graphics">SVG</abbr>
        </a>.</span></figcaption>
    </figure>

    <pre id="ex-duplicate-paths-input" title="Graph with duplicated paths" aria-busy="false"><code class="hljs css">_:e0 :p1 _:e1 .
_:e1 :p2 <span class="hljs-string">"Foo"</span> .
_:e2 :p1 _:e3 .
_:e3 :p2 <span class="hljs-string">"Foo"</span> .</code></pre>

    <p>The following is a summary of the more detailed execution log
      found <a href="duplicate-paths.yml">here</a>.</p>

    <aside id="ex-duplicate-paths" class="example"><div class="marker">
    <a class="self-link" href="#ex-duplicate-paths">Example<bdi> 9</bdi></a><span class="example-title">: Duplicate Paths</span>
  </div>

      <p><a href="#ca.2">Step 2</a> of the <a href="#canon-algo-algo">Canonicalization Algorithm</a>
        is called four times, with each blank node
        (<code><em>e0</em></code>, <code><em>e1</em></code>, <code><em>e2</em></code>, and <code><em>e3</em></code>)
        to populate <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-12">blank node to quads map</a>:</p>

      <table id="ex-duplicate-paths-quads-map" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-quads-map">Table <bdi class="tableno">19</bdi></a> <span class="table-title">Blank node to quads map for duplicate paths</span></caption>
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>Q</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code><em>e0</em></code></td>
            <td>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;.</code><br>
            </td>
          </tr>
          <tr>
            <td><code><em>e1</em></code></td>
            <td>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;.</code><br>
              <code><em>_:e1</em>&nbsp;:p2&nbsp;"Foo"&nbsp;.</code><br>
            </td>
          </tr>
          <tr>
            <td><code><em>e2</em></code></td>
            <td>
              <code><em>_:e2</em>&nbsp;:p1&nbsp;<em>_:e3</em>&nbsp;.</code><br>
            </td>
          </tr>
          <tr>
            <td><code><em>e3</em></code></td>
            <td>
              <code><em>_:e2</em>&nbsp;:p1&nbsp;<em>_:e3</em>&nbsp;.</code><br>
              <code><em>_:e3</em>&nbsp;:p2&nbsp;"Foo"&nbsp;.</code><br>
            </td>
          </tr>
        </tbody>
      </table>

      <p><a href="#ca.3">Step 3</a> generates the first-degree
        hash for each blank node.</p>

      <p>For <code><em>e0</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquad <code>_:a&nbsp;:p1&nbsp;_:z&nbsp;.</code> to calculate the hash
        <code>24da9a4406b4e66dffa10ad3d4d6dddc388fbf193bb124e865158ef419893957</code>.</p>

      <p>For <code><em>e1</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquads <code>_:z&nbsp;:p1&nbsp;_:a&nbsp;.</code> and <code>_:a&nbsp;:p2&nbsp;"Foo"&nbsp;.</code>
        to calculate the hash
        <code>a994e40b576809985bc0f389308cd9d552fd7c89d028c163848a6b2d33a8583a</code>.</p>

      <p>For <code><em>e2</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquad <code>_:a&nbsp;:p1&nbsp;_:z&nbsp;.</code>
        to calculate the hash
        <code>24da9a4406b4e66dffa10ad3d4d6dddc388fbf193bb124e865158ef419893957</code>.</p>

      <p>For <code><em>e3</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquads <code>_:z&nbsp;:p1&nbsp;_:a&nbsp;.</code> and <code>_:a&nbsp;:p2&nbsp;"Foo"&nbsp;.</code>
        to calculate the hash
        <code>a994e40b576809985bc0f389308cd9d552fd7c89d028c163848a6b2d33a8583a</code>.</p>

      <table id="ex-duplicate-paths-ca.3" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-ca.3">Table <bdi class="tableno">20</bdi></a> <span class="table-title">Hash to blank nodes map shared hashes</span></caption>
        <thead><tr>
          <th><var>hash</var></th>
          <th><var>blank node(s)</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code>24da9a4406b4e66dffa10ad3d4d6dddc388fbf193bb124e865158ef419893957</code></td>
            <td><code><em>e0</em></code> and <code><em>e2</em></code></td>
          </tr>
          <tr>
            <td><code>a994e40b576809985bc0f389308cd9d552fd7c89d028c163848a6b2d33a8583a</code></td>
            <td><code><em>e1</em></code> and <code><em>e3</em></code></td>
          </tr>
        </tbody>
      </table>

      <p><a href="#ca.4">Step 4</a> would create canonical identifiers for each
        blank node which has a unique hash, but no blank node has a unique hash.</p>

      <p><a href="#ca.5">Step 5</a> is run on <code><em>e0</em></code>, <code><em>e1</em></code>, <code><em>e2</em></code>, and <code><em>e3</em></code>, separately,
        which share hash values.
        each use separate instances of a <var>temporary issuer</var>,
        to create the <var>hash path list</var>
        composed of the hash result
        and temporary identifier mappings from
        <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a>
        for each of these blank nodes/</p>

      <p>The <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a> is first
        called for hash <code>24da9a4406b4e66dffa10ad3d4d6dddc388fbf193bb124e865158ef419893957</code>
        and blank node <code><em>e0</em></code> related to
        the nquad <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;.</code>.</p>

      <table id="ex-duplicate-paths-hndq-e0-issuer">
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>temporary identifier</var></th>
        </tr></thead>
        <tbody>
          <tr><td><code><em>e0</em></code></td><td><code><em>b0</em></code></td></tr>
        </tbody>
      </table>

      <p><a href="#hndq.3">Step 3</a> calls the <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>
        for each position in this quad:</p>

      <table id="ex-duplicate-paths-table-related-hash-e0" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-table-related-hash-e0">Table <bdi class="tableno">21</bdi></a> <span class="table-title">Hash for <code><em>e2</em></code>  related to <code><em>e0</em></code></span></caption>
        <thead><tr>
          <th><var>related</var></th>
          <th><var>quads</var></th>
          <th><var>position</var></th>
          <th><var>hash</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code><em>e3</em></code></td>
            <td><code><em>z</em> :p1 <em>a</em> .</code><br><code><em>a</em> :p2 "Foo" .</code></td>
            <td><code>o</code></td>
            <td>
              <code><abbr title="a994e40b576809985bc0f389308cd9d552fd7c89d028c163848a6b2d33a8583a">a994e40b57...2d33a8583a</abbr></code></td>
          </tr>
        </tbody>
      </table>

      <p>which results in the following <var>H<sub>n</sub></var>:</p>

      <table id="ex-duplicate-paths-bn-list-e0" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-bn-list-e0">Table <bdi class="tableno">22</bdi></a> <span class="table-title">Blank node list for hash</span></caption>
        <thead><tr>
          <th><var>related hash</var></th>
          <th><var>blank node list</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code>a994e40b576809985bc0f389308cd9d552fd7c89d028c163848a6b2d33a8583a</code></td>
            <td><code>[ <em>e3</em> ]</code></td>
          </tr>
        </tbody>
      </table>

      <p><a href="#hndq.5">Step 5</a> iterates over each <var>related hash</var>
        which is a key in <var>H<sub>n</sub></var>,
        which can have one or more related blank nodes.</p>

      <p>At <a href="#hndq.5.4.5">Step 5.4.5</a>, the <var>recursion list</var> is <code>[ <em>e3</em> ]</code>,
        so the <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a> is
        called recursively resulting in the following:</p>

      <table id="ex-duplicate-paths-result-e2-e3" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-result-e2-e3">Table <bdi class="tableno">23</bdi></a> <span class="table-title">Result for <code><em>e3</em></code></span></caption>
        <tbody>
          <tr>
            <td><var>temporary issuer</var> mappings</td>
            <td>
              <table class="hash-related">
                <thead><tr>
                  <th><var>original identifier</var></th>
                  <th><var>temporary identifier</var></th>
                </tr></thead>
                <tbody>
                  <tr><td><code><em>e2</em></code></td><td><code><em>b0</em></code></td></tr>
                  <tr><td><code><em>e3</em></code></td><td><code><em>b1</em></code></td></tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td><var>hash</var></td>
            <td><code>c484f98e6cbf9e21f287433c8b1caa7f1486fd61d84ab220a494bf8184751b8c</code></td>
          </tr>
        </tbody>
      </table>

      <p>Back in <a href="#hndq.5.4.5.4">step 5.4.5.4</a>, the <var>path</var> and <var>issuer copy</var> are:
        <code>_:b1_:b1&lt;c484f98e6cbf9e21f287433c8b1caa7f1486fd61d84ab220a494bf8184751b8c&gt;</code>
        and <code>{<em>e2</em>: <em>b0</em>, <em>e3</em>: <em>b1</em>}</code>.</p>

      <p>This results in the <var>chosen path</var> <code>_:b1_:b1&lt;c484f98e6cbf9e21f287433c8b1caa7f1486fd61d84ab220a494bf8184751b8c&gt;</code>
        and <var>data to hash</var> <code>3d96946f27fc34a78e8d067135a1cb1b77083aebc4b2c6cbdc536f067242686c_:b1_:b1&lt;c484f98e6cbf9e21f287433c8b1caa7f1486fd61d84ab220a494bf8184751b8c&gt;</code>

      </p><table id="ex-duplicate-paths-result-e0" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-result-e0">Table <bdi class="tableno">24</bdi></a> <span class="table-title">Result for <code><em>e2</em></code></span></caption>
        <tbody>
          <tr>
            <td><var>temporary issuer</var> mappings</td>
            <td>
              <table class="hash-related">
                <thead><tr>
                  <th><var>original identifier</var></th>
                  <th><var>temporary identifier</var></th>
                </tr></thead>
                <tbody>
                  <tr><td><code><em>e2</em></code></td><td><code><em>b0</em></code></td></tr>
                  <tr><td><code><em>e3</em></code></td><td><code><em>b1</em></code></td></tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td><var>hash</var></td>
            <td><code>39d609fcd8236b74c70744f492cd2baaf0a55765b380ff9e0811ce23e2f409d7</code></td>
          </tr>
        </tbody>
      </table>

      <p>The <a href="#hash-nd-quads">Hash N-Degree Quads algorithm</a> is next
        called for the same hash <code>24da9a4406b4e66dffa10ad3d4d6dddc388fbf193bb124e865158ef419893957</code>
        but this time with blank node <code><em>e2</em></code> related to
        the nquad <code><em>_:e2</em>&nbsp;:p1&nbsp;<em>_:e3</em>&nbsp;.</code>.</p>

      <table id="ex-duplicate-paths-hndq-e2-issuer">
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>temporary identifier</var></th>
        </tr></thead>
        <tbody>
          <tr><td><code><em>e2</em></code></td><td><code><em>b0</em></code></td></tr>
        </tbody>
      </table>

      <p><a href="#hndq.3">Step 3</a> calls the <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>
        for each position in this quad:</p>

      <table id="ex-duplicate-paths-table-related-hash-e2" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-table-related-hash-e2">Table <bdi class="tableno">25</bdi></a> <span class="table-title">Hash for <code><em>e2</em></code> related to <code><em>e0</em></code></span></caption>
        <thead><tr>
          <th><var>related</var></th>
          <th><var>quads</var></th>
          <th><var>position</var></th>
          <th><var>hash</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code><em>e3</em></code></td>
            <td><code><em>z</em> :p1 <em>a</em> .</code><br><code><em>a</em> :p2 "Foo" .</code></td>
            <td><code>o</code></td>
            <td>
              <code><abbr title="3d96946f27fc34a78e8d067135a1cb1b77083aebc4b2c6cbdc536f067242686c">3d96946f27...184751b8c</abbr></code></td>
          </tr>
        </tbody>
      </table>

      <p>which results in the following <var>H<sub>n</sub></var>:</p>

      <table id="ex-duplicate-paths-bn-list-e2" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-bn-list-e2">Table <bdi class="tableno">26</bdi></a> <span class="table-title">Blank node list for hash</span></caption>
        <thead><tr>
          <th><var>related hash</var></th>
          <th><var>blank node list</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code>3d96946f27fc34a78e8d067135a1cb1b77083aebc4b2c6cbdc536f067242686c</code></td>
            <td><code>[ <em>e3</em> ]</code></td>
          </tr>
        </tbody>
      </table>

      <p><a href="#hndq.5">Step 5</a> iterates over each <var>related hash</var>
        which is a key in <var>H<sub>n</sub></var>,
        which can have one or more related blank nodes.</p>

      <table id="ex-duplicate-paths-result-e2" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-duplicate-paths-result-e2">Table <bdi class="tableno">27</bdi></a> <span class="table-title">Result for <code><em>e0</em></code></span></caption>
        <tbody>
          <tr>
            <td><var>temporary issuer</var> mappings</td>
            <td>
              <table class="hash-related">
                <thead><tr>
                  <th><var>original identifier</var></th>
                  <th><var>temporary identifier</var></th>
                </tr></thead>
                <tbody>
                  <tr><td><code><em>e0</em></code></td><td><code><em>b0</em></code></td></tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td><var>hash</var></td>
            <td><code>fbc300de5afafd97a4b9ee1e72b57754dcdcb7ebb724789ac6a94a5b82a48d30</code></td>
          </tr>
        </tbody>
      </table>

      <p><a href="#ca.5.3">Step 5.3</a> back in the <a href="#canon-algo-algo">Canonicalization Algorithm</a>
        creates canonical identifiers for the temporary identifiers just issued:</p>

      <table id="ex-duplicate-paths-ca.5.3-e0-canon">
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>canonical identifier</var></th>
        </tr></thead>
        <tbody>
          <tr><td><code><em>e0</em></code></td><td><code><em>c14n0</em></code></td></tr>
          <tr><td><code><em>e1</em></code></td><td><code><em>c14n1</em></code></td></tr>
          <tr><td><code><em>e2</em></code></td><td><code><em>c14n2</em></code></td></tr>
          <tr><td><code><em>e3</em></code></td><td><code><em>c14n3</em></code></td></tr>
        </tbody>
      </table>

      <p>Next, back in <a href="#ca.5.1">step 5.1</a>,
        now using hash <code>a994e40b576809985bc0f389308cd9d552fd7c89d028c163848a6b2d33a8583a</code>,
        canonical identifiers have already been created for the
        two blank nodes <code><em>e1</em></code> and <code><em>e3</em></code>,
        so no further processing is necessary.</p>

      <p><a href="#ca.6">Step 6</a> ends with the issued identifiers map containing the following mappings:</p>

      <table id="ex-duplicate-paths-ca.5.6">
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>canonical identifier</var></th>
        </tr></thead>
        <tbody>
          <tr><td><code><em>e0</em></code></td><td><code><em>c14n0</em></code></td></tr>
          <tr><td><code><em>e1</em></code></td><td><code><em>c14n1</em></code></td></tr>
          <tr><td><code><em>e2</em></code></td><td><code><em>c14n2</em></code></td></tr>
          <tr><td><code><em>e3</em></code></td><td><code><em>c14n3</em></code></td></tr>
        </tbody>
      </table>
    </aside>
  </section>

  <section id="double-circle-ex"><div class="header-wrapper"><h3 id="x9-2-double-circle"><bdi class="secno">9.2 </bdi>Double Circle</h3><a class="self-link" href="#double-circle-ex" aria-label="Permalink for Section 9.2"></a></div>
    

    <p>This example illustrates another complicated example of
      nodes that are doubly connected in opposite directions.</p>

    <figure id="fig-double-circle" style="text-align:center">
      
      <object data="double-circle.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-double-circle-alt">
        <p id="fig-double-circle-alt">
          The image represents the graph described in
          <a href="#ex-double-circle-input">
            the following code block
          </a>.</p>
      </object>
      <figcaption><a class="self-link" href="#fig-double-circle">Figure <bdi class="figno">8</bdi></a> <span class="fig-title">An illustration of a graph back and forth links to nodes.<br>
        Image available in
        <a href="double-circle.svg" title="SVG image of double circle">
          <abbr title="Scalable Vector Graphics">SVG</abbr>
        </a>.</span></figcaption>
    </figure>

    <pre id="ex-double-circle-input" title="Graph with a double circle" aria-busy="false"><code class="hljs">_:e0 :next _:e1 .
_:e0 :prev _:e1 .
_:e1 :next _:e0 .
_:e1 :prev _:e0 .</code></pre>

    <p>The example is not explored in detail, but the
      execution log found <a href="double-circle.yml">here</a>
      shows examples of more complicated
      pathways through the algorithm</p>

  </section>

  <section id="dataset-bn-graph-ex"><div class="header-wrapper"><h3 id="x9-3-dataset-with-blank-node-named-graph"><bdi class="secno">9.3 </bdi>Dataset with Blank Node Named Graph</h3><a class="self-link" href="#dataset-bn-graph-ex" aria-label="Permalink for Section 9.3"></a></div>
    

    <p>This example illustrates an example of a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="ref-for-index-term-rdf-datasets-20">dataset</a>,
      where one graph is named using a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-32">blank node</a>,
      which is also the object of a triple in the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph" id="ref-for-index-term-default-graph-4">default graph</a>.</p>

    <figure id="fig-dataset-bn-graph" style="text-align:center">
      
      <object data="dataset-bn-graph.svg" style="width: 75%" type="image/svg+xml" aria-describedby="fig-dataset-bn-graph-alt">
        <p id="fig-dataset-bn-graph-alt">
          The image represents the dataset described in
          <a href="#ex-dataset-bn-graph-input">
            the following code block
          </a>.</p>
      </object>
      <figcaption><a class="self-link" href="#fig-dataset-bn-graph">Figure <bdi class="figno">9</bdi></a> <span class="fig-title">An illustration of a dataset containing a graph named with a blank node.<br>
        Image available in
        <a href="dataset-bn-graph.svg" title="SVG image of dataset containg a graph named with a blank node">
          <abbr title="Scalable Vector Graphics">SVG</abbr>
        </a>.</span></figcaption>
    </figure>

    <pre id="ex-dataset-bn-graph-input" title="Graph with duplicated paths" aria-busy="false"><code class="hljs css">_:e0 :p1 _:e1 .
_:e1 :p2 <span class="hljs-string">"Foo"</span> .
_:e1 :p3 _:g0 .
_:e0 :p1 _:e1 _:g0 .
_:e1 :p2 <span class="hljs-string">"Bar"</span> _:g0 .</code></pre>

    <p>The following is a summary of the more detailed execution log
      found <a href="dataset-bn-graph.yml">here</a>.</p>

    <aside id="ex-dataset-bn-graph" class="example"><div class="marker">
    <a class="self-link" href="#ex-dataset-bn-graph">Example<bdi> 10</bdi></a><span class="example-title">: Dataset Blank Node Graph</span>
  </div>

      <p><a href="#ca.2">Step 2</a> of the <a href="#canon-algo-algo">Canonicalization Algorithm</a>
        is called three times, with each blank node
        (<code><em>e0</em></code>, <code><em>e1</em></code>, and <code><em>g0</em></code>)
        to populate <a href="#dfn-blank-node-to-quads-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-blank-node-to-quads-map-13">blank node to quads map</a>:</p>

      <table id="ex-dataset-bn-graph-quads-map" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-dataset-bn-graph-quads-map">Table <bdi class="tableno">28</bdi></a> <span class="table-title">Blank node to quads map for dataset with blank node named graph</span></caption>
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>Q</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code><em>e0</em></code></td>
            <td>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;.</code><br>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;<em>_:g0</em>&nbsp;.</code><br>
            </td>
          </tr>
          <tr>
            <td><code><em>e1</em></code></td>
            <td>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;.</code><br>
              <code><em>_:e1</em>&nbsp;:p2&nbsp;"Foo"&nbsp;.</code><br>
              <code><em>_:e1</em>&nbsp;:p3&nbsp;<em>_:g0</em>&nbsp;.</code><br>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;<em>_:g0</em>&nbsp;.</code><br>
              <code><em>_:e1</em>&nbsp;:p2&nbsp;"Bar"&nbsp;<em>_:g0</em>&nbsp;.</code><br>
            </td>
          </tr>
          <tr>
            <td><code><em>g0</em></code></td>
            <td>
              <code><em>_:e1</em>&nbsp;:p3&nbsp;<em>_:g0</em>&nbsp;.</code><br>
              <code><em>_:e0</em>&nbsp;:p1&nbsp;<em>_:e1</em>&nbsp;<em>_:g0</em>&nbsp;.</code><br>
              <code><em>_:e1</em>&nbsp;:p2&nbsp;"Bar"&nbsp;<em>_:g0</em>&nbsp;.</code><br>
            </td>
          </tr>
        </tbody>
      </table>

      <p><a href="#ca.3">Step 3</a> generates the first-degree
        hash for each blank node.</p>

      <p>For <code><em>e0</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquads <code>_:a&nbsp;:p1&nbsp;_:z&nbsp;.</code> and
        <code>_:a&nbsp;:p1&nbsp;_:z&nbsp;_:z&nbsp;.</code>to calculate the hash
        <code>39fa92e7a9ea0b32e3e08aedebc1cbbcd9ba9945a18f2594677598fcfb517345</code>.</p>

      <p>For <code><em>e1</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquads <code>_:z&nbsp;:p1&nbsp;_:a&nbsp;.</code>,
        <code>_:a&nbsp;:p2&nbsp;"Foo"&nbsp;.</code>,
        <code>_:a&nbsp;:p3&nbsp;_:z&nbsp;.</code>,
        <code>_:z&nbsp;:p1&nbsp;_:a&nbsp;_:z&nbsp;.</code>, and
        <code>_:a&nbsp;:p2&nbsp;"Bar"&nbsp;_:z&nbsp;.</code>
        to calculate the hash
        <code>5274652aa97d22f9f2998d1837ffaf9ad820fb813574adc4a403f105021e48bf</code>.</p>

      <p>For <code><em>g0</em></code>, the <a href="#h1dq">Hash First Degree Quads algorithm</a>
        uses the nquads <code>_:z&nbsp;:p3&nbsp;_:a&nbsp;.</code>,
        <code>_:z&nbsp;:p1&nbsp;_:z&nbsp;_:a&nbsp;.</code>, and
        <code>_:z&nbsp;:p2&nbsp;"Bar"&nbsp;_:a&nbsp;.</code>
        to calculate the hash
        <code>efb0096125247801199082c6f213cda5377d8ddac20a83eaf6c7d88335c12bf4</code>.</p>

      <table id="ex-dataset-bn-graph-ca.3" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-dataset-bn-graph-ca.3">Table <bdi class="tableno">29</bdi></a> <span class="table-title">Hash to blank nodes map shared hashes</span></caption>
        <thead><tr>
          <th><var>hash</var></th>
          <th><var>blank node(s)</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code>39fa92e7a9ea0b32e3e08aedebc1cbbcd9ba9945a18f2594677598fcfb517345</code></td>
            <td><code><em>e0</em></code></td>
          </tr>
          <tr>
            <td><code>5274652aa97d22f9f2998d1837ffaf9ad820fb813574adc4a403f105021e48bf</code></td>
            <td><code><em>e1</em></code></td>
          </tr>
          <tr>
            <td><code>efb0096125247801199082c6f213cda5377d8ddac20a83eaf6c7d88335c12bf4</code></td>
            <td><code><em>g0</em></code></td>
          </tr>
        </tbody>
      </table>

      <p><a href="#ca.4">Step 4</a> creates canonical identifiers for each
        blank node which has a unique hash:</p>
        
      <table id="ex-dataset-bn-graph-ca.4" class="hash-related numbered">
        <caption><a class="self-link" href="#ex-dataset-bn-graph-ca.4">Table <bdi class="tableno">30</bdi></a> <span class="table-title">Canonical identifiers for dataset with blank node named graph</span></caption>
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>canonical identifier</var></th>
        </tr></thead>
        <tbody>
          <tr>
            <td><code><em>e0</em></code></td>
            <td><code><em>c14n0</em></code></td>
          </tr>
          <tr>
            <td><code><em>e1</em></code></td>
            <td><code><em>c14n1</em></code></td>
          </tr>
          <tr>
            <td><code><em>g0</em></code></td>
            <td><code><em>c14n2</em></code></td>
          </tr>
        </tbody>
      </table>

      <p><a href="#ca.5">Step 5</a> has no effect,
        as there are no remaining blank nodes without canonical identifiers.</p>

      <p><a href="#ca.6">Step 6</a> ends with the canonical issuers containing the following mappings:</p>

      <table id="ex-dataset-bn-graph-ca.5.6">
        <thead><tr>
          <th><var>blank node</var></th>
          <th><var>canonical identifier</var></th>
        </tr></thead>
        <tbody>
          <tr><td><code><em>e0</em></code></td><td><code><em>c14n0</em></code></td></tr>
          <tr><td><code><em>e1</em></code></td><td><code><em>c14n1</em></code></td></tr>
          <tr><td><code><em>g0</em></code></td><td><code><em>c14n2</em></code></td></tr>
        </tbody>
      </table>
    </aside>
  </section>
</section>

<section id="canonical-quads" class="appendix"><div class="header-wrapper"><h2 id="a-a-canonical-form-of-n-quads"><bdi class="secno">A. </bdi>A Canonical form of N-Quads</h2><a class="self-link" href="#canonical-quads" aria-label="Permalink for Appendix A."></a></div>
  

  <p>This section defines a canonical form of N-Quads which has
    a completely specified layout.
    The grammar for the language remains unchanged.</p>

  <p>Canonical N-Quads updates and extends
    <a href="https://www.w3.org/TR/n-triples/#canonical-ntriples" id="ref-for-index-term-canonical-n-triples-1">Canonical N-Triples</a> in [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples" title="RDF 1.1 N-Triples">N-TRIPLES</a></cite>]
    to include <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-graphLabel" id="ref-for-index-term-graphlabel-1">graphLabel</a></code>.</p>

  <p>While the N-Quads syntax [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-QUADS</a></cite>] allows choices for the representation and layout of RDF data,
    the canonical form of N-Quads provides a unique syntactic representation of any quad.
    Each code point
    can be represented by only one of
    <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-UCHAR" id="ref-for-index-term-uchar-1">UCHAR</a></code>,
    <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-ECHAR" id="ref-for-index-term-echar-1">ECHAR</a></code>,
    or unencoded character,
    where the relevant production allows for a choice in representation.
    Each quad is represented entirely on a single line with specified white space.</p>

  <p>Canonical N-Quads has the following additional constraints on layout:</p>
  <ul>
    <li>White space <em class="rfc2119">MUST NOT</em> be used except after
      <code>subject</code>,
      <code>predicate</code>, 
      <code>object</code>,
      and <code>graphLabel</code>,
      each of which <em class="rfc2119">MUST</em> be a single space (code point <code class="codepoint">U+0020</code>).</li>
    <li><a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal" id="ref-for-index-term-literal-0-3">Literals</a> with the
      datatype <code>http://www.w3.org/2001/XMLSchema#string</code>
      <em class="rfc2119">MUST NOT</em> use the datatype <abbr title="Internationalized Resource Identifier">IRI</abbr> part of the <a href="https://www.w3.org/TR/n-quads/#grammar-production-literal" id="ref-for-index-term-literal-1">literal</a>,
      and are represented using only <a href="https://www.w3.org/TR/n-quads/#grammar-production-STRING_LITERAL_QUOTE" id="ref-for-index-term-string_literal_quote-1">STRING_LITERAL_QUOTE</a>.
    </li>
    <li><code><a href="https://www.w3.org/TR/n-quads/#grammar-production-HEX" id="ref-for-index-term-hex-1">HEX</a></code> <em class="rfc2119">MUST</em> use only digits (<code>[0-9]</code>) and uppercase letters (<code>[A-F]</code>).</li>
    <li>Within <a href="https://www.w3.org/TR/n-quads/#grammar-production-STRING_LITERAL_QUOTE" id="ref-for-index-term-string_literal_quote-2">STRING_LITERAL_QUOTE</a>:
      <ul>
        <li>Characters
          <code>BS</code> (backspace, code point <code class="codepoint">U+0008</code>),
          <code>HT</code> (horizontal tab, code point <code class="codepoint">U+0009</code>),
          <code>LF</code> (line feed, code point <code class="codepoint">U+000A</code>),
          <code>FF</code> (form feed, code point <code class="codepoint">U+000C</code>),
          <code>CR</code> (carriage return, code point <code class="codepoint">U+000D</code>),
          <code>"</code> (quotation mark, code point <code class="codepoint">U+0022</code>), and
          <code>\</code> (backslash, code point <code class="codepoint">U+005C</code>)
          <em class="rfc2119">MUST</em> be encoded using <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-ECHAR" id="ref-for-index-term-echar-2">ECHAR</a></code>.</li>
        <li>Characters in the range from <code class="codepoint">U+0000</code> to <code class="codepoint">U+0007</code>,
          <code>VT</code> (vertical tab, code point <code class="codepoint">U+000B</code>),
          characters in the range from <code class="codepoint">U+000E</code> to <code class="codepoint">U+001F</code>,
          <code>DEL</code> (delete, code point <code class="codepoint">U+007F</code>),
          and characters not matching the <a href="https://www.w3.org/TR/xml11/#charsets" id="ref-for-index-term-char-1">Char</a> production from [<cite><a class="bibref" data-link-type="biblio" href="#bib-xml11" title="Extensible Markup Language (XML) 1.1 (Second Edition)">XML11</a></cite>]
          <em class="rfc2119">MUST</em> be represented by <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-UCHAR" id="ref-for-index-term-uchar-2">UCHAR</a></code>
          using a lowercase <code>\u</code> with 4 <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-HEX" id="ref-for-index-term-hex-2">HEX</a></code>es.</li>
        <li>All characters not required to be represented by
          <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-ECHAR" id="ref-for-index-term-echar-3">ECHAR</a></code> or
          <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-UCHAR" id="ref-for-index-term-uchar-3">UCHAR</a></code>
          <em class="rfc2119">MUST</em> be represented by their native [<cite><a class="bibref" data-link-type="biblio" href="#bib-unicode" title="The Unicode Standard">UNICODE</a></cite>] representation.</li>
      </ul>
     </li>
    <li>The token <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-EOL" id="ref-for-index-term-eol-1">EOL</a></code> <em class="rfc2119">MUST</em> be a single <code>LF</code> (line feed, code point <code class="codepoint">U+000A</code>).</li>
    <li>The final <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-EOL" id="ref-for-index-term-eol-2">EOL</a></code> <em class="rfc2119">MUST</em> be provided.</li>
  </ul>  
</section>

<section id="urdna2015" class="appendix informative"><div class="header-wrapper"><h2 id="b-urdna2015"><bdi class="secno">B. </bdi><abbr title="Universal RDF Dataset Normalization Algorithm 2015">URDNA2015</abbr></h2><a class="self-link" href="#urdna2015" aria-label="Permalink for Appendix B."></a></div><p><em>This section is non-normative.</em></p>
  

  <p><cite><a data-matched-text="[[[CCG-RDC-FINAL]]]" href="https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/">RDF Dataset Canonicalization</a></cite> [<cite><a class="bibref" data-link-type="biblio" href="#bib-ccg-rdc-final" title="RDF Dataset Canonicalization">CCG-RDC-FINAL</a></cite>] describes
    "Universal RDF Dataset Normalization Algorithm 2015"
    (<abbr title="Universal RDF Dataset Normalization Algorithm 2015"><dfn class="export" data-export="" id="dfn-urdna2015" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><abbr title="Universal RDF Dataset Normalization Algorithm 2015">URDNA2015</abbr></dfn></abbr>),
    essentially the same algorithm    
    as <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-15"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>, and generally implementations implementing <abbr title="Universal RDF Dataset Normalization Algorithm 2015">URDNA2015</abbr>
    should be compatible with this specification.
    The minor change is in the <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-12">canonical n-quads form</a> where
    some control characters were previously represented without escaping.
    The version of the algorithm defined in <a href="#canonical-quads" class="sectionRef sec-ref"><bdi class="secno">A. </bdi>A Canonical form of N-Quads</a>
    clarifies the representation of <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-simple-literal" id="ref-for-index-term-simple-literals-1">simple literals</a> and the characters
    within <a href="https://www.w3.org/TR/n-quads/#grammar-production-STRING_LITERAL_QUOTE" id="ref-for-index-term-string_literal_quote-3">STRING_LITERAL_QUOTE</a>
    that are encoded using <code><a href="https://www.w3.org/TR/n-quads/#grammar-production-ECHAR" id="ref-for-index-term-echar-4">ECHAR</a></code>.</p>
</section>

<section id="urgna2012" class="appendix informative algorithm"><div class="header-wrapper"><h2 id="c-urgna2012"><bdi class="secno">C. </bdi><abbr title="Universal RDF Graph Canonicalization Algorithm 2012">URGNA2012</abbr></h2><a class="self-link" href="#urgna2012" aria-label="Permalink for Appendix C."></a></div><p><em>This section is non-normative.</em></p>
  
  <p>A previous version of this algorithm has light deployment. For purposes of identification,
    the algorithm is called the
    "Universal RDF Graph Canonicalization Algorithm 2012"
    (<abbr title="Universal RDF Graph Canonicalization Algorithm 2012"><dfn class="export" data-export="" id="dfn-urgna2012" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn"><abbr title="Universal RDF Graph Canonicalization Algorithm 2012">URGNA2012</abbr></dfn></abbr>),
    and differs from the stated algorithm in the following ways:</p>
  <ul>
    <li>In <a href="#hash-1d-quads" class="sectionRef sec-ref"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a>, if any blank node was used in the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-9">graph name</a>
      position in the <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-21">quad</a>, then the value was serialized using
      the special <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-42">blank node identifier</a>, <code>g</code>, instead of <code>z</code>.</li>
    <li>In <a href="#hash-related-blank-node" class="sectionRef sec-ref"><bdi class="secno">4.7 </bdi>Hash Related Blank Node</a>, value of the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="ref-for-index-term-predicate-6">predicate</a>
      was not delimited by <code>&lt;</code> and <code>&gt;</code>; there
      were no delimiters.</li>
    <li>In <a href="#hash-nd-quads" class="sectionRef sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a>, the <var>position</var> parameter passed to
      the <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>
      was instead modeled as a <var>direction</var> parameter, where it could have
      the value <code>p</code>, for property, when the related blank node was a
      <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-8">subject</a> and the value <code>r</code>, for reverse or reference, when
      the related blank node was an <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-8">object</a>. Since <a href="#dfn-urgna2012" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-urgna2012-1"><abbr title="Universal RDF Graph Canonicalization Algorithm 2012">URGNA2012</abbr></a> only canonicalized
      graphs, not datasets, there was no use of the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="ref-for-index-term-graph-name-10">graph name</a> position.</li>
    <li>In <a href="#hash-nd-quads" class="sectionRef sec-ref"><bdi class="secno">4.8 </bdi>Hash N-Degree Quads</a>, building the
      <var>H<sub>n</sub></var> was done as follows:
      <ol>
        <li id="urgna-1">For each <var>quad</var> in <var>quads</var>:
          <ol>
            <li id="urgna-1-1">If the <var>quad</var>'s <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-9">subject</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-33">blank node</a> that does not
              match <var>identifier</var>, set <var>hash</var> to the result of the
                <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>,
                passing the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-43">blank node identifier</a> for
                <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-10">subject</a> as <var>related</var>, <var>quad</var>,
                <var>issuer</var>, and
                <code>p</code> as <var>position</var>.
            </li>
            <li id="urgna-1-2">Otherwise, if <var>quad</var>'s <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-9">object</a> is a <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="ref-for-index-term-blank-nodes-34">blank node</a> that does
              not match <var>identifier</var>, set <var>hash</var> to the result of the
                <a href="#hash-related-blank-node">Hash Related Blank Node algorithm</a>,
                passing the <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-44">blank node identifier</a> for
                <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-10">object</a> as <var>related</var>, <var>quad</var>,
                <var>issuer</var>, and
                <code>r</code> as <var>position</var>.
            </li>
            <li id="urgna-1-3">Otherwise, continue to the next quad.</li>
            <li id="urgna-1-4">Add a mapping of <var>hash</var> to the
              <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-45">blank node identifier</a> for the component
              that matched (<a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="ref-for-index-term-subject-11">subject</a> or <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="ref-for-index-term-object-type-11">object</a>) to
              <var>H<sub>n</sub></var>, adding an entry
              as necessary.</li>
          </ol>
        </li>
      </ol>
    </li>
  </ul>
</section>

<section id="index" class="appendix"><div class="header-wrapper"><h2 id="d-index"><bdi class="secno">D. </bdi>Index</h2><a class="self-link" href="#index" aria-label="Permalink for Appendix D."></a></div><section id="index-defined-here"><div class="header-wrapper"><h3 id="d-1-terms-defined-by-this-specification"><bdi class="secno">D.1 </bdi>Terms defined by this specification</h3><a class="self-link" href="#index-defined-here" aria-label="Permalink for Appendix D.1"></a></div>
    
    <ul class="index">
    <li>
      <a class="index-term" href="#dfn-blank-node-to-quads-map">blank node to quads map</a> 
    <span class="print-only">§4.2</span></li><li>
      <a class="index-term" href="#dfn-canonical-issuer">canonical issuer</a> 
    <span class="print-only">§4.2</span></li><li>
      <a class="index-term" href="#dfn-canonical-n-quads">canonical n-quads form</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-canonicalization-function">canonicalization function</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-canonicalization-state">canonicalization state</a> 
    <span class="print-only">§4.2</span></li><li>
      <a class="index-term" href="#dfn-canonicalized-dataset">canonicalized dataset</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-definition">definition</a> 
    <span class="print-only">§1.3</span></li><li>
      <a class="index-term" href="#dfn-gossip-path">gossip path</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-graph-isomorphism">graph isomorphism</a> 
    <span class="print-only">§1.</span></li><li>
      <a class="index-term" href="#dfn-hash">hash</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-hash-algorithm">hash algorithm</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-hash-to-blank-nodes-map">hash to blank nodes map</a> 
    <span class="print-only">§4.2</span></li><li>
      <a class="index-term" href="#dfn-identifier-counter">identifier counter</a> 
    <span class="print-only">§4.3</span></li><li>
      <a class="index-term" href="#dfn-identifier-issuer">identifier issuer</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-identifier-prefix">identifier prefix</a> 
    <span class="print-only">§4.3</span></li><li>
      <a class="index-term" href="#dfn-input-blank-node-identifier-map">input blank node identifier map</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-input-dataset">input dataset</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-issued-identifiers-map">issued identifiers map</a> 
    <span class="print-only">§4.3</span></li><li>
      <a class="index-term" href="#dfn-mention">mention</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-mention-set">mention set</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-nquads">nquads</a> 
    <span class="print-only">§4.6.3</span></li><li>
      <a class="index-term" href="#dfn-partial-canonicalization-function">partial canonicalization function</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-quad">quad</a> 
    <span class="print-only">§3.1</span></li><li>
      <a class="index-term" href="#dfn-rdfc-1-0">RDFC-1.0</a> 
    <span class="print-only">§4.</span></li><li>
      <a class="index-term" href="#dfn-reference-blank-node-identifier">reference blank node identifier</a> 
    <span class="print-only">§4.6.3</span></li><li>
      <a class="index-term" href="#dfn-serialized-canonical-form">serialized canonical form</a> 
    <span class="print-only">§5.</span></li><li>
      <a class="index-term" href="#dfn-urdna2015">URDNA2015</a> 
    <span class="print-only">§B.</span></li><li>
      <a class="index-term" href="#dfn-urgna2012">URGNA2012</a> 
    <span class="print-only">§C.</span></li>
  </ul>
  </section><section id="index-defined-elsewhere"><div class="header-wrapper"><h3 id="d-2-terms-defined-by-reference"><bdi class="secno">D.2 </bdi>Terms defined by reference</h3><a class="self-link" href="#index-defined-elsewhere" aria-label="Permalink for Appendix D.2"></a></div>
    
    <ul class="index">
    <li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-bcp47">BCP47</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.rfc-editor.org/rfc/rfc5646#section-2.1.1" id="index-term-formatting-conventions" tabindex="0" aria-haspopup="dialog">formatting conventions</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-infra">INFRA</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#boolean" id="index-term-boolean-type" tabindex="0" aria-haspopup="dialog">boolean type</span>
  </li><li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#map-entry" id="index-term-entry-for-map" tabindex="0" aria-haspopup="dialog">entry (for <code>map</code>)</span>
  </li><li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#map-key" id="index-term-key-for-map" tabindex="0" aria-haspopup="dialog">key (for <code>map</code>)</span>
  </li><li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#list" id="index-term-list" tabindex="0" aria-haspopup="dialog">list</span>
  </li><li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#ordered-map" id="index-term-map" tabindex="0" aria-haspopup="dialog">map</span>
  </li><li>
    <span class="index-term" data-href="https://infra.spec.whatwg.org/#string" id="index-term-string" tabindex="0" aria-haspopup="dialog">string</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads">N-QUADS</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#sec-mediaReg" id="index-term-c-n-quads-internet-media-type-file-extension-and-macintosh-file-type" tabindex="0" aria-haspopup="dialog">C. N-Quads Internet Media Type, File Extension and Macintosh File Type</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-ECHAR" id="index-term-echar" tabindex="0" aria-haspopup="dialog">ECHAR</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-EOL" id="index-term-eol" tabindex="0" aria-haspopup="dialog">EOL</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-graphLabel" id="index-term-graphlabel" tabindex="0" aria-haspopup="dialog">graphLabel</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-HEX" id="index-term-hex" tabindex="0" aria-haspopup="dialog">HEX</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-literal" id="index-term-literal" tabindex="0" aria-haspopup="dialog">literal</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-STRING_LITERAL_QUOTE" id="index-term-string_literal_quote" tabindex="0" aria-haspopup="dialog">STRING_LITERAL_QUOTE</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-quads/#grammar-production-UCHAR" id="index-term-uchar" tabindex="0" aria-haspopup="dialog">UCHAR</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-triples">N-TRIPLES</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/n-triples/#canonical-ntriples" id="index-term-canonical-n-triples" tabindex="0" aria-haspopup="dialog">Canonical N-Triples</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-concepts">RDF11-CONCEPTS</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="index-term-blank-node-identifiers" tabindex="0" aria-haspopup="dialog">blank node identifiers</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" id="index-term-blank-nodes" tabindex="0" aria-haspopup="dialog">blank nodes</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#section-blank-nodes" id="index-term-blank-nodes-0" tabindex="0" aria-haspopup="dialog">Blank Nodes</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph" id="index-term-default-graph" tabindex="0" aria-haspopup="dialog">default graph</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" id="index-term-graph-name" tabindex="0" aria-haspopup="dialog">graph name</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri" id="index-term-iris" tabindex="0" aria-haspopup="dialog">IRIs</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-dataset-isomorphism" id="index-term-isomorphic-datasets" tabindex="0" aria-haspopup="dialog">isomorphic datasets</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag" id="index-term-language-tags" tabindex="0" aria-haspopup="dialog">language tags</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string" id="index-term-language-tagged-strings" tabindex="0" aria-haspopup="dialog">language-tagged strings</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form" id="index-term-lexical-form" tabindex="0" aria-haspopup="dialog">lexical form</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal" id="index-term-literal-0" tabindex="0" aria-haspopup="dialog">literal</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-term-equality" id="index-term-literal-term-equality" tabindex="0" aria-haspopup="dialog">literal term equality</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-value" id="index-term-literal-value" tabindex="0" aria-haspopup="dialog">literal value</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" id="index-term-object-type" tabindex="0" aria-haspopup="dialog">object type</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" id="index-term-predicate" tabindex="0" aria-haspopup="dialog">predicate</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" id="index-term-rdf-datasets" tabindex="0" aria-haspopup="dialog">RDF datasets</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph" id="index-term-rdf-graph" tabindex="0" aria-haspopup="dialog">RDF graph</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-source" id="index-term-rdf-source" tabindex="0" aria-haspopup="dialog">RDF source</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple" id="index-term-rdf-triple" tabindex="0" aria-haspopup="dialog">RDF triple</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#section-Graph-Literal" id="index-term-section-3-3" tabindex="0" aria-haspopup="dialog">Section 3.3</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-simple-literal" id="index-term-simple-literals" tabindex="0" aria-haspopup="dialog">simple literals</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-skolem-iri" id="index-term-skolem-iris" tabindex="0" aria-haspopup="dialog">Skolem IRIs</span>
  </li><li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" id="index-term-subject" tabindex="0" aria-haspopup="dialog">subject</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rdf11-mt">RDF11-MT</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/rdf11-mt/#rdf-collections" id="index-term-rdf-collections" tabindex="0" aria-haspopup="dialog">RDF Collections</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-vc-data-integrity">VC-DATA-INTEGRITY</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/vc-data-integrity/#selective-disclosure" id="index-term-selective-disclosure" tabindex="0" aria-haspopup="dialog">Selective Disclosure</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-xml11">XML11</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/xml11/#charsets" id="index-term-char" tabindex="0" aria-haspopup="dialog">Char</span>
  </li>
        </ul>
      </li><li>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-xpath-functions">XPATH-FUNCTIONS</a></cite>] defines the following:
        <ul>
          <li>
    <span class="index-term" data-href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" id="index-term-unicode-code-point-order" tabindex="0" aria-haspopup="dialog">Unicode code point order</span>
  </li>
        </ul>
      </li>
  </ul>
  </section></section>

<section class="appendix informative" id="changes-from-fpwd"><div class="header-wrapper"><h2 id="e-changes-since-the-first-public-working-draft-of-24-november-2022"><bdi class="secno">E. </bdi>Changes since the First Public Working Draft of 24 November 2022</h2><a class="self-link" href="#changes-from-fpwd" aria-label="Permalink for Appendix E."></a></div><p><em>This section is non-normative.</em></p>
  
  <ul>
    <li>
      The algorithm, and the examples, have been changed to systematically
      use the <code><em>xyz</em></code> format for blank node identifiers, instead of
      <code>_:xyz</code>. See <a href="https://github.com/w3c/rdf-canon/issues/46">Issue 46</a>
      for the discussion.
    </li>
    <li>
      <a href="#hash-1d-quads" class="sectionRef sec-ref"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a>
      was simplified to remove the <code>simple</code> flag,
      which was unused in existing implementations.
      The original design of the algorithm was to use the
      assigned canonical <a data-link-type="dfn" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" id="ref-for-index-term-blank-node-identifiers-46">blank node identifier</a>,
      if available, instead of <code>_:a</code> or <code>_:z</code>,
      similar to how it is used in
      the related hash algorithm, but this text never made it into the spec
      before implementations moved forward.
      Therefore, the hashes never change,
      making the loop based on the <code>simple</code>
      flag that calls this algorithm unnecessary.
      See <a href="https://github.com/w3c/rdf-canon/issues/23">Issue 23</a> for the discussion.
    </li>

    <li>Add definition for <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-13">canonical n-quads form</a>. Eventually, this should
      be a citation from [<cite><a class="bibref" data-link-type="biblio" href="#bib-n-quads" title="RDF 1.1 N-Quads">N-Quads</a></cite>], when it is updated.
      <a href="#dfn-canonical-n-quads" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonical-n-quads-14">Canonical n-quads form</a> is used in <a href="#hash-1d-quads" class="sectionRef sec-ref"><bdi class="secno">4.6 </bdi>Hash First Degree Quads</a>.
    </li>

    <li>Removed issue marker for
      <a href="https://github.com/w3c/rdf-canon/issues/15">Issue 15</a>
      in <a href="#canon-algorithm" class="sectionRef sec-ref"><bdi class="secno">4.4 </bdi>Canonicalization Algorithm</a>,
      adding a note that
      <a href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal" id="ref-for-index-term-literal-0-4">literal</a>
      components of <a href="#dfn-quad" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-quad-22">quads</a> are not normalized,
      and two literals with different syntactic representations
      remain distinct resources.</li>

    <li>Changed the way Blank Node identifiers are described
      (see <a href="https://github.com/w3c/rdf-canon/issues/46">Issue 46</a>),
      generally omitting the leading <code>_:</code> which is a serialization artifact.
      This is still required in the algorithms, but the distinction
      between what is an identifier, and the serialization form
      is clarified.</li>

    <li>Changed the name of the algorithm from <abbr title="Universal RDF Dataset Normalization Algorithm 2015">URDNA2015</abbr> to <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-16"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>.</li>

    <li>Changed the term <strong>normalized dataset</strong> to
      <a href="#dfn-canonicalized-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-canonicalized-dataset-24">canonicalized dataset</a>,
      which is composed of the <a href="#dfn-input-dataset" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-dataset-20">input dataset</a>,
      <a href="#dfn-input-blank-node-identifier-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-input-blank-node-identifier-map-11">input blank node identifier map</a>, and
      <a href="#dfn-issued-identifiers-map" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-issued-identifiers-map-15">issued identifiers map</a>.</li>
  </ul>
</section>

<section id="ack" class="appendix informative"><div class="header-wrapper"><h2 id="f-acknowledgements"><bdi class="secno">F. </bdi>Acknowledgements</h2><a class="self-link" href="#ack" aria-label="Permalink for Appendix F."></a></div><p><em>This section is non-normative.</em></p>
  

  <p>The editors would like to thank Jeremy Carroll for his work on the
    graph canonicalization problem,
    Andy Seaborne and Gavin Carothers for providing valuable feedback and testing input
    for the algorithm defined in this specification,
    Sir Tim Berners-Lee for his thoughts on graph canonicalization over the years,
    Jesús Arias Fisteus for his work on a similar algorithm, and Aiden Hogan, whose
    publication [<cite><a class="bibref" data-link-type="biblio" href="#bib-hogan-canonical-rdf" title="Canonical Forms for Isomorphic and Equivalent RDF Graphs: Algorithms for Leaning and Labelling Blank Nodes">Hogan-Canonical-RDF</a></cite>] provided an important contemporary
    analysis of the canonicalization problem and served as an independent
    justification of the development of <a href="#dfn-rdfc-1-0" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-rdfc-1-0-17"><abbr title="RDF Canonicalization algorithm version 1.0">RDFC-1.0</abbr></a>.</p>
  <p>Members of the RDF Dataset Canonicalization and Hash Working Group Group included Ahamed Azeem, Ahmad Alobaid, Andy Seaborne, Benjamin Goering, Brent Zundel, Damien Graux, Dan Brickley, Dan Yamamoto, Dave Longley, David Lehn, Gregg Kellogg, Ivan Herman, Jesse Wright, Kazue Sako, Leonard Rosenthol, Mahmoud Alkhraishi, Manu Sporny, Markus Sabadello, Michael Prorock, Phil Archer, Pierre-Antoine Champin, Sebastian Crane, Ted Thibodeau, Timothée Haudebourg, and Tobias Kuhn.
</p>

  <p>This specification is based on work done in the
    <a href="https://www.w3.org/community/credentials/"><abbr title="World Wide Web Consortium">W3C</abbr> Credentials Community Group</a>
    published as [<cite><a class="bibref" data-link-type="biblio" href="#bib-ccg-rdc-final" title="RDF Dataset Canonicalization">CCG-RDC-FINAL</a></cite>].
    Contributors to the Community Group Final Report include:
    Blake Regalia,
    Dave Longley,
    David Lehn,
    David Lozano Jarque,
    Gregg Kellogg,
    Manu Sporny,
    Markus Sabadello,
    Matt Collier, and
    Sebastian Schmittner.
  </p>

  <p>
    Portions of the work on this specification have been funded by the European
    Union's StandICT.eu 2023 program under sub-grantee contract numbers No. 08/12
    and 09/25. The
    content of this specification does not necessarily reflect the position or the
    policy of the European Union and no official endorsement should be inferred.
  </p>

  <p>
    Portions of the work on this specification have also been funded by the U.S.
    Department of Homeland Security's Silicon Valley Innovation Program under contracts
    70RSAT21T00000020 and 70RSAT23T00000006. The content of this specification does
    not necessarily reflect the position or the policy of the U.S. Government and no
    official endorsement should be inferred.
  </p>
</section>



<section id="references" class="appendix"><div class="header-wrapper"><h2 id="g-references"><bdi class="secno">G. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix G."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="g-1-normative-references"><bdi class="secno">G.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix G.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-fips-180-4">[FIPS-180-4]</dt><dd>
      <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf"><cite>FIPS PUB 180-4: Secure Hash Standard (SHS)</cite></a>.  U.S. Department of Commerce/National Institute of Standards and Technology. August 2015. National Standard. URL: <a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf">https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf</a>
    </dd><dt id="bib-infra">[INFRA]</dt><dd>
      <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Anne van Kesteren; Domenic Denicola.  WHATWG. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
    </dd><dt id="bib-n-quads">[N-Quads]</dt><dd>
      <a href="https://www.w3.org/TR/n-quads/"><cite>RDF 1.1 N-Quads</cite></a>. Gavin Carothers.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/n-quads/">https://www.w3.org/TR/n-quads/</a>
    </dd><dt id="bib-n-triples">[N-TRIPLES]</dt><dd>
      <a href="https://www.w3.org/TR/n-triples/"><cite>RDF 1.1 N-Triples</cite></a>. Gavin Carothers; Andy Seaborne.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/n-triples/">https://www.w3.org/TR/n-triples/</a>
    </dd><dt id="bib-rdf11-concepts">[RDF11-CONCEPTS]</dt><dd>
      <a href="https://www.w3.org/TR/rdf11-concepts/"><cite>RDF 1.1 Concepts and Abstract Syntax</cite></a>. Richard Cyganiak; David Wood; Markus Lanthaler.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-concepts/">https://www.w3.org/TR/rdf11-concepts/</a>
    </dd><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc3987">[RFC3987]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc3987"><cite>Internationalized Resource Identifiers (IRIs)</cite></a>. M. Duerst; M. Suignard.  IETF. January 2005. Proposed Standard. URL: <a href="https://www.rfc-editor.org/rfc/rfc3987">https://www.rfc-editor.org/rfc/rfc3987</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd><dt id="bib-turtle">[Turtle]</dt><dd>
      <a href="https://www.w3.org/TR/turtle/"><cite>RDF 1.1 Turtle</cite></a>. Eric Prud'hommeaux; Gavin Carothers.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/turtle/">https://www.w3.org/TR/turtle/</a>
    </dd><dt id="bib-unicode">[UNICODE]</dt><dd>
      <a href="https://www.unicode.org/versions/latest/"><cite>The Unicode Standard</cite></a>.  Unicode Consortium. URL: <a href="https://www.unicode.org/versions/latest/">https://www.unicode.org/versions/latest/</a>
    </dd><dt id="bib-xml11">[XML11]</dt><dd>
      <a href="https://www.w3.org/TR/xml11/"><cite>Extensible Markup Language (XML) 1.1 (Second Edition)</cite></a>. Tim Bray; Jean Paoli; Michael Sperberg-McQueen; Eve Maler; François Yergeau; John Cowan et al.  W3C. 16 August 2006. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xml11/">https://www.w3.org/TR/xml11/</a>
    </dd><dt id="bib-xpath-functions">[XPATH-FUNCTIONS]</dt><dd>
      <a href="https://www.w3.org/TR/xpath-functions/"><cite>XQuery 1.0 and XPath 2.0 Functions and Operators (Second Edition)</cite></a>. Ashok Malhotra; Jim Melton; Norman Walsh; Michael Kay.  W3C. 14 December 2010. W3C Recommendation. URL: <a href="https://www.w3.org/TR/xpath-functions/">https://www.w3.org/TR/xpath-functions/</a>
    </dd></dl>
  </section><section id="informative-references"><div class="header-wrapper"><h3 id="g-2-informative-references"><bdi class="secno">G.2 </bdi>Informative references</h3><a class="self-link" href="#informative-references" aria-label="Permalink for Appendix G.2"></a></div>
    
    <dl class="bibliography"><dt id="bib-bcp47">[BCP47]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc5646"><cite>Tags for Identifying Languages</cite></a>. A. Phillips, Ed.; M. Davis, Ed..  IETF. September 2009. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc5646">https://www.rfc-editor.org/rfc/rfc5646</a>
    </dd><dt id="bib-ccg-rdc-final">[CCG-RDC-FINAL]</dt><dd>
      <a href="https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/"><cite>RDF Dataset Canonicalization</cite></a>. Dave Longley.  W3C. October 9, 2022. CG-FINAL. URL: <a href="https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/">https://www.w3.org/community/reports/credentials/CG-FINAL-rdf-dataset-canonicalization-20221009/</a>
    </dd><dt id="bib-hogan-canonical-rdf">[Hogan-Canonical-RDF]</dt><dd>
      <a href="https://aidanhogan.com/docs/rdf-canonicalisation.pdf"><cite>Canonical Forms for Isomorphic and Equivalent RDF Graphs: Algorithms for Leaning and Labelling Blank Nodes</cite></a>. Aiden Hogan.  ACM. November 2017. ACM Trans. Web 11, 4, Article 22. URL: <a href="https://aidanhogan.com/docs/rdf-canonicalisation.pdf">https://aidanhogan.com/docs/rdf-canonicalisation.pdf</a>
    </dd><dt id="bib-rch-explainer">[RCH-EXPLAINER]</dt><dd>
      <a href="https://www.w3.org/TR/rch-explainer/"><cite>RDF Dataset Canonicalization and Hash Working Group — Explainer and Use Cases</cite></a>. Phil Archer.  W3C. 19 October 2023. W3C Working Group Note. URL: <a href="https://www.w3.org/TR/rch-explainer/">https://www.w3.org/TR/rch-explainer/</a>
    </dd><dt id="bib-rdf11-mt">[RDF11-MT]</dt><dd>
      <a href="https://www.w3.org/TR/rdf11-mt/"><cite>RDF 1.1 Semantics</cite></a>. Patrick Hayes; Peter Patel-Schneider.  W3C. 25 February 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/rdf11-mt/">https://www.w3.org/TR/rdf11-mt/</a>
    </dd><dt id="bib-vc-data-integrity">[VC-DATA-INTEGRITY]</dt><dd>
      <a href="https://www.w3.org/TR/vc-data-integrity/"><cite>Verifiable Credential Data Integrity 1.0</cite></a>. Manu Sporny; Dave Longley; Greg Bernstein; Dmitri Zagidulin; Sebastian Crane.  W3C. 21 October 2023. W3C Working Draft. URL: <a href="https://www.w3.org/TR/vc-data-integrity/">https://www.w3.org/TR/vc-data-integrity/</a>
    </dd><dt id="bib-yaml">[YAML]</dt><dd>
      <a href="http://yaml.org/spec/1.2/spec.html"><cite>YAML Ain’t Markup Language (YAML™) Version 1.2</cite></a>. Oren Ben-Kiki; Clark Evans; Ingy döt Net. 1 October 2009. URL: <a href="http://yaml.org/spec/1.2/spec.html">http://yaml.org/spec/1.2/spec.html</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-graph-isomorphism" aria-label="Links in this document to definition: graph isomorphism">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-graph-isomorphism" aria-label="Permalink for definition: graph isomorphism. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-graph-isomorphism-1" title="§ 4.8.1 Overview">§ 4.8.1 Overview</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-definition" aria-label="Links in this document to definition: definition">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-definition" aria-label="Permalink for definition: definition. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-definition-1" title="§ 1.3 Typographical conventions">§ 1.3 Typographical conventions</a> <a href="#ref-for-dfn-definition-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-canonical-n-quads" aria-label="Links in this document to definition: canonical n-quads form">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-canonical-n-quads" aria-label="Permalink for definition: canonical n-quads form. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-canonical-n-quads-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> <a href="#ref-for-dfn-canonical-n-quads-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-3" title="§ 2. Conformance">§ 2. Conformance</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-4" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-5" title="§ 4.6.1 Overview">§ 4.6.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-6" title="§ 4.6.2 Examples">§ 4.6.2 Examples</a> <a href="#ref-for-dfn-canonical-n-quads-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-8" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-dfn-canonical-n-quads-9" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-10" title="§ 5. Serialization">§ 5. Serialization</a> <a href="#ref-for-dfn-canonical-n-quads-11" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-12" title="§ B. URDNA2015">§ B. URDNA2015</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-n-quads-13" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> <a href="#ref-for-dfn-canonical-n-quads-14" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-canonicalization-function" aria-label="Links in this document to definition: canonicalization function">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-canonicalization-function" aria-label="Permalink for definition: canonicalization function. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-canonicalization-function-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-dfn-canonicalization-function-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-partial-canonicalization-function" aria-label="Links in this document to definition: partial canonicalization function">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-partial-canonicalization-function" aria-label="Permalink for definition: partial canonicalization function. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-canonicalized-dataset" aria-label="Links in this document to definition: canonicalized dataset">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-canonicalized-dataset" aria-label="Permalink for definition: canonicalized dataset. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-canonicalized-dataset-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> <a href="#ref-for-dfn-canonicalized-dataset-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-3" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-dfn-canonicalized-dataset-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-5" title="§ 4. Canonicalization">§ 4. Canonicalization</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-6" title="§ 4.4 Canonicalization Algorithm">§ 4.4 Canonicalization Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-7" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> <a href="#ref-for-dfn-canonicalized-dataset-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-canonicalized-dataset-9" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-10" title="§ 4.4.2 Examples">§ 4.4.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-11" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-canonicalized-dataset-12" title="Reference 2">(2)</a> <a href="#ref-for-dfn-canonicalized-dataset-13" title="Reference 3">(3)</a> <a href="#ref-for-dfn-canonicalized-dataset-14" title="Reference 4">(4)</a> <a href="#ref-for-dfn-canonicalized-dataset-15" title="Reference 5">(5)</a> <a href="#ref-for-dfn-canonicalized-dataset-16" title="Reference 6">(6)</a> <a href="#ref-for-dfn-canonicalized-dataset-17" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-18" title="§ 5. Serialization">§ 5. Serialization</a> <a href="#ref-for-dfn-canonicalized-dataset-19" title="Reference 2">(2)</a> <a href="#ref-for-dfn-canonicalized-dataset-20" title="Reference 3">(3)</a> <a href="#ref-for-dfn-canonicalized-dataset-21" title="Reference 4">(4)</a> <a href="#ref-for-dfn-canonicalized-dataset-22" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-23" title="§ 6. Privacy Considerations">§ 6. Privacy Considerations</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalized-dataset-24" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-gossip-path" aria-label="Links in this document to definition: gossip path">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-gossip-path" aria-label="Permalink for definition: gossip path. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-gossip-path-1" title="§ 4.8 Hash N-Degree Quads">§ 4.8 Hash N-Degree Quads</a> 
    </li><li>
      <a href="#ref-for-dfn-gossip-path-2" title="§ 4.8.1 Overview">§ 4.8.1 Overview</a> <a href="#ref-for-dfn-gossip-path-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-gossip-path-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-gossip-path-5" title="Reference 4">(4)</a> <a href="#ref-for-dfn-gossip-path-6" title="Reference 5">(5)</a> <a href="#ref-for-dfn-gossip-path-7" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-gossip-path-8" title="§ 4.8.2 Examples">§ 4.8.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-gossip-path-9" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-hash" aria-label="Links in this document to definition: hash">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-hash" aria-label="Permalink for definition: hash. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-hash-1" title="§ 4.1 Overview">§ 4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-2" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> <a href="#ref-for-dfn-hash-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-hash-4" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-5" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-6" title="§ 4.6 Hash First Degree Quads">§ 4.6 Hash First Degree Quads</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-7" title="§ 4.6.1 Overview">§ 4.6.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-8" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-9" title="§ 4.7 Hash Related Blank Node">§ 4.7 Hash Related Blank Node</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-10" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> <a href="#ref-for-dfn-hash-11" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-12" title="§ 4.8 Hash N-Degree Quads">§ 4.8 Hash N-Degree Quads</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-13" title="§ 4.8.1 Overview">§ 4.8.1 Overview</a> <a href="#ref-for-dfn-hash-14" title="Reference 2">(2)</a> <a href="#ref-for-dfn-hash-15" title="Reference 3">(3)</a> <a href="#ref-for-dfn-hash-16" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-17" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-hash-18" title="Reference 2">(2)</a> <a href="#ref-for-dfn-hash-19" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-hash-algorithm" aria-label="Links in this document to definition: hash algorithm">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-hash-algorithm" aria-label="Permalink for definition: hash algorithm. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-hash-algorithm-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-algorithm-2" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-algorithm-3" title="§ 4.6.2 Examples">§ 4.6.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-algorithm-4" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-algorithm-5" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-algorithm-6" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-hash-algorithm-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-hash-algorithm-8" title="§ 7.2 Insecure Hash Algorithms">§ 7.2 Insecure Hash Algorithms</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-identifier-issuer" aria-label="Links in this document to definition: identifier issuer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-identifier-issuer" aria-label="Permalink for definition: identifier issuer. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-identifier-issuer-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-2" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-3" title="§ 4.3 Blank Node Identifier Issuer State">§ 4.3 Blank Node Identifier Issuer State</a> <a href="#ref-for-dfn-identifier-issuer-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-5" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-6" title="§ 4.5.2 Algorithm">§ 4.5.2 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-7" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-8" title="§ 4.8.2 Examples">§ 4.8.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-issuer-9" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-identifier-issuer-10" title="Reference 2">(2)</a> <a href="#ref-for-dfn-identifier-issuer-11" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-input-blank-node-identifier-map" aria-label="Links in this document to definition: input blank node identifier map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-input-blank-node-identifier-map" aria-label="Permalink for definition: input blank node identifier map. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-input-blank-node-identifier-map-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-input-blank-node-identifier-map-2" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-input-blank-node-identifier-map-4" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-6" title="Reference 3">(3)</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-7" title="Reference 4">(4)</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-8" title="Reference 5">(5)</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-9" title="Reference 6">(6)</a> <a href="#ref-for-dfn-input-blank-node-identifier-map-10" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-dfn-input-blank-node-identifier-map-11" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-input-dataset" aria-label="Links in this document to definition: input dataset">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-input-dataset" aria-label="Permalink for definition: input dataset. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-input-dataset-1" title="§ 2. Conformance">§ 2. Conformance</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-2" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-dfn-input-dataset-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-input-dataset-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-input-dataset-5" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-6" title="§ 4. Canonicalization">§ 4. Canonicalization</a> <a href="#ref-for-dfn-input-dataset-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-8" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-9" title="§ 4.4 Canonicalization Algorithm">§ 4.4 Canonicalization Algorithm</a> <a href="#ref-for-dfn-input-dataset-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-11" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-12" title="§ 4.4.2 Examples">§ 4.4.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-13" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-input-dataset-14" title="Reference 2">(2)</a> <a href="#ref-for-dfn-input-dataset-15" title="Reference 3">(3)</a> <a href="#ref-for-dfn-input-dataset-16" title="Reference 4">(4)</a> <a href="#ref-for-dfn-input-dataset-17" title="Reference 5">(5)</a> <a href="#ref-for-dfn-input-dataset-18" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-19" title="§ 4.5.1 Overview">§ 4.5.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-input-dataset-20" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mention" aria-label="Links in this document to definition: mention">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-mention" aria-label="Permalink for definition: mention. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-mention-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-dfn-mention-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-mention-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-4" title="§ 4.1 Overview">§ 4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-5" title="§ 4.4.2 Examples">§ 4.4.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-6" title="§ 4.6.2 Examples">§ 4.6.2 Examples</a> <a href="#ref-for-dfn-mention-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-mention-8" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-9" title="§ 4.8.1 Overview">§ 4.8.1 Overview</a> <a href="#ref-for-dfn-mention-10" title="Reference 2">(2)</a> <a href="#ref-for-dfn-mention-11" title="Reference 3">(3)</a> <a href="#ref-for-dfn-mention-12" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-mention-set" aria-label="Links in this document to definition: mention set">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-mention-set" aria-label="Permalink for definition: mention set. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-mention-set-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-set-2" title="§ 4.6.1 Overview">§ 4.6.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-set-3" title="§ 4.7 Hash Related Blank Node">§ 4.7 Hash Related Blank Node</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-set-4" title="§ 4.8 Hash N-Degree Quads">§ 4.8 Hash N-Degree Quads</a> 
    </li><li>
      <a href="#ref-for-dfn-mention-set-5" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-mention-set-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-mention-set-7" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-quad" aria-label="Links in this document to definition: quad">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-quad" aria-label="Permalink for definition: quad. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-quad-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-dfn-quad-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-3" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-dfn-quad-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-5" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-6" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-7" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-quad-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-quad-9" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-10" title="§ 4.6 Hash First Degree Quads">§ 4.6 Hash First Degree Quads</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-11" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-dfn-quad-12" title="Reference 2">(2)</a> <a href="#ref-for-dfn-quad-13" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-14" title="§ 4.7 Hash Related Blank Node">§ 4.7 Hash Related Blank Node</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-15" title="§ 4.7.1 Overview">§ 4.7.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-16" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-17" title="§ 4.8 Hash N-Degree Quads">§ 4.8 Hash N-Degree Quads</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-18" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-quad-19" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-20" title="§ 5. Serialization">§ 5. Serialization</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-21" title="§ C. URGNA2012">§ C. URGNA2012</a> 
    </li><li>
      <a href="#ref-for-dfn-quad-22" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-rdfc-1-0" aria-label="Links in this document to definition: RDFC-1.0">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-rdfc-1-0" aria-label="Permalink for definition: RDFC-1.0. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-rdfc-1-0-1" title="§ Status of This Document">§ Status of This Document</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-2" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-dfn-rdfc-1-0-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-4" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-dfn-rdfc-1-0-5" title="Reference 2">(2)</a> <a href="#ref-for-dfn-rdfc-1-0-6" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-7" title="§ 4. Canonicalization">§ 4. Canonicalization</a> <a href="#ref-for-dfn-rdfc-1-0-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-rdfc-1-0-9" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-10" title="§ 4.1 Overview">§ 4.1 Overview</a> <a href="#ref-for-dfn-rdfc-1-0-11" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-12" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> <a href="#ref-for-dfn-rdfc-1-0-13" title="Reference 2">(2)</a> <a href="#ref-for-dfn-rdfc-1-0-14" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-15" title="§ B. URDNA2015">§ B. URDNA2015</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-16" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li><li>
      <a href="#ref-for-dfn-rdfc-1-0-17" title="§ F. Acknowledgements">§ F. Acknowledgements</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-canonicalization-state" aria-label="Links in this document to definition: canonicalization state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-canonicalization-state" aria-label="Permalink for definition: canonicalization state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-canonicalization-state-1" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalization-state-2" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-canonicalization-state-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalization-state-4" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalization-state-5" title="§ 4.7.1 Overview">§ 4.7.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalization-state-6" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> <a href="#ref-for-dfn-canonicalization-state-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonicalization-state-8" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-canonicalization-state-9" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-blank-node-to-quads-map" aria-label="Links in this document to definition: blank node to quads map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-blank-node-to-quads-map" aria-label="Permalink for definition: blank node to quads map. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-1" title="§ 4.4.2 Examples">§ 4.4.2 Examples</a> <a href="#ref-for-dfn-blank-node-to-quads-map-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-3" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-blank-node-to-quads-map-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-blank-node-to-quads-map-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-blank-node-to-quads-map-6" title="Reference 4">(4)</a> <a href="#ref-for-dfn-blank-node-to-quads-map-7" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-8" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-9" title="§ 4.8.2 Examples">§ 4.8.2 Examples</a> <a href="#ref-for-dfn-blank-node-to-quads-map-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-11" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-12" title="§ 9.1 Duplicate Paths">§ 9.1 Duplicate Paths</a> 
    </li><li>
      <a href="#ref-for-dfn-blank-node-to-quads-map-13" title="§ 9.3 Dataset with Blank Node Named Graph">§ 9.3 Dataset with Blank Node Named Graph</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-hash-to-blank-nodes-map" aria-label="Links in this document to definition: hash to blank nodes map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-hash-to-blank-nodes-map" aria-label="Permalink for definition: hash to blank nodes map. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-hash-to-blank-nodes-map-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-hash-to-blank-nodes-map-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-hash-to-blank-nodes-map-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-hash-to-blank-nodes-map-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-hash-to-blank-nodes-map-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-hash-to-blank-nodes-map-6" title="Reference 6">(6)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-canonical-issuer" aria-label="Links in this document to definition: canonical issuer">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-canonical-issuer" aria-label="Permalink for definition: canonical issuer. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-canonical-issuer-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-2" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-3" title="§ 4.4.2 Examples">§ 4.4.2 Examples</a> <a href="#ref-for-dfn-canonical-issuer-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-5" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-canonical-issuer-6" title="Reference 2">(2)</a> <a href="#ref-for-dfn-canonical-issuer-7" title="Reference 3">(3)</a> <a href="#ref-for-dfn-canonical-issuer-8" title="Reference 4">(4)</a> <a href="#ref-for-dfn-canonical-issuer-9" title="Reference 5">(5)</a> <a href="#ref-for-dfn-canonical-issuer-10" title="Reference 6">(6)</a> <a href="#ref-for-dfn-canonical-issuer-11" title="Reference 7">(7)</a> <a href="#ref-for-dfn-canonical-issuer-12" title="Reference 8">(8)</a> <a href="#ref-for-dfn-canonical-issuer-13" title="Reference 9">(9)</a> <a href="#ref-for-dfn-canonical-issuer-14" title="Reference 10">(10)</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-15" title="§ 4.7.1 Overview">§ 4.7.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-16" title="§ 4.7.2 Examples">§ 4.7.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-17" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-18" title="§ 4.8.2 Examples">§ 4.8.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-canonical-issuer-19" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-identifier-prefix" aria-label="Links in this document to definition: identifier prefix">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-identifier-prefix" aria-label="Permalink for definition: identifier prefix. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-identifier-prefix-1" title="§ 4.3 Blank Node Identifier Issuer State">§ 4.3 Blank Node Identifier Issuer State</a> <a href="#ref-for-dfn-identifier-prefix-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-prefix-3" title="§ 4.5.1 Overview">§ 4.5.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-prefix-4" title="§ 4.5.2 Algorithm">§ 4.5.2 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-identifier-counter" aria-label="Links in this document to definition: identifier counter">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-identifier-counter" aria-label="Permalink for definition: identifier counter. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-identifier-counter-1" title="§ 4.3 Blank Node Identifier Issuer State">§ 4.3 Blank Node Identifier Issuer State</a> 
    </li><li>
      <a href="#ref-for-dfn-identifier-counter-2" title="§ 4.5.2 Algorithm">§ 4.5.2 Algorithm</a> <a href="#ref-for-dfn-identifier-counter-3" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-issued-identifiers-map" aria-label="Links in this document to definition: issued identifiers map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-issued-identifiers-map" aria-label="Permalink for definition: issued identifiers map. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-issued-identifiers-map-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-2" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-3" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> <a href="#ref-for-dfn-issued-identifiers-map-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-5" title="§ 4.4.2 Examples">§ 4.4.2 Examples</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-6" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-issued-identifiers-map-7" title="Reference 2">(2)</a> <a href="#ref-for-dfn-issued-identifiers-map-8" title="Reference 3">(3)</a> <a href="#ref-for-dfn-issued-identifiers-map-9" title="Reference 4">(4)</a> <a href="#ref-for-dfn-issued-identifiers-map-10" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-11" title="§ 4.5.1 Overview">§ 4.5.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-12" title="§ 4.5.2 Algorithm">§ 4.5.2 Algorithm</a> <a href="#ref-for-dfn-issued-identifiers-map-13" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-14" title="§ 5. Serialization">§ 5. Serialization</a> 
    </li><li>
      <a href="#ref-for-dfn-issued-identifiers-map-15" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-reference-blank-node-identifier" aria-label="Links in this document to definition: reference blank node identifier">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-reference-blank-node-identifier" aria-label="Permalink for definition: reference blank node identifier. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-reference-blank-node-identifier-1" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-dfn-reference-blank-node-identifier-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-nquads" aria-label="Links in this document to definition: nquads">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-nquads" aria-label="Permalink for definition: nquads. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-nquads-1" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-dfn-nquads-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-nquads-3" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> <a href="#ref-for-dfn-nquads-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-nquads-5" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-dfn-nquads-6" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-serialized-canonical-form" aria-label="Links in this document to definition: serialized canonical form">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-serialized-canonical-form" aria-label="Permalink for definition: serialized canonical form. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-serialized-canonical-form-1" title="§ 4. Canonicalization">§ 4. Canonicalization</a> <a href="#ref-for-dfn-serialized-canonical-form-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-serialized-canonical-form-3" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-dfn-serialized-canonical-form-4" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-dfn-serialized-canonical-form-5" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-urdna2015" aria-label="Links in this document to definition: URDNA2015">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-urdna2015" aria-label="Permalink for definition: URDNA2015. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
      <li>Not referenced in this document.</li>
    </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-urgna2012" aria-label="Links in this document to definition: URGNA2012">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-urgna2012" aria-label="Permalink for definition: URGNA2012. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> 
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-urgna2012-1" title="§ C. URGNA2012">§ C. URGNA2012</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-formatting-conventions" aria-label="Links in this document to definition: formatting conventions">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.rfc-editor.org/rfc/rfc5646#section-2.1.1" aria-label="Permalink for definition: formatting conventions. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-formatting-conventions-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-boolean-type" aria-label="Links in this document to definition: boolean type">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#boolean" aria-label="Permalink for definition: boolean type. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-boolean-type-1" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-entry-for-map" aria-label="Links in this document to definition: entry (for map)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#map-entry" aria-label="Permalink for definition: entry (for map). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-entry-for-map-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-index-term-entry-for-map-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-entry-for-map-3" title="Reference 3">(3)</a> <a href="#ref-for-index-term-entry-for-map-4" title="Reference 4">(4)</a> <a href="#ref-for-index-term-entry-for-map-5" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-index-term-entry-for-map-6" title="§ 4.5.2 Algorithm">§ 4.5.2 Algorithm</a> <a href="#ref-for-index-term-entry-for-map-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-entry-for-map-8" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-entry-for-map-9" title="§ 4.8.2 Examples">§ 4.8.2 Examples</a> <a href="#ref-for-index-term-entry-for-map-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-entry-for-map-11" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-key-for-map" aria-label="Links in this document to definition: key (for map)">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#map-key" aria-label="Permalink for definition: key (for map). Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-key-for-map-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-index-term-key-for-map-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-list" aria-label="Links in this document to definition: list">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#list" aria-label="Permalink for definition: list. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-list-1" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-index-term-list-2" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-index-term-list-3" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-map" aria-label="Links in this document to definition: map">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#ordered-map" aria-label="Permalink for definition: map. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-map-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-index-term-map-2" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> <a href="#ref-for-index-term-map-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-map-4" title="§ 4.3 Blank Node Identifier Issuer State">§ 4.3 Blank Node Identifier Issuer State</a> 
    </li><li>
      <a href="#ref-for-index-term-map-5" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-string" aria-label="Links in this document to definition: string">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://infra.spec.whatwg.org/#string" aria-label="Permalink for definition: string. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-string-1" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-string-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-string-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-string-4" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> <a href="#ref-for-index-term-string-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-string-6" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-string-7" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-c-n-quads-internet-media-type-file-extension-and-macintosh-file-type" aria-label="Links in this document to definition: C. N-Quads Internet Media Type, File Extension and Macintosh File Type">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#sec-mediaReg" aria-label="Permalink for definition: C. N-Quads Internet Media Type, File Extension and Macintosh File Type. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-c-n-quads-internet-media-type-file-extension-and-macintosh-file-type-1" title="§ 5. Serialization">§ 5. Serialization</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-echar" aria-label="Links in this document to definition: ECHAR">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-ECHAR" aria-label="Permalink for definition: ECHAR. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-echar-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> <a href="#ref-for-index-term-echar-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-echar-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-echar-4" title="§ B. URDNA2015">§ B. URDNA2015</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-eol" aria-label="Links in this document to definition: EOL">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-EOL" aria-label="Permalink for definition: EOL. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-eol-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> <a href="#ref-for-index-term-eol-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-graphlabel" aria-label="Links in this document to definition: graphLabel">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-graphLabel" aria-label="Permalink for definition: graphLabel. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-graphlabel-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-hex" aria-label="Links in this document to definition: HEX">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-HEX" aria-label="Permalink for definition: HEX. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-hex-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> <a href="#ref-for-index-term-hex-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-literal" aria-label="Links in this document to definition: literal">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-literal" aria-label="Permalink for definition: literal. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-literal-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-string_literal_quote" aria-label="Links in this document to definition: STRING_LITERAL_QUOTE">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-STRING_LITERAL_QUOTE" aria-label="Permalink for definition: STRING_LITERAL_QUOTE. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-string_literal_quote-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> <a href="#ref-for-index-term-string_literal_quote-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-string_literal_quote-3" title="§ B. URDNA2015">§ B. URDNA2015</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-uchar" aria-label="Links in this document to definition: UCHAR">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-quads/#grammar-production-UCHAR" aria-label="Permalink for definition: UCHAR. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-uchar-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> <a href="#ref-for-index-term-uchar-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-uchar-3" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-canonical-n-triples" aria-label="Links in this document to definition: Canonical N-Triples">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/n-triples/#canonical-ntriples" aria-label="Permalink for definition: Canonical N-Triples. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-canonical-n-triples-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-blank-node-identifiers" aria-label="Links in this document to definition: blank node identifiers">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node-identifier" aria-label="Permalink for definition: blank node identifiers. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-blank-node-identifiers-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> <a href="#ref-for-index-term-blank-node-identifiers-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-3" title="Reference 3">(3)</a> <a href="#ref-for-index-term-blank-node-identifiers-4" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-5" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-blank-node-identifiers-6" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-7" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-8" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-blank-node-identifiers-9" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-10" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-11" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> <a href="#ref-for-index-term-blank-node-identifiers-12" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-13" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-14" title="§ 4.3 Blank Node Identifier Issuer State">§ 4.3 Blank Node Identifier Issuer State</a> <a href="#ref-for-index-term-blank-node-identifiers-15" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-16" title="Reference 3">(3)</a> <a href="#ref-for-index-term-blank-node-identifiers-17" title="Reference 4">(4)</a> <a href="#ref-for-index-term-blank-node-identifiers-18" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-19" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-index-term-blank-node-identifiers-20" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-21" title="Reference 3">(3)</a> <a href="#ref-for-index-term-blank-node-identifiers-22" title="Reference 4">(4)</a> <a href="#ref-for-index-term-blank-node-identifiers-23" title="Reference 5">(5)</a> <a href="#ref-for-index-term-blank-node-identifiers-24" title="Reference 6">(6)</a> <a href="#ref-for-index-term-blank-node-identifiers-25" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-26" title="§ 4.5 Issue Identifier Algorithm">§ 4.5 Issue Identifier Algorithm</a> <a href="#ref-for-index-term-blank-node-identifiers-27" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-28" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-29" title="§ 4.5.1 Overview">§ 4.5.1 Overview</a> <a href="#ref-for-index-term-blank-node-identifiers-30" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-31" title="§ 4.6.1 Overview">§ 4.6.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-32" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-index-term-blank-node-identifiers-33" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-34" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-35" title="§ 4.7.2 Examples">§ 4.7.2 Examples</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-36" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-37" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-blank-node-identifiers-38" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-39" title="Reference 3">(3)</a> <a href="#ref-for-index-term-blank-node-identifiers-40" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-41" title="§ 9.1 Duplicate Paths">§ 9.1 Duplicate Paths</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-42" title="§ C. URGNA2012">§ C. URGNA2012</a> <a href="#ref-for-index-term-blank-node-identifiers-43" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-node-identifiers-44" title="Reference 3">(3)</a> <a href="#ref-for-index-term-blank-node-identifiers-45" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-node-identifiers-46" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-blank-nodes" aria-label="Links in this document to definition: blank nodes">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-blank-node" aria-label="Permalink for definition: blank nodes. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-blank-nodes-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> <a href="#ref-for-index-term-blank-nodes-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-nodes-3" title="Reference 3">(3)</a> <a href="#ref-for-index-term-blank-nodes-4" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-5" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-blank-nodes-6" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-7" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-blank-nodes-8" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-nodes-9" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-10" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-11" title="§ 4.3 Blank Node Identifier Issuer State">§ 4.3 Blank Node Identifier Issuer State</a> <a href="#ref-for-index-term-blank-nodes-12" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-13" title="§ 4.4 Canonicalization Algorithm">§ 4.4 Canonicalization Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-14" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-15" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-index-term-blank-nodes-16" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-17" title="§ 4.6 Hash First Degree Quads">§ 4.6 Hash First Degree Quads</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-18" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> <a href="#ref-for-index-term-blank-nodes-19" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-20" title="§ 4.7 Hash Related Blank Node">§ 4.7 Hash Related Blank Node</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-21" title="§ 4.7.1 Overview">§ 4.7.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-22" title="§ 4.7.2 Examples">§ 4.7.2 Examples</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-23" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-24" title="§ 4.8 Hash N-Degree Quads">§ 4.8 Hash N-Degree Quads</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-25" title="§ 4.8.2 Examples">§ 4.8.2 Examples</a> <a href="#ref-for-index-term-blank-nodes-26" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-27" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-blank-nodes-28" title="Reference 2">(2)</a> <a href="#ref-for-index-term-blank-nodes-29" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-30" title="§ 5. Serialization">§ 5. Serialization</a> <a href="#ref-for-index-term-blank-nodes-31" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-32" title="§ 9.3 Dataset with Blank Node Named Graph">§ 9.3 Dataset with Blank Node Named Graph</a> 
    </li><li>
      <a href="#ref-for-index-term-blank-nodes-33" title="§ C. URGNA2012">§ C. URGNA2012</a> <a href="#ref-for-index-term-blank-nodes-34" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-blank-nodes-0" aria-label="Links in this document to definition: Blank Nodes">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#section-blank-nodes" aria-label="Permalink for definition: Blank Nodes. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-blank-nodes-0-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-default-graph" aria-label="Links in this document to definition: default graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-default-graph" aria-label="Permalink for definition: default graph. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-default-graph-1" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-default-graph-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-default-graph-3" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-default-graph-4" title="§ 9.3 Dataset with Blank Node Named Graph">§ 9.3 Dataset with Blank Node Named Graph</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-graph-name" aria-label="Links in this document to definition: graph name">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-graph-name" aria-label="Permalink for definition: graph name. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-graph-name-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-graph-name-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-graph-name-3" title="Reference 3">(3)</a> <a href="#ref-for-index-term-graph-name-4" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-graph-name-5" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-graph-name-6" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-graph-name-7" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-graph-name-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-graph-name-9" title="§ C. URGNA2012">§ C. URGNA2012</a> <a href="#ref-for-index-term-graph-name-10" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-iris" aria-label="Links in this document to definition: IRIs">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-iri" aria-label="Permalink for definition: IRIs. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-iris-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li><li>
      <a href="#ref-for-index-term-iris-2" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-iris-3" title="Reference 2">(2)</a> <a href="#ref-for-index-term-iris-4" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-isomorphic-datasets" aria-label="Links in this document to definition: isomorphic datasets">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-dataset-isomorphism" aria-label="Permalink for definition: isomorphic datasets. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-isomorphic-datasets-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-isomorphic-datasets-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-language-tags" aria-label="Links in this document to definition: language tags">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tag" aria-label="Permalink for definition: language tags. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-language-tags-1" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-index-term-language-tags-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-language-tags-3" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-language-tagged-strings" aria-label="Links in this document to definition: language-tagged strings">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-language-tagged-string" aria-label="Permalink for definition: language-tagged strings. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-language-tagged-strings-1" title="§ 1. Introduction">§ 1. Introduction</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-lexical-form" aria-label="Links in this document to definition: lexical form">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-lexical-form" aria-label="Permalink for definition: lexical form. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-lexical-form-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-literal-0" aria-label="Links in this document to definition: literal">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal" aria-label="Permalink for definition: literal. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-literal-0-1" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> 
    </li><li>
      <a href="#ref-for-index-term-literal-0-2" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-literal-0-3" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> 
    </li><li>
      <a href="#ref-for-index-term-literal-0-4" title="§ E. Changes since the First Public Working Draft of 24 November 2022">§ E. Changes since the First Public Working Draft of 24 November 2022</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-literal-term-equality" aria-label="Links in this document to definition: literal term equality">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-term-equality" aria-label="Permalink for definition: literal term equality. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-literal-term-equality-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-literal-value" aria-label="Links in this document to definition: literal value">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-literal-value" aria-label="Permalink for definition: literal value. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-literal-value-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-object-type" aria-label="Links in this document to definition: object type">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-object" aria-label="Permalink for definition: object type. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-object-type-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-object-type-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-object-type-3" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-object-type-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-object-type-5" title="§ 4.7.2 Examples">§ 4.7.2 Examples</a> 
    </li><li>
      <a href="#ref-for-index-term-object-type-6" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-object-type-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-object-type-8" title="§ C. URGNA2012">§ C. URGNA2012</a> <a href="#ref-for-index-term-object-type-9" title="Reference 2">(2)</a> <a href="#ref-for-index-term-object-type-10" title="Reference 3">(3)</a> <a href="#ref-for-index-term-object-type-11" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-predicate" aria-label="Links in this document to definition: predicate">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-predicate" aria-label="Permalink for definition: predicate. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-predicate-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-predicate-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-predicate-3" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-predicate-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-predicate-5" title="§ 4.7.3 Algorithm">§ 4.7.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-predicate-6" title="§ C. URGNA2012">§ C. URGNA2012</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-rdf-datasets" aria-label="Links in this document to definition: RDF datasets">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-dataset" aria-label="Permalink for definition: RDF datasets. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-rdf-datasets-1" title="§ Abstract">§ Abstract</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-2" title="§ Status of This Document">§ Status of This Document</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-3" title="§ 1. Introduction">§ 1. Introduction</a> <a href="#ref-for-index-term-rdf-datasets-4" title="Reference 2">(2)</a> <a href="#ref-for-index-term-rdf-datasets-5" title="Reference 3">(3)</a> <a href="#ref-for-index-term-rdf-datasets-6" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-7" title="§ 1.2 How to Read this Document">§ 1.2 How to Read this Document</a> <a href="#ref-for-index-term-rdf-datasets-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-9" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-rdf-datasets-10" title="Reference 2">(2)</a> <a href="#ref-for-index-term-rdf-datasets-11" title="Reference 3">(3)</a> <a href="#ref-for-index-term-rdf-datasets-12" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-13" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-rdf-datasets-14" title="Reference 2">(2)</a> <a href="#ref-for-index-term-rdf-datasets-15" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-16" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-17" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-18" title="§ 4.6 Hash First Degree Quads">§ 4.6 Hash First Degree Quads</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-19" title="§ 4.8 Hash N-Degree Quads">§ 4.8 Hash N-Degree Quads</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-datasets-20" title="§ 9.3 Dataset with Blank Node Named Graph">§ 9.3 Dataset with Blank Node Named Graph</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-rdf-graph" aria-label="Links in this document to definition: RDF graph">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-graph" aria-label="Permalink for definition: RDF graph. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-rdf-graph-1" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-rdf-graph-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-graph-3" title="§ 4.2 Canonicalization State">§ 4.2 Canonicalization State</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-rdf-source" aria-label="Links in this document to definition: RDF source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-source" aria-label="Permalink for definition: RDF source. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-rdf-source-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-rdf-triple" aria-label="Links in this document to definition: RDF triple">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-rdf-triple" aria-label="Permalink for definition: RDF triple. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-rdf-triple-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-triple-2" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-rdf-triple-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-rdf-triple-4" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-section-3-3" aria-label="Links in this document to definition: Section 3.3">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#section-Graph-Literal" aria-label="Permalink for definition: Section 3.3. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-section-3-3-1" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-simple-literals" aria-label="Links in this document to definition: simple literals">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-simple-literal" aria-label="Permalink for definition: simple literals. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-simple-literals-1" title="§ B. URDNA2015">§ B. URDNA2015</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-skolem-iris" aria-label="Links in this document to definition: Skolem IRIs">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-skolem-iri" aria-label="Permalink for definition: Skolem IRIs. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-skolem-iris-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-subject" aria-label="Links in this document to definition: subject">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-concepts/#dfn-subject" aria-label="Permalink for definition: subject. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-subject-1" title="§ 3.1 Terms defined by this specification">§ 3.1 Terms defined by this specification</a> <a href="#ref-for-index-term-subject-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-subject-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-subject-4" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-subject-5" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-subject-6" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-subject-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-index-term-subject-8" title="§ C. URGNA2012">§ C. URGNA2012</a> <a href="#ref-for-index-term-subject-9" title="Reference 2">(2)</a> <a href="#ref-for-index-term-subject-10" title="Reference 3">(3)</a> <a href="#ref-for-index-term-subject-11" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-rdf-collections" aria-label="Links in this document to definition: RDF Collections">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/rdf11-mt/#rdf-collections" aria-label="Permalink for definition: RDF Collections. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-rdf-collections-1" title="§ 1.1 Uses of Dataset Canonicalization">§ 1.1 Uses of Dataset Canonicalization</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-selective-disclosure" aria-label="Links in this document to definition: Selective Disclosure">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/vc-data-integrity/#selective-disclosure" aria-label="Permalink for definition: Selective Disclosure. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-selective-disclosure-1" title="§ 6. Privacy Considerations">§ 6. Privacy Considerations</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-char" aria-label="Links in this document to definition: Char">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/xml11/#charsets" aria-label="Permalink for definition: Char. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-char-1" title="§ A. A Canonical form of N-Quads">§ A. A Canonical form of N-Quads</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-index-term-unicode-code-point-order" aria-label="Links in this document to definition: Unicode code point order">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="https://www.w3.org/TR/xpath-functions/#codepoint-collation" aria-label="Permalink for definition: Unicode code point order. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-index-term-unicode-code-point-order-1" title="§ 3.2 Terms defined by cited specifications">§ 3.2 Terms defined by cited specifications</a> <a href="#ref-for-index-term-unicode-code-point-order-2" title="Reference 2">(2)</a> <a href="#ref-for-index-term-unicode-code-point-order-3" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-4" title="§ 4.4.1 Overview">§ 4.4.1 Overview</a> <a href="#ref-for-index-term-unicode-code-point-order-5" title="Reference 2">(2)</a> <a href="#ref-for-index-term-unicode-code-point-order-6" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-7" title="§ 4.4.3 Algorithm">§ 4.4.3 Algorithm</a> <a href="#ref-for-index-term-unicode-code-point-order-8" title="Reference 2">(2)</a> <a href="#ref-for-index-term-unicode-code-point-order-9" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-10" title="§ 4.6.1 Overview">§ 4.6.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-11" title="§ 4.6.3 Algorithm">§ 4.6.3 Algorithm</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-12" title="§ 4.8.1 Overview">§ 4.8.1 Overview</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-13" title="§ 4.8.3 Algorithm">§ 4.8.3 Algorithm</a> <a href="#ref-for-index-term-unicode-code-point-order-14" title="Reference 2">(2)</a> <a href="#ref-for-index-term-unicode-code-point-order-15" title="Reference 3">(3)</a> <a href="#ref-for-index-term-unicode-code-point-order-16" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-index-term-unicode-code-point-order-17" title="§ 5. Serialization">§ 5. Serialization</a> 
    </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>